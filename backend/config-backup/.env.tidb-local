# TiDB 本地分布式集群配置
# 替代 TiDB Cloud，使用本地部署的 TiDB 集群

# 数据库基本配置
DB_TYPE=mysql
DB_HOST=127.0.0.1
DB_PORT=4000
DB_USERNAME=caddy_app
DB_PASSWORD=your_secure_password_here
DB_DATABASE=caddy_shopping_db

# TiDB 特定配置
DB_CHARSET=utf8mb4
DB_TIMEZONE=+08:00

# 连接池配置
DB_POOL_SIZE=20
DB_MAX_CONNECTIONS=20
DB_MIN_CONNECTIONS=5
DB_CONNECTION_TIMEOUT=60000
DB_ACQUIRE_TIMEOUT=60000
DB_IDLE_TIMEOUT=300000

# TiDB 集群节点配置（可选，用于负载均衡）
TIDB_NODES=127.0.0.1:4000,127.0.0.1:4001
PD_ENDPOINTS=127.0.0.1:2379,127.0.0.1:2380,127.0.0.1:2381

# 监控配置
TIDB_DASHBOARD_URL=http://127.0.0.1:2379/dashboard
GRAFANA_URL=http://127.0.0.1:3000

# 应用配置
NODE_ENV=development
PORT=3000

# Redis 配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
CART_REDIS_DB=1
CART_CACHE_REDIS_DB=2

# JWT 配置
JWT_SECRET=your_jwt_secret_key_here
JWT_EXPIRES_IN=7d

# 文件上传配置
UPLOAD_DEST=./uploads
MAX_FILE_SIZE=10485760

# 邮件配置
MAIL_HOST=smtp.example.com
MAIL_PORT=587
MAIL_USER=noreply@example.com
MAIL_PASS=your_mail_password

# Redpanda/Kafka 配置
REDPANDA_BROKERS=localhost:9092
REDPANDA_CLIENT_ID=caddy-shopping-backend

# 缓存配置
CACHE_TTL=3600
CART_CACHE_TTL=3600
CART_LOCK_TIMEOUT=30000
CART_LOCK_RETRY_DELAY=100
CART_LOCK_RETRY_COUNT=10

# 日志配置
LOG_LEVEL=debug
LOG_FILE=./logs/app.log