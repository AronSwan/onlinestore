# ================================
# 🧪 测试环境配置
# ================================
NODE_ENV=test
PORT=3001
API_PREFIX=api
APP_NAME=caddy-style-shopping-backend-test
APP_VERSION=1.0.0

# ================================
# 🗄️ 数据库配置 (测试环境使用SQLite)
# ================================
DB_TYPE=sqlite
DB_HOST=localhost
DB_PORT=4000
DB_USERNAME=root
DB_PASSWORD=test_password
DB_DATABASE=./data/test_caddy_shopping.db
DB_CHARSET=utf8mb4
DB_TIMEZONE=+08:00
DB_SSL=false
DB_SYNCHRONIZE=true
DB_LOGGING=false

# 连接池配置
DB_POOL_SIZE=5
DB_MAX_CONNECTIONS=5
DB_MIN_CONNECTIONS=1
DB_CONNECTION_TIMEOUT=10000
DB_ACQUIRE_TIMEOUT=10000
DB_IDLE_TIMEOUT=30000

# ================================
# 🔴 Redis 配置 (测试环境)
# ================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=15
REDIS_KEY_PREFIX=test:caddy:
REDIS_TTL=60
REDIS_POOL_SIZE=5
REDIS_CONNECT_TIMEOUT=5000
REDIS_COMMAND_TIMEOUT=2000
REDIS_TLS=false

# ================================
# 🔐 JWT 安全配置 (测试环境)
# ================================
JWT_SECRET=test-jwt-secret-key-for-testing-only-at-least-32-chars-min
JWT_ALGORITHM=HS256
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=caddy-shopping-api-test
JWT_AUDIENCE=caddy-shopping-client-test

# ================================
# 🛡️ 安全配置 (测试环境)
# ================================
ENCRYPTION_KEY=test_encryption_key_exactly_64_characters_long_for_testing_purps
ENCRYPTION_ALGORITHM=aes-256-gcm
# 密钥长度强制为32字节（64字符），提供最高安全性
ENCRYPTION_IV_LENGTH=12
ENCRYPTION_TAG_LENGTH=16

PAYMENT_SIGNATURE_SECRET=test_payment_signature_secret_key
PAYMENT_MAX_AMOUNT=1000000
PAYMENT_MAX_RETRY_COUNT=3
PAYMENT_CALLBACK_TIMEOUT_MINUTES=15
PAYMENT_NONCE_EXPIRY_MINUTES=15

# CORS 配置
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://127.0.0.1:3000
CORS_CREDENTIALS=true
ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,http://localhost:5173

# ================================
# 🚦 限流配置 (测试环境)
# ================================
THROTTLER_TTL=60
THROTTLER_LIMIT=1000

# ================================
# 📝 日志配置 (测试环境)
# ================================
LOG_LEVEL=error
LOG_FILE=./logs/test.log
LOG_FILE_PATH=./logs
LOG_FORMAT=json
LOG_MASK_SENSITIVE_FIELDS=password,secret,token,key,signature

# ================================
# 📊 监控配置 (测试环境)
# ================================
METRICS_ENABLED=false
HEALTH_CHECK_ENABLED=true
TRACING_ENABLED=false

# ================================
# 📊 OpenObserve 配置 (测试环境)
# ================================
OPENOBSERVE_URL=http://localhost:5080
OPENOBSERVE_ORGANIZATION=test-org
OPENOBSERVE_TOKEN=test-token
OPENOBSERVE_BASE_URL=http://localhost:5080
OPENOBSERVE_ORG=test-org

# ================================
#  文件上传配置 (测试环境)
# ================================
UPLOAD_DEST=./test-uploads
MAX_FILE_SIZE=1048576
REQUEST_MAX_PAYLOAD_SIZE=10mb

# ================================
# 📧 邮件配置 (测试环境)
# ================================
MAIL_HOST=localhost
MAIL_PORT=1025
MAIL_USER=test@example.com
MAIL_PASS=test
MAIL_FROM=test@caddy-shopping.com
MAIL_PROVIDER=smtp

# ================================
# 📱 消息队列配置 (测试环境)
# ================================
REDPANDA_BROKERS=localhost:9092
REDPANDA_CLIENT_ID=caddy-shopping-backend-test
REDPANDA_GROUP_ID=caddy-shopping-group-test

# ================================
# 🔍 搜索配置 (测试环境)
# ================================
SEARCH_PROVIDER=local

# ================================
# 🌐 国际化配置 (测试环境)
# ================================
DEFAULT_TIMEZONE=Asia/Shanghai
SUPPORTED_LOCALES=zh,en
DEFAULT_LOCALE=zh

# ================================
# 🛡️ 安全防护配置 (测试环境)
# ================================
SSRF_ALLOWED_DOMAINS=localhost,127.0.0.1
SSRF_BLOCK_PRIVATE_IPS=true
PASSWORD_EXCLUDE_FIELDS=password,oldPassword,newPassword,confirmPassword
RESPONSE_EXCLUDE_FIELDS=password,oldPassword,newPassword,confirmPassword,token,refreshToken
CSRF_COOKIE_NAME=csrf-token
SECURITY_CHECK_ENABLED=false
SECURITY_CHECK_FAIL_ON_HIGH=false
SECURITY_CHECK_SCAN_TIMEOUT=60000
SECURITY_CHECK_CACHE_ENABLED=false

# ================================
# ⚙️ 配置验证 (测试环境)
# ================================
SKIP_CONFIG_VALIDATION=true