# é‡å¯å TiDB å¯åŠ¨æŒ‡å—

## ğŸ”„ é‡å¯ç³»ç»Ÿ
ç°åœ¨å°±å¯ä»¥é‡å¯ Windows ç³»ç»Ÿä»¥å®Œæˆ WSL2 å®‰è£…ã€‚

## ğŸš€ é‡å¯åæ“ä½œ

### 1. å¯åŠ¨ WSL2 Ubuntu
```powershell
# åœ¨ PowerShell ä¸­æ‰§è¡Œ
wsl -d Ubuntu
```

### 2. æ‰§è¡Œè‡ªåŠ¨åŒ–è®¾ç½®è„šæœ¬
```bash
# åœ¨ Ubuntu WSL2 ä¸­æ‰§è¡Œ
bash /mnt/d/codes/onlinestore/caddy-style-shopping-site/backend/scripts/setup-tidb-after-reboot.sh
```

### 3. éªŒè¯ TiDB è¿æ¥
å›åˆ° Windows PowerShellï¼š
```powershell
cd d:\codes\onlinestore\caddy-style-shopping-site\backend
npm run tidb:health
npm run migration:run
```

### 4. æ£€æŸ¥åç«¯çŠ¶æ€
ä½ çš„åç«¯ dev è¿›ç¨‹åº”è¯¥ä¼šè‡ªåŠ¨è¿æ¥åˆ° TiDB å¹¶åœæ­¢é‡è¯•é”™è¯¯ã€‚

## ğŸ“Š TiDB é›†ç¾¤ä¿¡æ¯
- **SQL è¿æ¥**: `mysql -h 127.0.0.1 -P 4000 -u root`
- **Dashboard**: http://127.0.0.1:2379/dashboard
- **Grafana**: http://127.0.0.1:3000 (ç”¨æˆ·å: admin, å¯†ç : admin)

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### æŸ¥çœ‹ TiDB çŠ¶æ€
```bash
# åœ¨ WSL2 Ubuntu ä¸­
tiup playground display
```

### æŸ¥çœ‹ TiDB æ—¥å¿—
```bash
tail -f ~/tidb.log
```

### åœæ­¢ TiDB é›†ç¾¤
```bash
tiup playground stop
```

### é‡å¯ TiDB é›†ç¾¤
```bash
tiup playground v7.5.0 --db 1 --pd 1 --kv 1 --host 0.0.0.0
```

## ğŸš¨ æ•…éšœæ’æŸ¥

### å¦‚æœè¿æ¥å¤±è´¥
1. æ£€æŸ¥ TiDB æ˜¯å¦è¿è¡Œï¼š`tiup playground display`
2. æ£€æŸ¥ç«¯å£æ˜¯å¦ç›‘å¬ï¼š`netstat -tlnp | grep 4000`
3. æŸ¥çœ‹æ—¥å¿—ï¼š`tail -20 ~/tidb.log`

### å¦‚æœåç«¯ä»ç„¶æŠ¥é”™
1. é‡å¯åç«¯ dev è¿›ç¨‹ï¼šCtrl+C åé‡æ–° `npm run start:dev`
2. æ£€æŸ¥ç¯å¢ƒå˜é‡ï¼šç¡®è®¤ `.env` æ–‡ä»¶ä¸­çš„æ•°æ®åº“é…ç½®
3. æµ‹è¯•è¿æ¥ï¼š`npm run tidb:health`

## âœ… æˆåŠŸæ ‡å¿—
- WSL2 Ubuntu æ­£å¸¸å¯åŠ¨
- TiDB é›†ç¾¤è¿è¡Œåœ¨ 4000 ç«¯å£
- `npm run tidb:health` è¿”å› `{"status":"up"}`
- åç«¯ dev è¿›ç¨‹ä¸å†æŠ¥æ•°æ®åº“è¿æ¥é”™è¯¯
- è¿ç§»æˆåŠŸæ‰§è¡Œ

ç°åœ¨å¯ä»¥é‡å¯ç³»ç»Ÿäº†ï¼