[{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\animation-utils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\auth-ui.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\auth.js","messages":[{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":297,"column":59,"nodeType":"Program","messageId":"trailingSpace","endLine":297,"endColumn":60,"fix":{"range":[7873,7874],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":298,"column":28,"nodeType":"Program","messageId":"trailingSpace","endLine":298,"endColumn":29,"fix":{"range":[7902,7903],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":300,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":300,"endColumn":9,"fix":{"range":[7925,7933],"text":""}}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":3,"fixableWarningCount":0,"source":"/* global Utils */\n/**\n * 用户认证系统模块\n * 提供用户注册、登录、会话管理等功能\n * @author AI Assistant\n * @version 1.0\n * @date 2025-01-12\n */\n\n// 常量定义\nconst API_DELAY_MIN = 500;\nconst API_DELAY_MAX = 1000;\n\nclass AuthManager {\n  constructor(config = {}) {\n    // 配置选项\n    this.config = {\n      // API配置\n      apiBaseURL: config.apiBaseURL || '/api',\n      apiTimeout: config.apiTimeout || 30000,\n\n      // 会话配置\n      sessionTimeout: config.sessionTimeout || 30 * 60 * 1000, // 30分钟\n      rememberMeDuration: config.rememberMeDuration || 7 * 24 * 60 * 60 * 1000, // 7天\n\n      // 密码策略配置\n      passwordPolicy: {\n        minLength: 8,\n        requireUppercase: true,\n        requireLowercase: true,\n        requireNumbers: true,\n        requireSpecialChars: true,\n        maxAge: 90 * 24 * 60 * 60 * 1000, // 90天\n        preventReuse: 5,\n        ...config.passwordPolicy\n      },\n\n      // 账户锁定配置\n      lockoutPolicy: {\n        maxAttempts: 5,\n        lockoutDuration: 15 * 60 * 1000, // 15分钟\n        progressiveLockout: true,\n        ...config.lockoutPolicy\n      },\n\n      // UI配置\n      uiConfig: {\n        showPasswordStrength: true,\n        enableAutoComplete: true,\n        showLoginRememberMe: true,\n        enableSocialLogin: false,\n        ...config.uiConfig\n      },\n\n      // 安全配置\n      securityConfig: {\n        enableCSRFProtection: true,\n        enableRateLimiting: true,\n        enableSessionValidation: true,\n        enableDeviceTracking: true,\n        ...config.securityConfig\n      },\n\n      ...config\n    };\n\n    // 兼容旧版本的依赖注入\n    this.storage = config.storage || localStorage;\n    this.eventBus = config.eventBus || window;\n    this.apiBase = config.apiBase || this.config.apiBaseURL;\n    this.sessionKey = 'user_session';\n    this.userKey = 'user_data';\n    this.tokenKey = 'auth_token';\n\n    // 认证状态\n    this.currentUser = null;\n    this.isAuthenticated = false;\n    this.sessionData = null;\n\n    // 事件监听器\n    this.eventListeners = new Map();\n\n    // 初始化认证管理器\n    this.initialize();\n  }\n\n  /**\n     * 初始化所有模块\n     */\n  initializeModules() {\n    try {\n      // 输入验证模块\n      // 确保RealTimeValidationManager已加载\n      if (typeof window.RealTimeValidationManager === 'undefined') {\n        console.warn('RealTimeValidationManager not loaded, skipping input validation');\n        this.inputValidator = null;\n      } else {\n        this.inputValidator = new window.RealTimeValidationManager({\n          enableRealTimeValidation: true,\n          showValidationMessages: true\n        });\n      }\n\n      // 密码安全模块\n      // PasswordSecurityManager 在 password-security.js 中定义\n      this.passwordSecurity = window.PasswordSecurityManager ? new window.PasswordSecurityManager(this.config.passwordPolicy) : null;\n      this.passwordPolicy = new PasswordPolicyManager(this.config.passwordPolicy);\n      this.accountLockout = new AccountLockoutManager(this.config.lockoutPolicy);\n\n      // 会话管理模块\n      this.sessionManager = new SessionManager({\n        timeout: this.config.sessionTimeout,\n        enableAutoRefresh: true,\n        enableDeviceTracking: this.config.securityConfig.enableDeviceTracking\n      });\n\n      // UI交互模块\n      this.uiManager = new UIInteractionManager(this.config.uiConfig);\n\n      // API集成模块\n      this.apiManager = new APIIntegrationManager({\n        baseURL: this.config.apiBaseURL,\n        timeout: this.config.apiTimeout,\n        enableLogging: true,\n        enableCaching: true\n      });\n\n      // 注册管理模块\n      if (typeof window.RegistrationManager !== 'undefined') {\n        this.registrationManager = new window.RegistrationManager({\n          enableEmailVerification: this.config.enableEmailVerification,\n          enableUsernameReservation: this.config.enableUsernameReservation,\n          reservationTimeout: this.config.reservationTimeout || 300000,\n          maxRetryAttempts: this.config.maxRetryAttempts || 3,\n          enableRateLimiting: this.config.enableRateLimiting,\n          enableConcurrencyControl: this.config.enableConcurrencyControl\n        });\n      } else {\n        console.warn('RegistrationManager not loaded, using fallback registration');\n        this.registrationManager = null;\n      }\n\n      console.log('认证模块初始化完成');\n\n    } catch (error) {\n      console.error('认证模块初始化失败:', error);\n      throw new Error('认证系统初始化失败');\n    }\n  }\n\n  /**\n     * 初始化认证管理器\n     */\n  async initialize() {\n    try {\n      // 初始化所有模块\n      this.initializeModules();\n\n      // 检查现有会话\n      await this.checkExistingSession();\n\n      // 设置事件监听\n      this.setupEventListeners();\n\n      // 初始化UI组件\n      this.uiManager.initialize();\n\n      // 触发初始化完成事件\n      this.dispatchAuthEvent('initialized', {\n        isAuthenticated: this.isAuthenticated,\n        user: this.currentUser\n      });\n\n    } catch (error) {\n      console.error('认证管理器初始化失败:', error);\n    }\n  }\n\n  /**\n     * 设置事件监听器\n     */\n  setupEventListeners() {\n    // 监听会话过期事件\n    document.addEventListener('auth:sessionExpired', () => {\n      this.handleSessionExpired();\n    });\n\n    // 监听令牌刷新事件\n    document.addEventListener('auth:tokenRefreshed', (event) => {\n      this.handleTokenRefreshed(event.detail);\n    });\n\n    // 监听账户锁定事件\n    document.addEventListener('auth:accountLocked', (event) => {\n      this.handleAccountLocked(event.detail);\n    });\n\n    // 监听密码过期事件\n    document.addEventListener('auth:passwordExpired', () => {\n      this.handlePasswordExpired();\n    });\n\n    // 监听页面卸载事件\n    window.addEventListener('beforeunload', () => {\n      this.handlePageUnload();\n    });\n\n    // 监听存储变化事件\n    window.addEventListener('storage', (e) => {\n      if (e.key === this.sessionKey) {\n        this.handleStorageChange(e);\n      }\n    });\n  }\n\n  /**\n   * 通用API操作处理器\n   * @param {string} operation - 操作名称\n   * @param {string} loadingMessage - 加载消息\n   * @param {Function} apiCall - API调用函数\n   * @param {Function} successHandler - 成功处理函数\n   * @param {Object} errorEventData - 错误事件数据\n   * @returns {Promise<Object>} 操作结果\n   */\n  async _handleApiOperation(operation, loadingMessage, apiCall, successHandler, errorEventData = {}) {\n    try {\n      this.uiManager.showLoading(loadingMessage);\n      const response = await apiCall();\n\n      if (response.success) {\n        this.uiManager.hideLoading();\n        const result = await successHandler(response);\n        return result;\n      }\n      throw new Error(response.message || `${operation}失败`);\n\n    } catch (error) {\n      this.uiManager.hideLoading();\n      this.uiManager.showNotification(error.message, 'error');\n\n      this.dispatchAuthEvent(`${operation}Error`, {\n        error: error.message,\n        ...errorEventData\n      });\n\n      return {\n        success: false,\n        message: error.message\n      };\n    }\n  }\n\n  /**\n   * 通用存储错误处理器\n   * @param {Error} error - 错误对象\n   * @param {string} context - 操作上下文\n   * @param {string} action - 操作动作\n   */\n  _handleStorageError(error, context, action = 'storageOperation') {\n    if (window.errorUtils) {\n      window.errorUtils.handleError(error, {\n        context,\n        action,\n        severity: 'error'\n      });\n    }\n\n    if (window.errorHandler) {\n      window.errorHandler.handleStorageError(error, context);\n    }\n  }\n\n  /**\n     * 用户注册\n     * @param {Object} userData - 用户注册数据\n     * @param {string} userData.username - 用户名\n     * @param {string} userData.email - 邮箱\n     * @param {string} userData.password - 密码\n     * @param {string} userData.confirmPassword - 确认密码\n     * @param {boolean} userData.agreeTerms - 是否同意服务条款\n     * @returns {Promise<Object>} 注册结果\n     */\n  async register(userData) {\n    return this._handleApiOperation(\n      'register',\n      '正在注册...',\n      async () => {\n        // 使用新的注册管理器处理完整注册流程\n        if (!this.registrationManager) {\n          throw new Error('注册管理器未初始化');\n        }\n\n        return await this.registrationManager.register(userData);\n      },\n      async (response) => {\n        // 显示成功通知\n        const message = response.requiresEmailVerification \n          ? '注册成功！请查收验证邮件。' \n          : '注册成功！';\n        \n        this.uiManager.showNotification(message, 'success');\n\n        // 触发注册成功事件\n        this.dispatchAuthEvent('registerSuccess', {\n          user: response.user,\n          requiresVerification: response.requiresEmailVerification,\n          registrationId: response.registrationId\n        });\n\n        return response;\n      },\n      { email: userData.email }\n    );\n  }\n\n  /**\n     * 用户登录\n     * @param {Object} credentials - 登录凭据\n     * @param {string} credentials.email - 邮箱或用户名\n     * @param {string} credentials.password - 密码\n     * @param {boolean} credentials.rememberMe - 是否记住登录状态\n     * @returns {Promise<Object>} 登录结果\n     */\n  async login(credentials) {\n    return this._handleApiOperation(\n      'login',\n      '正在登录...',\n      async () => {\n        // 输入验证\n        const validationResult = this.inputValidator.validateLoginForm({\n          email: credentials.email,\n          password: credentials.password\n        });\n\n        if (!validationResult.isValid) {\n          throw new Error(validationResult.errors.join(', '));\n        }\n\n        // 检查账户锁定状态\n        const lockoutStatus = await this.accountLockout.checkLockoutStatus(credentials.email);\n        if (lockoutStatus.isLocked) {\n          throw new Error(`账户已被锁定，剩余时间: ${lockoutStatus.remainingTime}分钟`);\n        }\n\n        // 密码安全验证\n        const passwordHash = await this.passwordSecurity.hashPassword(credentials.password);\n\n        // 调用登录API\n        const loginData = {\n          email: credentials.email.trim().toLowerCase(),\n          passwordHash,\n          rememberMe: credentials.rememberMe,\n          deviceInfo: await this.sessionManager.getDeviceInfo()\n        };\n\n        return await this.apiManager.login(loginData);\n      },\n      async (_response) => {\n        // 重置失败计数\n        await this.accountLockout.resetFailureCount(credentials.email);\n\n        // 创建会话\n        const sessionData = await this.sessionManager.createSession({\n          user: _response.user,\n          token: _response.token,\n          refreshToken: _response.refreshToken,\n          rememberMe: credentials.rememberMe\n        });\n\n        // 更新认证状态\n        this.currentUser = _response.user;\n        this.isAuthenticated = true;\n\n        // 更新UI状态\n        this.uiManager.updateAuthenticationState(true, this.currentUser);\n        this.uiManager.showNotification('登录成功', 'success');\n\n        // 触发登录成功事件\n        this.dispatchAuthEvent('loginSuccess', {\n          user: this.currentUser,\n          sessionId: sessionData.sessionId\n        });\n\n        return {\n          success: true,\n          user: this.currentUser,\n          message: '登录成功'\n        };\n      },\n      { email: credentials.email }\n    ).catch(async (result) => {\n      // 记录失败尝试\n      if (!result.success) {\n        await this.accountLockout.recordFailureAttempt(credentials.email);\n      }\n      return result;\n    });\n  }\n\n  /**\n     * 用户登出\n     * @param {string} reason - 登出原因（可选）\n     * @returns {Promise<Object>} 登出结果\n     */\n  async logout(reason = '用户主动登出') {\n    return this._handleApiOperation(\n      'logout',\n      '正在退出...',\n      async () => {\n        // 获取当前会话信息\n        const currentSession = await this.sessionManager.getCurrentSession();\n\n        // 调用登出API（如果有有效会话）\n        if (currentSession && currentSession.sessionId) {\n          return await this.apiManager.logout({\n            sessionId: currentSession.sessionId,\n            reason\n          });\n        }\n\n        // 如果没有有效会话，返回成功\n        return { success: true, message: '本地登出成功' };\n      },\n      async (_response) => {\n        // 销毁会话\n        await this.sessionManager.destroySession();\n\n        // 清理认证状态\n        const previousUser = this.currentUser;\n        this.currentUser = null;\n        this.isAuthenticated = false;\n\n        // 清理缓存\n        if (this.apiManager.clearCache) {\n          this.apiManager.clearCache();\n        }\n\n        // 更新UI状态\n        this.uiManager.updateAuthenticationState(false);\n        this.uiManager.showNotification('已安全退出登录', 'info');\n\n        // 触发登出事件\n        this.dispatchAuthEvent('logoutSuccess', {\n          previousUser,\n          reason,\n          timestamp: new Date().toISOString()\n        });\n\n        return {\n          success: true,\n          message: '已安全退出登录'\n        };\n      },\n      { reason }\n    );\n  }\n\n  /**\n     * 检查用户是否已登录\n     * @returns {boolean} 是否已登录\n     */\n  isLoggedIn() {\n    const session = this.getSession();\n    if (!session || !session.token || !session.user) {\n      return false;\n    }\n\n    // 检查会话是否过期\n    if (session.expiresAt && new Date() > new Date(session.expiresAt)) {\n      this.clearSession();\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n     * 获取当前用户信息\n     * @returns {Object|null} 用户信息\n     */\n  getCurrentUser() {\n    if (!this.isLoggedIn()) {\n      return null;\n    }\n\n    const session = this.getSession();\n    return session ? session.user : null;\n  }\n\n  /**\n     * 获取认证令牌\n     * @returns {string|null} 认证令牌\n     */\n  getAuthToken() {\n    if (!this.isLoggedIn()) {\n      return null;\n    }\n\n    const session = this.getSession();\n    return session ? session.token : null;\n  }\n\n  /**\n     * 创建用户会话\n     * @param {Object} user - 用户信息\n     * @param {string} token - 认证令牌\n     * @param {boolean} rememberMe - 是否长期保存\n     */\n  async createSession(user, token, rememberMe = false) {\n    const sessionData = {\n      user: {\n        id: user.id,\n        username: user.username,\n        email: user.email,\n        avatar: user.avatar || null,\n        role: user.role || 'user'\n      },\n      token: token,\n      createdAt: new Date().toISOString(),\n      expiresAt: rememberMe\n        ? new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString() // 30天\n        : new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(), // 24小时\n      rememberMe: rememberMe\n    };\n\n    try {\n      this.storage.setItem(this.sessionKey, JSON.stringify(sessionData));\n      this.storage.setItem(this.userKey, JSON.stringify(sessionData.user));\n      this.storage.setItem(this.tokenKey, token);\n    } catch (error) {\n      this._handleStorageError(error, '创建用户会话', 'createSession');\n      throw new Error('无法保存登录状态');\n    }\n  }\n\n  /**\n     * 获取会话数据\n     * @returns {Object|null} 会话数据\n     */\n  getSession() {\n    try {\n      const sessionData = this.storage.getItem(this.sessionKey);\n      return sessionData ? JSON.parse(sessionData) : null;\n    } catch (error) {\n      this._handleStorageError(error, '获取会话数据', 'getSession');\n      this.clearSession();\n      return null;\n    }\n  }\n\n  /**\n     * 清除会话数据\n     */\n  clearSession() {\n    try {\n      this.storage.removeItem(this.sessionKey);\n      this.storage.removeItem(this.userKey);\n      this.storage.removeItem(this.tokenKey);\n    } catch (error) {\n      this._handleStorageError(error, '清除会话数据', 'clearSession');\n    }\n  }\n\n  /**\n     * 检查现有会话\n     */\n  async checkExistingSession() {\n    try {\n      const sessionData = await this.sessionManager.getCurrentSession();\n      if (sessionData && sessionData.isValid) {\n        this.currentUser = sessionData.user;\n        this.isAuthenticated = true;\n\n        // 验证会话安全性\n        const isSecure = await this.sessionManager.validateSessionSecurity(sessionData);\n        if (!isSecure) {\n          await this.logout('安全验证失败');\n          return;\n        }\n\n        // 更新UI状态\n        this.uiManager.updateAuthenticationState(true, this.currentUser);\n\n        // 触发会话恢复事件\n        this.dispatchAuthEvent('sessionRestored', {\n          user: this.currentUser,\n          sessionId: sessionData.sessionId\n        });\n\n      } else {\n        this.isAuthenticated = false;\n        this.currentUser = null;\n        this.uiManager.updateAuthenticationState(false);\n      }\n    } catch (error) {\n      this._handleStorageError(error, '检查现有会话', 'checkExistingSession');\n      await this.logout('会话检查失败');\n    }\n  }\n\n  /**\n     * 处理会话过期事件\n     */\n  async handleSessionExpired() {\n    console.log('会话已过期');\n    await this.logout('会话过期');\n    this.uiManager.showModal('sessionExpired', {\n      title: '会话过期',\n      message: '您的登录会话已过期，请重新登录',\n      actions: [{\n        text: '重新登录',\n        action: () => this.uiManager.showLoginForm()\n      }]\n    });\n  }\n\n  /**\n     * 处理令牌刷新事件\n     * @param {Object} tokenData - 新的令牌数据\n     */\n  async handleTokenRefreshed(tokenData) {\n    console.log('令牌已刷新');\n    this.dispatchAuthEvent('tokenRefreshed', tokenData);\n  }\n\n  /**\n     * 处理账户锁定事件\n     * @param {Object} lockoutData - 锁定信息\n     */\n  async handleAccountLocked(lockoutData) {\n    console.log('账户已被锁定:', lockoutData);\n    await this.logout('账户被锁定');\n    this.uiManager.showModal('accountLocked', {\n      title: '账户已锁定',\n      message: `您的账户因多次登录失败已被锁定，剩余时间: ${lockoutData.remainingTime}分钟`,\n      actions: [{\n        text: '确定',\n        action: () => this.uiManager.hideModal()\n      }]\n    });\n  }\n\n  /**\n     * 处理密码过期事件\n     */\n  async handlePasswordExpired() {\n    console.log('密码已过期');\n    this.uiManager.showModal('passwordExpired', {\n      title: '密码已过期',\n      message: '您的密码已过期，请更新密码',\n      actions: [{\n        text: '更新密码',\n        action: () => this.uiManager.showPasswordChangeForm()\n      }]\n    });\n  }\n\n  /**\n     * 处理页面卸载事件\n     */\n  handlePageUnload() {\n    // 清理资源\n    if (this.sessionManager) {\n      this.sessionManager.cleanup();\n    }\n  }\n\n  /**\n     * 处理存储变化事件（跨标签页同步）\n     * @param {StorageEvent} event - 存储事件\n     */\n  async handleStorageChange(event) {\n    if (event.key === this.sessionKey) {\n      if (event.newValue) {\n        // 其他标签页登录了\n        try {\n          const sessionData = JSON.parse(event.newValue);\n          if (sessionData && sessionData.isValid) {\n            this.currentUser = sessionData.user;\n            this.isAuthenticated = true;\n            this.uiManager.updateAuthenticationState(true, this.currentUser);\n\n            this.dispatchAuthEvent('sessionSynced', {\n              source: 'storage',\n              user: this.currentUser\n            });\n          }\n        } catch (error) {\n          console.error('解析存储会话数据失败:', error);\n        }\n      } else {\n        // 其他标签页登出了\n        if (this.isAuthenticated) {\n          this.currentUser = null;\n          this.isAuthenticated = false;\n          this.uiManager.updateAuthenticationState(false);\n\n          this.dispatchAuthEvent('sessionSynced', {\n            source: 'storage',\n            action: 'logout'\n          });\n        }\n      }\n    }\n  }\n\n  /**\n     * 分发认证事件\n     * @param {string} eventType - 事件类型\n     * @param {Object} eventData - 事件数据\n     */\n  dispatchAuthEvent(eventType, eventData = {}) {\n    const event = new CustomEvent(`auth:${eventType}`, {\n      detail: {\n        timestamp: new Date().toISOString(),\n        ...eventData\n      }\n    });\n    document.dispatchEvent(event);\n\n    // 同时触发旧版本兼容事件\n    this.dispatchEvent(`user:${eventType}`, eventData);\n  }\n\n  /**\n     * 添加事件监听器\n     * @param {string} eventType - 事件类型\n     * @param {Function} callback - 回调函数\n     */\n  addEventListener(eventType, callback) {\n    if (!this.eventListeners.has(eventType)) {\n      this.eventListeners.set(eventType, new Set());\n    }\n    this.eventListeners.get(eventType).add(callback);\n\n    // 添加到DOM事件监听\n    document.addEventListener(`auth:${eventType}`, callback);\n  }\n\n  /**\n     * 移除事件监听器\n     * @param {string} eventType - 事件类型\n     * @param {Function} callback - 回调函数\n     */\n  removeEventListener(eventType, callback) {\n    if (this.eventListeners.has(eventType)) {\n      this.eventListeners.get(eventType).delete(callback);\n    }\n\n    // 从DOM事件监听中移除\n    document.removeEventListener(`auth:${eventType}`, callback);\n  }\n\n  /**\n     * 获取认证状态\n     * @returns {Object} 认证状态信息\n     */\n  getAuthStatus() {\n    return {\n      isAuthenticated: this.isAuthenticated,\n      user: this.currentUser,\n      sessionValid: this.sessionManager ? this.sessionManager.isSessionValid() : false,\n      lastActivity: this.sessionManager ? this.sessionManager.getLastActivity() : null\n    };\n  }\n\n  /**\n     * 刷新认证令牌\n     * @returns {Promise<Object>} 刷新结果\n     */\n  async refreshToken() {\n    try {\n      if (!this.isAuthenticated) {\n        throw new Error('用户未登录');\n      }\n\n      const currentSession = await this.sessionManager.getCurrentSession();\n      if (!currentSession || !currentSession.refreshToken) {\n        throw new Error('无效的刷新令牌');\n      }\n\n      const response = await this.apiManager.refreshToken({\n        refreshToken: currentSession.refreshToken\n      });\n\n      if (response.success) {\n        // 更新会话中的令牌\n        await this.sessionManager.updateSession({\n          token: response.token,\n          refreshToken: response.refreshToken || currentSession.refreshToken\n        });\n\n        this.dispatchAuthEvent('tokenRefreshed', {\n          newToken: response.token\n        });\n\n        return {\n          success: true,\n          token: response.token\n        };\n      }\n      throw new Error(response.message || '令牌刷新失败');\n\n\n    } catch (error) {\n      console.error('刷新令牌失败:', error);\n\n      // 令牌刷新失败，可能需要重新登录\n      this.dispatchAuthEvent('tokenRefreshFailed', {\n        error: error.message\n      });\n\n      return {\n        success: false,\n        message: error.message\n      };\n    }\n  }\n\n  /**\n     * 验证当前会话\n     * @returns {Promise<boolean>} 会话是否有效\n     */\n  async validateSession() {\n    try {\n      if (!this.isAuthenticated) {\n        return false;\n      }\n\n      const sessionData = await this.sessionManager.getCurrentSession();\n      if (!sessionData) {\n        return false;\n      }\n\n      // 验证会话是否过期\n      if (sessionData.expiresAt && new Date() > new Date(sessionData.expiresAt)) {\n        await this.logout('会话过期');\n        return false;\n      }\n\n      // 验证令牌有效性（可选的API调用）\n      if (this.config.securityConfig.enableSessionValidation) {\n        const validationResult = await this.apiManager.validateToken({\n          token: sessionData.token\n        });\n\n        if (!validationResult.isValid) {\n          await this.logout('令牌无效');\n          return false;\n        }\n      }\n\n      return true;\n\n    } catch (error) {\n      console.error('会话验证失败:', error);\n      await this.logout('会话验证失败');\n      return false;\n    }\n  }\n\n  /**\n     * 更新用户信息\n     * @param {Object} userUpdates - 用户更新数据\n     * @returns {Promise<Object>} 更新结果\n     */\n  async updateUserProfile(userUpdates) {\n    try {\n      if (!this.isAuthenticated) {\n        throw new Error('用户未登录');\n      }\n\n      // 输入验证\n      const validationResult = this.inputValidator.validateProfileUpdate(userUpdates);\n      if (!validationResult.isValid) {\n        throw new Error(validationResult.errors.join(', '));\n      }\n\n      // 调用更新API\n      const response = await this.apiManager.updateProfile({\n        userId: this.currentUser.id,\n        updates: userUpdates\n      });\n\n      if (response.success) {\n        // 更新本地用户信息\n        this.currentUser = { ...this.currentUser, ...response.user };\n\n        // 更新会话中的用户信息\n        await this.sessionManager.updateSession({\n          user: this.currentUser\n        });\n\n        // 更新UI\n        this.uiManager.updateAuthenticationState(true, this.currentUser);\n\n        this.dispatchAuthEvent('profileUpdated', {\n          user: this.currentUser,\n          updates: userUpdates\n        });\n\n        return {\n          success: true,\n          user: this.currentUser\n        };\n      }\n      throw new Error(response.message || '更新失败');\n\n\n    } catch (error) {\n      console.error('更新用户信息失败:', error);\n\n      this.dispatchAuthEvent('profileUpdateError', {\n        error: error.message,\n        updates: userUpdates\n      });\n\n      return {\n        success: false,\n        message: error.message\n      };\n    }\n  }\n\n  /**\n     * 修改密码\n     * @param {Object} passwordData - 密码数据\n     * @param {string} passwordData.currentPassword - 当前密码\n     * @param {string} passwordData.newPassword - 新密码\n     * @param {string} passwordData.confirmPassword - 确认新密码\n     * @returns {Promise<Object>} 修改结果\n     */\n  async changePassword(passwordData) {\n    try {\n      if (!this.isAuthenticated) {\n        throw new Error('用户未登录');\n      }\n\n      // 输入验证\n      const validationResult = this.inputValidator.validatePasswordChange(passwordData);\n      if (!validationResult.isValid) {\n        throw new Error(validationResult.errors.join(', '));\n      }\n\n      // 密码策略验证\n      const passwordValidation = this.passwordPolicy.validatePassword(passwordData.newPassword);\n      if (!passwordValidation.isValid) {\n        throw new Error(`新密码不符合安全要求: ${passwordValidation.errors.join(', ')}`);\n      }\n\n      // 密码加密\n      const currentPasswordHash = await this.passwordSecurity.hashPassword(passwordData.currentPassword);\n      const newPasswordHash = await this.passwordSecurity.hashPassword(passwordData.newPassword);\n\n      // 调用修改密码API\n      const response = await this.apiManager.changePassword({\n        userId: this.currentUser.id,\n        currentPasswordHash,\n        newPasswordHash\n      });\n\n      if (response.success) {\n        this.uiManager.showNotification('密码修改成功', 'success');\n\n        this.dispatchAuthEvent('passwordChanged', {\n          userId: this.currentUser.id\n        });\n\n        return {\n          success: true,\n          message: '密码修改成功'\n        };\n      }\n      throw new Error(response.message || '密码修改失败');\n\n\n    } catch (error) {\n      console.error('修改密码失败:', error);\n\n      this.uiManager.showNotification(error.message, 'error');\n\n      this.dispatchAuthEvent('passwordChangeError', {\n        error: error.message\n      });\n\n      return {\n        success: false,\n        message: error.message\n      };\n    }\n  }\n\n  /**\n     * 销毁认证管理器\n     */\n  destroy() {\n    try {\n      // 清理事件监听器\n      this.eventListeners.forEach((callbacks, eventType) => {\n        callbacks.forEach(callback => {\n          this.removeEventListener(eventType, callback);\n        });\n      });\n      this.eventListeners.clear();\n\n      // 清理会话\n      if (this.sessionManager) {\n        this.sessionManager.destroy();\n      }\n\n      // 清理UI管理器\n      if (this.uiManager) {\n        this.uiManager.destroy();\n      }\n\n      // 清理API管理器\n      if (this.apiManager) {\n        this.apiManager.destroy();\n      }\n\n      // 重置状态\n      this.currentUser = null;\n      this.isAuthenticated = false;\n      this.sessionData = null;\n\n      console.log('认证管理器已销毁');\n\n    } catch (error) {\n      console.error('销毁认证管理器失败:', error);\n    }\n  }\n\n  /**\n     * 清理会话（页面卸载时）\n     */\n  cleanupSession() {\n    try {\n      const session = this.getSession();\n      if (session && !session.rememberMe) {\n        // 如果不是\"记住我\"模式，清除会话\n        this.clearSession();\n      }\n    } catch (error) {\n      this._handleStorageError(error, '清理会话', 'cleanupSession');\n    }\n  }\n\n  /**\n     * 验证注册数据\n     * @param {Object} userData - 用户数据\n     * @returns {Object} 验证结果\n     */\n  validateRegistrationData(userData) {\n    if (!userData.username || userData.username.trim().length < 3) {\n      return { isValid: false, message: '用户名至少需要3个字符' };\n    }\n\n    if (!userData.email || !this.isValidEmail(userData.email)) {\n      return { isValid: false, message: '请输入有效的邮箱地址' };\n    }\n\n    if (!userData.password || userData.password.length < 6) {\n      return { isValid: false, message: '密码至少需要6个字符' };\n    }\n\n    if (userData.password !== userData.confirmPassword) {\n      return { isValid: false, message: '两次输入的密码不一致' };\n    }\n\n    return { isValid: true };\n  }\n\n  /**\n     * 验证登录数据\n     * @param {Object} credentials - 登录凭据\n     * @returns {Object} 验证结果\n     */\n  validateLoginData(credentials) {\n    if (!credentials.email || credentials.email.trim().length === 0) {\n      return { isValid: false, message: '请输入邮箱或用户名' };\n    }\n\n    if (!credentials.password || credentials.password.length === 0) {\n      return { isValid: false, message: '请输入密码' };\n    }\n\n    return { isValid: true };\n  }\n\n  /**\n     * 验证邮箱格式\n     * @param {string} email - 邮箱地址\n     * @returns {boolean} 是否有效\n     */\n  isValidEmail(email) {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n  }\n\n  /**\n     * 密码哈希处理（简化版，实际项目应使用更安全的方法）\n     * @param {string} password - 原始密码\n     * @returns {Promise<string>} 哈希后的密码\n     */\n  async hashPassword(password) {\n    // 简化的哈希实现，实际项目中应使用bcrypt等安全库\n    const encoder = new TextEncoder();\n    const data = encoder.encode(password + 'salt_key_2025');\n    const hashBuffer = await crypto.subtle.digest('SHA-256', data);\n    const hashArray = Array.from(new Uint8Array(hashBuffer));\n    return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\n  }\n\n  /**\n     * 模拟API调用（实际项目中应替换为真实的API调用）\n     * @param {string} endpoint - API端点\n     * @param {Object} options - 请求选项\n     * @returns {Promise<Object>} API响应\n     */\n  async simulateApiCall(endpoint, options = {}) {\n    // 模拟网络延迟\n    await new Promise(resolve => setTimeout(resolve, API_DELAY_MIN + Math.random() * API_DELAY_MAX));\n\n    // 模拟不同的API响应\n    switch (endpoint) {\n    case '/auth/register':\n      return this.simulateRegisterResponse(options.body);\n    case '/auth/login':\n      return this.simulateLoginResponse(options.body);\n    case '/auth/logout':\n      return { success: true, message: '登出成功' };\n    default:\n      throw new Error('未知的API端点');\n    }\n  }\n\n  /**\n     * 模拟注册API响应\n     * @param {Object} userData - 用户数据\n     * @returns {Object} 模拟响应\n     */\n  simulateRegisterResponse(userData) {\n    // 模拟用户已存在的情况\n    const existingUsers = JSON.parse(localStorage.getItem('registered_users') || '[]');\n    const userExists = existingUsers.some(user =>\n      user.email === userData.email || user.username === userData.username\n    );\n\n    if (userExists) {\n      return {\n        success: false,\n        message: '用户名或邮箱已存在'\n      };\n    }\n\n    // 创建新用户\n    const newUser = {\n      id: Date.now().toString(),\n      username: userData.username,\n      email: userData.email,\n      password: userData.password,\n      createdAt: userData.createdAt,\n      role: 'user'\n    };\n\n    // 保存到本地存储（模拟数据库）\n    existingUsers.push(newUser);\n    localStorage.setItem('registered_users', JSON.stringify(existingUsers));\n\n    return {\n      success: true,\n      message: '注册成功',\n      user: {\n        id: newUser.id,\n        username: newUser.username,\n        email: newUser.email,\n        role: newUser.role\n      }\n    };\n  }\n\n  /**\n     * 模拟登录API响应\n     * @param {Object} credentials - 登录凭据\n     * @returns {Object} 模拟响应\n     */\n  simulateLoginResponse(credentials) {\n    const existingUsers = JSON.parse(localStorage.getItem('registered_users') || '[]');\n    const user = existingUsers.find(registeredUser =>\n      registeredUser.email === credentials.email && registeredUser.password === credentials.password\n    );\n\n    if (!user) {\n      return {\n        success: false,\n        message: '邮箱或密码错误'\n      };\n    }\n\n    // 生成模拟令牌\n    // 使用安全的随机数生成\n    const randomBytes = new Uint8Array(16);\n    crypto.getRandomValues(randomBytes);\n    const randomString = Array.from(randomBytes, byte => byte.toString(16).padStart(2, '0')).join('');\n    const token = 'mock_token_' + Date.now() + '_' + randomString;\n\n    return {\n      success: true,\n      message: '登录成功',\n      user: {\n        id: user.id,\n        username: user.username,\n        email: user.email,\n        role: user.role\n      },\n      token: token\n    };\n  }\n\n  /**\n     * 分发事件\n     * @param {string} eventType - 事件类型\n     * @param {Object} eventData - 事件数据\n     */\n  dispatchEvent(eventType, eventData) {\n    const event = new CustomEvent(eventType, {\n      detail: eventData\n    });\n    this.eventBus.dispatchEvent(event);\n  }\n\n  /**\n     * 获取设备信息\n     * @returns {Object} 设备信息\n     */\n  getDeviceInfo() {\n    return {\n      userAgent: navigator.userAgent,\n      platform: navigator.platform,\n      language: navigator.language,\n      screenResolution: `${screen.width}x${screen.height}`,\n      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n      timestamp: new Date().toISOString()\n    };\n  }\n\n  /**\n     * 生成会话ID\n     * @returns {string} 会话ID\n     */\n  generateSessionId() {\n    return Utils.generateSessionId();\n  }\n\n  /**\n     * 格式化错误消息\n     * @param {Error|string} error - 错误对象或消息\n     * @returns {string} 格式化后的错误消息\n     */\n  formatErrorMessage(error) {\n    if (typeof error === 'string') {\n      return error;\n    }\n\n    if (error && error.message) {\n      return error.message;\n    }\n\n    return '未知错误';\n  }\n\n  /**\n     * 检查网络连接状态\n     * @returns {boolean} 是否在线\n     */\n  isOnline() {\n    return navigator.onLine;\n  }\n\n  /**\n     * 获取认证配置\n     * @returns {Object} 当前配置\n     */\n  getConfig() {\n    return { ...this.config };\n  }\n\n  /**\n     * 更新认证配置\n     * @param {Object} newConfig - 新配置\n     */\n  updateConfig(newConfig) {\n    this.config = { ...this.config, ...newConfig };\n\n    // 重新初始化受影响的模块\n    if (newConfig.securityConfig) {\n      this.passwordPolicy.updateConfig(newConfig.securityConfig);\n    }\n\n    if (newConfig.sessionConfig) {\n      this.sessionManager.updateConfig(newConfig.sessionConfig);\n    }\n\n    if (newConfig.apiConfig) {\n      this.apiManager.updateConfig(newConfig.apiConfig);\n    }\n  }\n\n  /**\n     * 获取调试信息\n     * @returns {Object} 调试信息\n     */\n  getDebugInfo() {\n    return {\n      version: this.version,\n      isAuthenticated: this.isAuthenticated,\n      currentUser: this.currentUser ? {\n        id: this.currentUser.id,\n        username: this.currentUser.username,\n        email: this.currentUser.email\n      } : null,\n      sessionValid: this.sessionManager ? this.sessionManager.isSessionValid() : false,\n      lastActivity: this.sessionManager ? this.sessionManager.getLastActivity() : null,\n      config: this.getConfig(),\n      deviceInfo: this.getDeviceInfo(),\n      timestamp: new Date().toISOString()\n    };\n  }\n}\n\n// 导出AuthManager类\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = AuthManager;\n} else if (typeof window !== 'undefined') {\n  window.AuthManager = AuthManager;\n}\n\n// 自动初始化（如果在浏览器环境中）\nif (typeof window !== 'undefined' && typeof document !== 'undefined') {\n  // 等待DOM加载完成后初始化\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', () => {\n      if (!window.authManager) {\n        window.authManager = new AuthManager();\n      }\n    });\n  } else {\n    // DOM已经加载完成\n    if (!window.authManager) {\n      window.authManager = new AuthManager();\n    }\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\auth\\api-integration.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\auth\\auth-manager.js","messages":[{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":128,"column":91,"nodeType":"Program","messageId":"trailingSpace","endLine":128,"endColumn":92,"fix":{"range":[3437,3438],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":129,"column":39,"nodeType":"Program","messageId":"trailingSpace","endLine":129,"endColumn":40,"fix":{"range":[3477,3478],"text":""}}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":2,"fixableWarningCount":0,"source":"/**\n * AuthManager - 认证管理主控制器\n * 统一管理所有认证相关功能\n */\nclass AuthManager {\n  constructor() {\n    this.isInitialized = false;\n    this.currentUser = null;\n    this.sessionManager = null;\n    this.inputValidator = null;\n    this.passwordSecurity = null;\n    this.uiInteraction = null;\n    this.apiIntegration = null;\n\n    this.init();\n  }\n\n  /**\n     * 初始化认证管理器\n     */\n  async init() {\n    try {\n      // 等待所有依赖模块加载完成\n      await this.waitForDependencies();\n\n      // 初始化各个模块\n      this.sessionManager = new SessionManager();\n      this.inputValidator = new InputValidator();\n      this.passwordSecurity = new PasswordSecurity();\n      this.uiInteraction = new UIInteraction();\n      this.apiIntegration = new APIIntegration();\n\n      // 检查现有会话\n      await this.checkExistingSession();\n\n      this.isInitialized = true;\n      console.log('AuthManager initialized successfully');\n\n    } catch (error) {\n      console.error('Failed to initialize AuthManager:', error);\n      this.handleInitializationError(error);\n    }\n  }\n\n  /**\n     * 等待依赖模块加载\n     */\n  async waitForDependencies() {\n    const maxWaitTime = 5000; // 5秒超时\n    const startTime = Date.now();\n\n    while (Date.now() - startTime < maxWaitTime) {\n      if (typeof SessionManager !== 'undefined' &&\n                typeof InputValidator !== 'undefined' &&\n                typeof PasswordSecurity !== 'undefined' &&\n                typeof UIInteraction !== 'undefined' &&\n                typeof APIIntegration !== 'undefined') {\n        return;\n      }\n      await new Promise(resolve => setTimeout(resolve, 100));\n    }\n\n    throw new Error('Dependencies not loaded within timeout period');\n  }\n\n  /**\n     * 检查现有会话\n     */\n  async checkExistingSession() {\n    try {\n      const sessionData = this.sessionManager.getCurrentSession();\n      if (sessionData && sessionData.isValid) {\n        this.currentUser = sessionData.user;\n        this.uiInteraction.updateUIForLoggedInUser(this.currentUser);\n      }\n    } catch (error) {\n      console.warn('Failed to check existing session:', error);\n    }\n  }\n\n  /**\n     * 用户登录\n     */\n  async login(credentials) {\n    try {\n      // 验证输入\n      const validationResult = this.inputValidator.validateLoginCredentials(credentials);\n      if (!validationResult.isValid) {\n        throw new Error(validationResult.message);\n      }\n\n      // 显示加载状态\n      this.uiInteraction.showLoadingState('正在登录...');\n\n      // 调用API进行认证\n      const authResult = await this.apiIntegration.authenticate(credentials);\n\n      if (authResult.success) {\n        // 创建会话\n        await this.sessionManager.createSession(authResult.user, authResult.token);\n        this.currentUser = authResult.user;\n\n        // 更新UI\n        this.uiInteraction.updateUIForLoggedInUser(this.currentUser);\n        this.uiInteraction.showSuccessMessage('登录成功！');\n\n        return { success: true, user: this.currentUser };\n      }\n      throw new Error(authResult.message || '登录失败');\n\n\n    } catch (error) {\n      this.uiInteraction.showErrorMessage(error.message);\n      return { success: false, error: error.message };\n    } finally {\n      this.uiInteraction.hideLoadingState();\n    }\n  }\n\n  /**\n     * 用户注册\n     */\n  async register(userData) {\n    try {\n      // 验证输入\n      const validationResult = this.inputValidator.validateRegistrationForm(userData);\n      if (!validationResult.isValid) {\n        const errorMessage = validationResult.errors && validationResult.errors.length > 0 \n          ? validationResult.errors[0] \n          : '输入验证失败';\n        throw new Error(errorMessage);\n      }\n\n      // 验证密码强度\n      const passwordCheck = this.passwordSecurity.validatePasswordStrength(userData.password);\n      if (!passwordCheck.isValid) {\n        throw new Error(passwordCheck.message);\n      }\n\n      // 显示加载状态\n      this.uiInteraction.showLoadingState('正在注册...');\n\n      // 加密密码\n      const hashedPassword = await this.passwordSecurity.hashPassword(userData.password);\n      userData.password = hashedPassword;\n\n      // 调用API进行注册\n      const registerResult = await this.apiIntegration.register(userData);\n\n      if (registerResult.success) {\n        this.uiInteraction.showSuccessMessage('注册成功！请登录您的账户。');\n        return { success: true };\n      }\n      throw new Error(registerResult.message || '注册失败');\n\n\n    } catch (error) {\n      this.uiInteraction.showErrorMessage(error.message);\n      return { success: false, error: error.message };\n    } finally {\n      this.uiInteraction.hideLoadingState();\n    }\n  }\n\n  /**\n     * 用户登出\n     */\n  async logout() {\n    try {\n      // 调用API登出\n      await this.apiIntegration.logout();\n\n      // 清除会话\n      this.sessionManager.clearSession();\n      this.currentUser = null;\n\n      // 更新UI\n      this.uiInteraction.updateUIForLoggedOutUser();\n      this.uiInteraction.showSuccessMessage('已成功登出');\n\n      return { success: true };\n\n    } catch (error) {\n      console.error('Logout error:', error);\n      // 即使API调用失败，也要清除本地会话\n      this.sessionManager.clearSession();\n      this.currentUser = null;\n      this.uiInteraction.updateUIForLoggedOutUser();\n\n      return { success: true }; // 本地登出总是成功的\n    }\n  }\n\n  /**\n     * 修改密码\n     */\n  async changePassword(oldPassword, newPassword) {\n    try {\n      if (!this.currentUser) {\n        throw new Error('请先登录');\n      }\n\n      // 验证新密码强度\n      const passwordCheck = this.passwordSecurity.validatePasswordStrength(newPassword);\n      if (!passwordCheck.isValid) {\n        throw new Error(passwordCheck.message);\n      }\n\n      // 显示加载状态\n      this.uiInteraction.showLoadingState('正在修改密码...');\n\n      // 加密新密码\n      const hashedNewPassword = await this.passwordSecurity.hashPassword(newPassword);\n\n      // 调用API修改密码\n      const result = await this.apiIntegration.changePassword({\n        oldPassword,\n        newPassword: hashedNewPassword\n      });\n\n      if (result.success) {\n        this.uiInteraction.showSuccessMessage('密码修改成功！');\n        return { success: true };\n      }\n      throw new Error(result.message || '密码修改失败');\n\n\n    } catch (error) {\n      this.uiInteraction.showErrorMessage(error.message);\n      return { success: false, error: error.message };\n    } finally {\n      this.uiInteraction.hideLoadingState();\n    }\n  }\n\n  /**\n     * 获取当前用户信息\n     */\n  getCurrentUser() {\n    return this.currentUser;\n  }\n\n  /**\n     * 检查用户是否已登录\n     */\n  isLoggedIn() {\n    return this.currentUser !== null && this.sessionManager.isSessionValid();\n  }\n\n  /**\n     * 处理初始化错误\n     */\n  handleInitializationError(error) {\n    console.error('AuthManager initialization failed:', error);\n\n    // 显示用户友好的错误信息\n    if (typeof showNotification === 'function') {\n      showNotification('认证系统初始化失败，请刷新页面重试', 'error');\n    }\n\n    // 可以添加重试逻辑\n    setTimeout(() => {\n      if (!this.isInitialized) {\n        console.log('Retrying AuthManager initialization...');\n        this.init();\n      }\n    }, 3000);\n  }\n\n  /**\n     * 销毁认证管理器\n     */\n  destroy() {\n    if (this.sessionManager) {\n      this.sessionManager.destroy();\n    }\n\n    this.currentUser = null;\n    this.isInitialized = false;\n\n    console.log('AuthManager destroyed');\n  }\n}\n\n// 创建全局实例\nwindow.authManager = new AuthManager();\n\n// 导出供其他模块使用\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = AuthManager;\n}\n","usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\auth\\error-manager.js","messages":[{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":7,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":7,"endColumn":5,"fix":{"range":[86,90],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":8,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":8,"endColumn":9,"fix":{"range":[117,125],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":9,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":9,"endColumn":13,"fix":{"range":[141,153],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":10,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":10,"endColumn":13,"fix":{"range":[163,175],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":11,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":11,"endColumn":13,"fix":{"range":[232,244],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":12,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":12,"endColumn":13,"fix":{"range":[317,329],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":13,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":13,"endColumn":13,"fix":{"range":[388,400],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":14,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":14,"endColumn":13,"fix":{"range":[461,473],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":15,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":15,"endColumn":13,"fix":{"range":[474,486],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":16,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":16,"endColumn":13,"fix":{"range":[496,508],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":17,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":17,"endColumn":13,"fix":{"range":[574,586],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":18,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":18,"endColumn":13,"fix":{"range":[634,646],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":19,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":19,"endColumn":13,"fix":{"range":[647,659],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":20,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":20,"endColumn":13,"fix":{"range":[669,681],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":21,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":21,"endColumn":13,"fix":{"range":[729,741],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":22,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":22,"endColumn":13,"fix":{"range":[780,792],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":23,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":23,"endColumn":13,"fix":{"range":[849,861],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":24,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":24,"endColumn":13,"fix":{"range":[862,874],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":25,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":25,"endColumn":13,"fix":{"range":[884,896],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":26,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":26,"endColumn":13,"fix":{"range":[947,959],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":27,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":27,"endColumn":13,"fix":{"range":[1018,1030],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":28,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":28,"endColumn":13,"fix":{"range":[1031,1043],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":29,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":29,"endColumn":9,"fix":{"range":[1053,1061],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":30,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":30,"endColumn":9,"fix":{"range":[1064,1072],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":31,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":31,"endColumn":9,"fix":{"range":[1073,1081],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":32,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":32,"endColumn":9,"fix":{"range":[1091,1099],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":33,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":33,"endColumn":9,"fix":{"range":[1123,1131],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":34,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":34,"endColumn":9,"fix":{"range":[1132,1140],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":35,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":35,"endColumn":9,"fix":{"range":[1150,1158],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":36,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":36,"endColumn":13,"fix":{"range":[1178,1190],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":37,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":37,"endColumn":13,"fix":{"range":[1222,1234],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":38,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":38,"endColumn":13,"fix":{"range":[1260,1272],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":39,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":39,"endColumn":13,"fix":{"range":[1298,1310],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":40,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":40,"endColumn":13,"fix":{"range":[1338,1350],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":41,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":41,"endColumn":13,"fix":{"range":[1390,1402],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":42,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":42,"endColumn":13,"fix":{"range":[1440,1452],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":43,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":43,"endColumn":13,"fix":{"range":[1476,1488],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":44,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":44,"endColumn":13,"fix":{"range":[1508,1520],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":45,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":45,"endColumn":9,"fix":{"range":[1545,1553],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":46,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":46,"endColumn":9,"fix":{"range":[1556,1564],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":47,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":47,"endColumn":9,"fix":{"range":[1565,1573],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":48,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":48,"endColumn":9,"fix":{"range":[1583,1591],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":49,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":49,"endColumn":9,"fix":{"range":[1628,1636],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":50,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":50,"endColumn":9,"fix":{"range":[1637,1645],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":51,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":51,"endColumn":9,"fix":{"range":[1654,1662],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":52,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":52,"endColumn":9,"fix":{"range":[1695,1703],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":53,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":53,"endColumn":9,"fix":{"range":[1704,1712],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":54,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":54,"endColumn":9,"fix":{"range":[1721,1729],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":55,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":55,"endColumn":5,"fix":{"range":[1757,1761],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":56,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":56,"endColumn":5,"fix":{"range":[1763,1767],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":57,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":57,"endColumn":5,"fix":{"range":[1768,1772],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":60,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":60,"endColumn":5,"fix":{"range":[1800,1804],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":61,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":61,"endColumn":9,"fix":{"range":[1819,1827],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":62,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":62,"endColumn":13,"fix":{"range":[1833,1845],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":63,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":63,"endColumn":13,"fix":{"range":[1881,1893],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":64,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":64,"endColumn":13,"fix":{"range":[1894,1906],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":65,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":65,"endColumn":13,"fix":{"range":[1918,1930],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":66,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":66,"endColumn":13,"fix":{"range":[1963,1975],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":67,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":67,"endColumn":13,"fix":{"range":[1976,1988],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":68,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":68,"endColumn":13,"fix":{"range":[2001,2013],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":69,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":69,"endColumn":13,"fix":{"range":[2050,2062],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":70,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":70,"endColumn":13,"fix":{"range":[2063,2075],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":71,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":71,"endColumn":13,"fix":{"range":[2087,2099],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":72,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":72,"endColumn":13,"fix":{"range":[2130,2142],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":73,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":73,"endColumn":13,"fix":{"range":[2143,2155],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":74,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":74,"endColumn":13,"fix":{"range":[2165,2177],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":75,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":75,"endColumn":17,"fix":{"range":[2217,2233],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":76,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":76,"endColumn":13,"fix":{"range":[2261,2273],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":77,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":77,"endColumn":13,"fix":{"range":[2275,2287],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":78,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":78,"endColumn":13,"fix":{"range":[2288,2300],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":79,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":79,"endColumn":13,"fix":{"range":[2327,2339],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":80,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":80,"endColumn":13,"fix":{"range":[2375,2387],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":81,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":81,"endColumn":9,"fix":{"range":[2388,2396],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":82,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":82,"endColumn":13,"fix":{"range":[2414,2426],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":83,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":83,"endColumn":13,"fix":{"range":[2471,2483],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":84,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":84,"endColumn":9,"fix":{"range":[2496,2504],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":85,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":85,"endColumn":5,"fix":{"range":[2506,2510],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":86,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":86,"endColumn":5,"fix":{"range":[2512,2516],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":87,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":87,"endColumn":5,"fix":{"range":[2517,2521],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":90,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":90,"endColumn":5,"fix":{"range":[2549,2553],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":91,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":91,"endColumn":9,"fix":{"range":[2582,2590],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":92,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":92,"endColumn":9,"fix":{"range":[2609,2617],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":93,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":93,"endColumn":13,"fix":{"range":[2654,2666],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":94,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":94,"endColumn":17,"fix":{"range":[2725,2741],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":95,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":95,"endColumn":21,"fix":{"range":[2774,2794],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":96,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":96,"endColumn":21,"fix":{"range":[2830,2850],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":97,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":97,"endColumn":21,"fix":{"range":[2881,2901],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":98,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":98,"endColumn":17,"fix":{"range":[2920,2936],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":99,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":99,"endColumn":13,"fix":{"range":[2940,2952],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":100,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":100,"endColumn":13,"fix":{"range":[2956,2968],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":101,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":101,"endColumn":13,"fix":{"range":[2969,2981],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":102,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":102,"endColumn":13,"fix":{"range":[3001,3013],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":103,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":103,"endColumn":17,"fix":{"range":[3059,3075],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":104,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":104,"endColumn":21,"fix":{"range":[3107,3127],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":105,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":105,"endColumn":21,"fix":{"range":[3163,3183],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":106,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":106,"endColumn":21,"fix":{"range":[3208,3228],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":107,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":107,"endColumn":21,"fix":{"range":[3248,3268],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":108,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":108,"endColumn":21,"fix":{"range":[3294,3314],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":109,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":109,"endColumn":21,"fix":{"range":[3336,3356],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":110,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":110,"endColumn":17,"fix":{"range":[3375,3391],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":111,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":111,"endColumn":13,"fix":{"range":[3395,3407],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":112,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":112,"endColumn":9,"fix":{"range":[3411,3419],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":113,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":113,"endColumn":5,"fix":{"range":[3421,3425],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":114,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":114,"endColumn":5,"fix":{"range":[3427,3431],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":115,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":115,"endColumn":5,"fix":{"range":[3432,3436],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":118,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":118,"endColumn":5,"fix":{"range":[3465,3469],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":119,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":119,"endColumn":9,"fix":{"range":[3502,3510],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":120,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":120,"endColumn":9,"fix":{"range":[3522,3530],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":121,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":121,"endColumn":13,"fix":{"range":[3591,3603],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":122,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":122,"endColumn":13,"fix":{"range":[3621,3633],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":123,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":123,"endColumn":13,"fix":{"range":[3676,3688],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":124,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":124,"endColumn":13,"fix":{"range":[3719,3731],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":125,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":125,"endColumn":17,"fix":{"range":[3778,3794],"text":"        "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":126,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":126,"endColumn":17,"fix":{"range":[3876,3892],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":127,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":127,"endColumn":17,"fix":{"range":[3893,3909],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":128,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":128,"endColumn":17,"fix":{"range":[3919,3935],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":129,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":129,"endColumn":17,"fix":{"range":[4000,4016],"text":"        "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":130,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":130,"endColumn":17,"fix":{"range":[4041,4057],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":131,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":131,"endColumn":17,"fix":{"range":[4058,4074],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":132,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":132,"endColumn":17,"fix":{"range":[4084,4100],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":133,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":133,"endColumn":21,"fix":{"range":[4134,4154],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":134,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":134,"endColumn":17,"fix":{"range":[4182,4198],"text":"        "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":135,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":135,"endColumn":17,"fix":{"range":[4200,4216],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":136,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":136,"endColumn":17,"fix":{"range":[4217,4233],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":137,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":137,"endColumn":17,"fix":{"range":[4243,4259],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":138,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":138,"endColumn":21,"fix":{"range":[4288,4308],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":139,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":139,"endColumn":17,"fix":{"range":[4346,4362],"text":"        "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":140,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":140,"endColumn":17,"fix":{"range":[4364,4380],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":141,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":141,"endColumn":17,"fix":{"range":[4381,4397],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":142,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":142,"endColumn":13,"fix":{"range":[4411,4423],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":143,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":143,"endColumn":9,"fix":{"range":[4425,4433],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":144,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":144,"endColumn":9,"fix":{"range":[4437,4445],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":145,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":145,"endColumn":9,"fix":{"range":[4446,4454],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":146,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":146,"endColumn":9,"fix":{"range":[4466,4474],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":147,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":147,"endColumn":13,"fix":{"range":[4535,4547],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":148,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":148,"endColumn":13,"fix":{"range":[4565,4577],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":149,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":149,"endColumn":13,"fix":{"range":[4593,4605],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":150,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":150,"endColumn":13,"fix":{"range":[4617,4629],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":151,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":151,"endColumn":17,"fix":{"range":[4676,4692],"text":"        "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":152,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":152,"endColumn":17,"fix":{"range":[4744,4760],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":153,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":153,"endColumn":17,"fix":{"range":[4761,4777],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":154,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":154,"endColumn":21,"fix":{"range":[4798,4818],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":155,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":155,"endColumn":21,"fix":{"range":[4834,4854],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":156,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":156,"endColumn":25,"fix":{"range":[4860,4884],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":157,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":157,"endColumn":25,"fix":{"range":[4907,4931],"text":"            "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":158,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":158,"endColumn":25,"fix":{"range":[4954,4978],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":159,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":159,"endColumn":25,"fix":{"range":[4979,5003],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 14 spaces but found 28.","line":160,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":160,"endColumn":29,"fix":{"range":[5032,5060],"text":"              "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":161,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":161,"endColumn":25,"fix":{"range":[5098,5122],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":162,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":162,"endColumn":21,"fix":{"range":[5124,5144],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":163,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":163,"endColumn":25,"fix":{"range":[5169,5193],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":164,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":164,"endColumn":21,"fix":{"range":[5245,5265],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":165,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":165,"endColumn":17,"fix":{"range":[5267,5283],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":166,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":166,"endColumn":21,"fix":{"range":[5292,5312],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":167,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":167,"endColumn":21,"fix":{"range":[5328,5348],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":168,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":168,"endColumn":25,"fix":{"range":[5354,5378],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 14 spaces but found 28.","line":169,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":169,"endColumn":29,"fix":{"range":[5410,5438],"text":"              "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":170,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":170,"endColumn":25,"fix":{"range":[5479,5503],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":171,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":171,"endColumn":21,"fix":{"range":[5505,5525],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":172,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":172,"endColumn":25,"fix":{"range":[5551,5575],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":173,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":173,"endColumn":21,"fix":{"range":[5628,5648],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":174,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":174,"endColumn":17,"fix":{"range":[5650,5666],"text":"        "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":175,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":175,"endColumn":17,"fix":{"range":[5668,5684],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":176,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":176,"endColumn":17,"fix":{"range":[5685,5701],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":177,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":177,"endColumn":13,"fix":{"range":[5715,5727],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":178,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":178,"endColumn":9,"fix":{"range":[5729,5737],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":179,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":179,"endColumn":9,"fix":{"range":[5741,5749],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":180,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":180,"endColumn":9,"fix":{"range":[5750,5758],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":181,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":181,"endColumn":9,"fix":{"range":[5770,5778],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":182,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":182,"endColumn":13,"fix":{"range":[5842,5854],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":183,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":183,"endColumn":13,"fix":{"range":[5872,5884],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":184,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":184,"endColumn":13,"fix":{"range":[5900,5912],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":185,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":185,"endColumn":13,"fix":{"range":[5922,5934],"text":"      "}},{"ruleId":"no-unused-vars","severity":2,"message":"'attempt' is defined but never used. Allowed unused args must match /^_/u.","line":185,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":185,"endColumn":53},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":186,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":186,"endColumn":17,"fix":{"range":[5981,5997],"text":"        "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":187,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":187,"endColumn":17,"fix":{"range":[6034,6050],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":188,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":188,"endColumn":17,"fix":{"range":[6051,6067],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":189,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":189,"endColumn":17,"fix":{"range":[6084,6100],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":190,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":190,"endColumn":21,"fix":{"range":[6141,6161],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":191,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":191,"endColumn":17,"fix":{"range":[6205,6221],"text":"        "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":192,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":192,"endColumn":17,"fix":{"range":[6223,6239],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":193,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":193,"endColumn":17,"fix":{"range":[6240,6256],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":194,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":194,"endColumn":17,"fix":{"range":[6267,6283],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":195,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":195,"endColumn":21,"fix":{"range":[6343,6363],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":196,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":196,"endColumn":21,"fix":{"range":[6434,6454],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":197,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":197,"endColumn":25,"fix":{"range":[6467,6491],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":198,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":198,"endColumn":25,"fix":{"range":[6506,6530],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":199,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":199,"endColumn":21,"fix":{"range":[6560,6580],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":200,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":200,"endColumn":17,"fix":{"range":[6582,6598],"text":"        "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":201,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":201,"endColumn":17,"fix":{"range":[6600,6616],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":202,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":202,"endColumn":17,"fix":{"range":[6617,6633],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":203,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":203,"endColumn":13,"fix":{"range":[6669,6681],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":204,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":204,"endColumn":9,"fix":{"range":[6683,6691],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":205,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":205,"endColumn":5,"fix":{"range":[6695,6699],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":206,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":206,"endColumn":5,"fix":{"range":[6701,6705],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":207,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":207,"endColumn":5,"fix":{"range":[6706,6710],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":210,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":210,"endColumn":5,"fix":{"range":[6734,6738],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":211,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":211,"endColumn":9,"fix":{"range":[6779,6787],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":212,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":212,"endColumn":13,"fix":{"range":[6793,6805],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":213,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":213,"endColumn":13,"fix":{"range":[6861,6873],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":214,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":214,"endColumn":13,"fix":{"range":[6874,6886],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":215,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":215,"endColumn":13,"fix":{"range":[6894,6906],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":216,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":216,"endColumn":17,"fix":{"range":[6944,6960],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":217,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":217,"endColumn":13,"fix":{"range":[6986,6998],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":218,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":218,"endColumn":13,"fix":{"range":[7000,7012],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":219,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":219,"endColumn":13,"fix":{"range":[7013,7025],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":220,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":220,"endColumn":13,"fix":{"range":[7036,7048],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":221,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":221,"endColumn":13,"fix":{"range":[7083,7095],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":222,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":222,"endColumn":13,"fix":{"range":[7096,7108],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":223,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":223,"endColumn":13,"fix":{"range":[7119,7131],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":224,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":224,"endColumn":13,"fix":{"range":[7169,7181],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":225,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":225,"endColumn":13,"fix":{"range":[7182,7194],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":226,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":226,"endColumn":13,"fix":{"range":[7204,7216],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":227,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":227,"endColumn":17,"fix":{"range":[7288,7304],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":228,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":228,"endColumn":17,"fix":{"range":[7361,7377],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":229,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":229,"endColumn":21,"fix":{"range":[7394,7414],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":230,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":230,"endColumn":21,"fix":{"range":[7451,7471],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":231,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":231,"endColumn":17,"fix":{"range":[7510,7526],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":232,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":232,"endColumn":13,"fix":{"range":[7528,7540],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":233,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":233,"endColumn":13,"fix":{"range":[7542,7554],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":234,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":234,"endColumn":13,"fix":{"range":[7555,7567],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":235,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":235,"endColumn":13,"fix":{"range":[7582,7594],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":236,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":236,"endColumn":17,"fix":{"range":[7677,7693],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":237,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":237,"endColumn":13,"fix":{"range":[7741,7753],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":238,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":238,"endColumn":13,"fix":{"range":[7755,7767],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":239,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":239,"endColumn":13,"fix":{"range":[7768,7780],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":240,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":240,"endColumn":13,"fix":{"range":[7820,7832],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":241,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":241,"endColumn":9,"fix":{"range":[7833,7841],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":242,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":242,"endColumn":13,"fix":{"range":[7867,7879],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":243,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":243,"endColumn":13,"fix":{"range":[7938,7950],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":244,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":244,"endColumn":9,"fix":{"range":[7996,8004],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":245,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":245,"endColumn":5,"fix":{"range":[8006,8010],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":246,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":246,"endColumn":5,"fix":{"range":[8012,8016],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":247,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":247,"endColumn":5,"fix":{"range":[8017,8021],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":250,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":250,"endColumn":5,"fix":{"range":[8049,8053],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":251,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":251,"endColumn":9,"fix":{"range":[8092,8100],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":252,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":252,"endColumn":13,"fix":{"range":[8120,8132],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":253,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":253,"endColumn":13,"fix":{"range":[8160,8172],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":254,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":254,"endColumn":13,"fix":{"range":[8209,8221],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":255,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":255,"endColumn":13,"fix":{"range":[8272,8284],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":256,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":256,"endColumn":13,"fix":{"range":[8328,8340],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":257,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":257,"endColumn":13,"fix":{"range":[8360,8372],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":258,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":258,"endColumn":13,"fix":{"range":[8411,8423],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":259,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":259,"endColumn":13,"fix":{"range":[8462,8474],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":260,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":260,"endColumn":13,"fix":{"range":[8518,8530],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":261,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":261,"endColumn":13,"fix":{"range":[8609,8621],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":262,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":262,"endColumn":13,"fix":{"range":[8692,8704],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":263,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":263,"endColumn":13,"fix":{"range":[8736,8748],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":264,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":264,"endColumn":13,"fix":{"range":[8786,8798],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":265,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":265,"endColumn":9,"fix":{"range":[8843,8851],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":266,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":266,"endColumn":9,"fix":{"range":[8854,8862],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":267,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":267,"endColumn":9,"fix":{"range":[8863,8871],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":268,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":268,"endColumn":9,"fix":{"range":[8883,8891],"text":"    "}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":268,"column":31,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":268,"endColumn":69,"fix":{"range":[8913,8951],"text":"{errorInfo.filename = options.filename;}"}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":269,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":269,"endColumn":9,"fix":{"range":[8952,8960],"text":"    "}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":269,"column":29,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":269,"endColumn":63,"fix":{"range":[8980,9014],"text":"{errorInfo.lineno = options.lineno;}"}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":270,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":270,"endColumn":9,"fix":{"range":[9015,9023],"text":"    "}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":270,"column":28,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":270,"endColumn":60,"fix":{"range":[9042,9074],"text":"{errorInfo.colno = options.colno;}"}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":271,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":271,"endColumn":9,"fix":{"range":[9075,9083],"text":"    "}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":271,"column":32,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":271,"endColumn":72,"fix":{"range":[9106,9146],"text":"{errorInfo.fieldName = options.fieldName;}"}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":272,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":272,"endColumn":9,"fix":{"range":[9147,9155],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":273,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":273,"endColumn":9,"fix":{"range":[9156,9164],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":274,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":274,"endColumn":5,"fix":{"range":[9182,9186],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":275,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":275,"endColumn":5,"fix":{"range":[9188,9192],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":276,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":276,"endColumn":5,"fix":{"range":[9193,9197],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":279,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":279,"endColumn":5,"fix":{"range":[9223,9227],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":280,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":280,"endColumn":9,"fix":{"range":[9252,9260],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":281,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":281,"endColumn":9,"fix":{"range":[9312,9320],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":282,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":282,"endColumn":9,"fix":{"range":[9366,9374],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":283,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":283,"endColumn":9,"fix":{"range":[9375,9383],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":284,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":284,"endColumn":13,"fix":{"range":[9480,9492],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":285,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":285,"endColumn":9,"fix":{"range":[9530,9538],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":286,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":286,"endColumn":9,"fix":{"range":[9540,9548],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":287,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":287,"endColumn":9,"fix":{"range":[9549,9557],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":288,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":288,"endColumn":13,"fix":{"range":[9660,9672],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":289,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":289,"endColumn":9,"fix":{"range":[9710,9718],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":290,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":290,"endColumn":9,"fix":{"range":[9720,9728],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":291,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":291,"endColumn":9,"fix":{"range":[9729,9737],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":292,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":292,"endColumn":13,"fix":{"range":[9806,9818],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":293,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":293,"endColumn":9,"fix":{"range":[9859,9867],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":294,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":294,"endColumn":9,"fix":{"range":[9869,9877],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":295,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":295,"endColumn":9,"fix":{"range":[9878,9886],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":296,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":296,"endColumn":13,"fix":{"range":[9964,9976],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":297,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":297,"endColumn":9,"fix":{"range":[10021,10029],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":298,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":298,"endColumn":9,"fix":{"range":[10031,10039],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":299,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":299,"endColumn":9,"fix":{"range":[10040,10048],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":300,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":300,"endColumn":13,"fix":{"range":[10119,10131],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":301,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":301,"endColumn":9,"fix":{"range":[10175,10183],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":302,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":302,"endColumn":9,"fix":{"range":[10185,10193],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":303,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":303,"endColumn":9,"fix":{"range":[10194,10202],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":304,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":304,"endColumn":13,"fix":{"range":[10293,10305],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":305,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":305,"endColumn":9,"fix":{"range":[10344,10352],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":306,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":306,"endColumn":9,"fix":{"range":[10354,10362],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":307,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":307,"endColumn":9,"fix":{"range":[10363,10371],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":308,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":308,"endColumn":5,"fix":{"range":[10409,10413],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":309,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":309,"endColumn":5,"fix":{"range":[10415,10419],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":310,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":310,"endColumn":5,"fix":{"range":[10420,10424],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":313,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":313,"endColumn":5,"fix":{"range":[10450,10454],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":314,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":314,"endColumn":9,"fix":{"range":[10489,10497],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":315,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":315,"endColumn":9,"fix":{"range":[10559,10567],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":316,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":316,"endColumn":9,"fix":{"range":[10568,10576],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":317,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":317,"endColumn":13,"fix":{"range":[10617,10629],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":318,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":318,"endColumn":13,"fix":{"range":[10690,10702],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":319,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":319,"endColumn":9,"fix":{"range":[10716,10724],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":320,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":320,"endColumn":9,"fix":{"range":[10726,10734],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":321,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":321,"endColumn":9,"fix":{"range":[10735,10743],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":322,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":322,"endColumn":13,"fix":{"range":[10811,10823],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":323,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":323,"endColumn":17,"fix":{"range":[10829,10845],"text":"        "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":324,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":324,"endColumn":17,"fix":{"range":[10917,10933],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":325,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":325,"endColumn":17,"fix":{"range":[10934,10950],"text":"        "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":326,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":326,"endColumn":17,"fix":{"range":[11029,11045],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":327,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":327,"endColumn":17,"fix":{"range":[11046,11062],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":328,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":328,"endColumn":21,"fix":{"range":[11076,11096],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":329,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":329,"endColumn":21,"fix":{"range":[11133,11153],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":330,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":330,"endColumn":17,"fix":{"range":[11166,11182],"text":"        "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":331,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":331,"endColumn":17,"fix":{"range":[11184,11200],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":332,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":332,"endColumn":13,"fix":{"range":[11201,11213],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":333,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":333,"endColumn":17,"fix":{"range":[11239,11255],"text":"        "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":334,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":334,"endColumn":17,"fix":{"range":[11320,11336],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":335,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":335,"endColumn":17,"fix":{"range":[11337,11353],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":336,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":336,"endColumn":21,"fix":{"range":[11393,11413],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":337,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":337,"endColumn":21,"fix":{"range":[11456,11476],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":338,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":338,"endColumn":17,"fix":{"range":[11490,11506],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":339,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":339,"endColumn":13,"fix":{"range":[11508,11520],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":340,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":340,"endColumn":9,"fix":{"range":[11522,11530],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":341,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":341,"endColumn":9,"fix":{"range":[11532,11540],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":342,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":342,"endColumn":9,"fix":{"range":[11541,11549],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":343,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":343,"endColumn":5,"fix":{"range":[11563,11567],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":344,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":344,"endColumn":5,"fix":{"range":[11569,11573],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":345,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":345,"endColumn":5,"fix":{"range":[11574,11578],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":348,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":348,"endColumn":5,"fix":{"range":[11609,11613],"text":"  "}},{"ruleId":"no-unused-vars","severity":2,"message":"'options' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":348,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":348,"endColumn":45},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":349,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":349,"endColumn":9,"fix":{"range":[11662,11670],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":350,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":350,"endColumn":9,"fix":{"range":[11730,11738],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":351,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":351,"endColumn":9,"fix":{"range":[11739,11747],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":352,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":352,"endColumn":13,"fix":{"range":[11817,11829],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":353,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":353,"endColumn":9,"fix":{"range":[11883,11891],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":354,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":354,"endColumn":9,"fix":{"range":[11893,11901],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":355,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":355,"endColumn":9,"fix":{"range":[11902,11910],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":356,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":356,"endColumn":9,"fix":{"range":[11925,11933],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":357,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":357,"endColumn":13,"fix":{"range":[11970,11982],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":358,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":358,"endColumn":17,"fix":{"range":[12034,12050],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":359,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":359,"endColumn":21,"fix":{"range":[12060,12080],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":360,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":360,"endColumn":21,"fix":{"range":[12102,12122],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":361,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":361,"endColumn":21,"fix":{"range":[12152,12172],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":362,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":362,"endColumn":21,"fix":{"range":[12194,12214],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":363,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":363,"endColumn":17,"fix":{"range":[12236,12252],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":364,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":364,"endColumn":13,"fix":{"range":[12254,12266],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":365,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":365,"endColumn":9,"fix":{"range":[12271,12279],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":366,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":366,"endColumn":5,"fix":{"range":[12281,12285],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":367,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":367,"endColumn":5,"fix":{"range":[12287,12291],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":368,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":368,"endColumn":5,"fix":{"range":[12292,12296],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":371,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":371,"endColumn":5,"fix":{"range":[12327,12331],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":372,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":372,"endColumn":9,"fix":{"range":[12367,12375],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":373,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":373,"endColumn":13,"fix":{"range":[12399,12411],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":374,"column":1,"nodeType":"String","messageId":"wrongIndentation","endLine":374,"endColumn":17,"fix":{"range":[12449,12465],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":375,"column":1,"nodeType":"String","messageId":"wrongIndentation","endLine":375,"endColumn":17,"fix":{"range":[12514,12530],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":376,"column":1,"nodeType":"String","messageId":"wrongIndentation","endLine":376,"endColumn":17,"fix":{"range":[12561,12577],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":377,"column":1,"nodeType":"String","messageId":"wrongIndentation","endLine":377,"endColumn":17,"fix":{"range":[12625,12641],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":378,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":378,"endColumn":13,"fix":{"range":[12670,12682],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":379,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":379,"endColumn":13,"fix":{"range":[12685,12697],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":380,"column":1,"nodeType":"String","messageId":"wrongIndentation","endLine":380,"endColumn":17,"fix":{"range":[12732,12748],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":381,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":381,"endColumn":13,"fix":{"range":[12781,12793],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":382,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":382,"endColumn":13,"fix":{"range":[12796,12808],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":383,"column":1,"nodeType":"String","messageId":"wrongIndentation","endLine":383,"endColumn":17,"fix":{"range":[12843,12859],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":384,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":384,"endColumn":13,"fix":{"range":[12891,12903],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":385,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":385,"endColumn":13,"fix":{"range":[12906,12918],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":386,"column":1,"nodeType":"String","messageId":"wrongIndentation","endLine":386,"endColumn":17,"fix":{"range":[12960,12976],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":387,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":387,"endColumn":13,"fix":{"range":[13002,13014],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":388,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":388,"endColumn":13,"fix":{"range":[13017,13029],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":389,"column":1,"nodeType":"String","messageId":"wrongIndentation","endLine":389,"endColumn":17,"fix":{"range":[13070,13086],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":390,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":390,"endColumn":13,"fix":{"range":[13110,13122],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":391,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":391,"endColumn":13,"fix":{"range":[13125,13137],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":392,"column":1,"nodeType":"String","messageId":"wrongIndentation","endLine":392,"endColumn":17,"fix":{"range":[13173,13189],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":393,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":393,"endColumn":13,"fix":{"range":[13219,13231],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":394,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":394,"endColumn":13,"fix":{"range":[13234,13246],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":395,"column":1,"nodeType":"String","messageId":"wrongIndentation","endLine":395,"endColumn":17,"fix":{"range":[13280,13296],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":396,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":396,"endColumn":13,"fix":{"range":[13322,13334],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":397,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":397,"endColumn":13,"fix":{"range":[13337,13349],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":398,"column":1,"nodeType":"String","messageId":"wrongIndentation","endLine":398,"endColumn":17,"fix":{"range":[13381,13397],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":399,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":399,"endColumn":13,"fix":{"range":[13423,13435],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":400,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":400,"endColumn":13,"fix":{"range":[13438,13450],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":401,"column":1,"nodeType":"String","messageId":"wrongIndentation","endLine":401,"endColumn":17,"fix":{"range":[13485,13501],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":402,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":402,"endColumn":13,"fix":{"range":[13529,13541],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":403,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":403,"endColumn":9,"fix":{"range":[13543,13551],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":404,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":404,"endColumn":9,"fix":{"range":[13554,13562],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":405,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":405,"endColumn":9,"fix":{"range":[13563,13571],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":406,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":406,"endColumn":9,"fix":{"range":[13671,13679],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":407,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":407,"endColumn":9,"fix":{"range":[13680,13688],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":408,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":408,"endColumn":9,"fix":{"range":[13705,13713],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":409,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":409,"endColumn":13,"fix":{"range":[13777,13789],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":410,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":410,"endColumn":9,"fix":{"range":[13831,13839],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":411,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":411,"endColumn":9,"fix":{"range":[13841,13849],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":412,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":412,"endColumn":9,"fix":{"range":[13850,13858],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":413,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":413,"endColumn":9,"fix":{"range":[13875,13883],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":414,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":414,"endColumn":9,"fix":{"range":[13932,13940],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":415,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":415,"endColumn":13,"fix":{"range":[13999,14011],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":416,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":416,"endColumn":17,"fix":{"range":[14061,14077],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":417,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":417,"endColumn":13,"fix":{"range":[14091,14103],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":418,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":418,"endColumn":9,"fix":{"range":[14105,14113],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":419,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":419,"endColumn":9,"fix":{"range":[14115,14123],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":420,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":420,"endColumn":9,"fix":{"range":[14124,14132],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":421,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":421,"endColumn":5,"fix":{"range":[14161,14165],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":422,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":422,"endColumn":5,"fix":{"range":[14167,14171],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":423,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":423,"endColumn":5,"fix":{"range":[14172,14176],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":426,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":426,"endColumn":5,"fix":{"range":[14202,14206],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":427,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":427,"endColumn":9,"fix":{"range":[14252,14260],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":428,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":428,"endColumn":9,"fix":{"range":[14272,14280],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":429,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":429,"endColumn":9,"fix":{"range":[14325,14333],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":430,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":430,"endColumn":9,"fix":{"range":[14390,14398],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":431,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":431,"endColumn":9,"fix":{"range":[14427,14435],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":432,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":432,"endColumn":9,"fix":{"range":[14436,14444],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":433,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":433,"endColumn":9,"fix":{"range":[14452,14460],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":447,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":447,"endColumn":9,"fix":{"range":[14925,14933],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":448,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":448,"endColumn":9,"fix":{"range":[14934,14942],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":449,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":449,"endColumn":9,"fix":{"range":[14952,14960],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":450,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":450,"endColumn":13,"fix":{"range":[15014,15026],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":451,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":451,"endColumn":13,"fix":{"range":[15073,15085],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":452,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":452,"endColumn":13,"fix":{"range":[15118,15130],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":462,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":462,"endColumn":13,"fix":{"range":[15548,15560],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":463,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":463,"endColumn":9,"fix":{"range":[15594,15602],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":464,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":464,"endColumn":9,"fix":{"range":[15604,15612],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":465,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":465,"endColumn":9,"fix":{"range":[15613,15621],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":466,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":466,"endColumn":9,"fix":{"range":[15630,15638],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":467,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":467,"endColumn":9,"fix":{"range":[15672,15680],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":468,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":468,"endColumn":9,"fix":{"range":[15681,15689],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":469,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":469,"endColumn":9,"fix":{"range":[15697,15705],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":470,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":470,"endColumn":13,"fix":{"range":[15724,15736],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":471,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":471,"endColumn":13,"fix":{"range":[15785,15797],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":472,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":472,"endColumn":17,"fix":{"range":[15816,15832],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":473,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":473,"endColumn":21,"fix":{"range":[15856,15876],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":474,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":474,"endColumn":17,"fix":{"range":[15913,15929],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":475,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":475,"endColumn":13,"fix":{"range":[15931,15943],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":476,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":476,"endColumn":9,"fix":{"range":[15952,15960],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":477,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":477,"endColumn":5,"fix":{"range":[15998,16002],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":478,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":478,"endColumn":5,"fix":{"range":[16004,16008],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":479,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":479,"endColumn":5,"fix":{"range":[16009,16013],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":482,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":482,"endColumn":5,"fix":{"range":[16037,16041],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":483,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":483,"endColumn":9,"fix":{"range":[16063,16071],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":484,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":484,"endColumn":9,"fix":{"range":[16110,16118],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":485,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":485,"endColumn":9,"fix":{"range":[16181,16189],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":486,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":486,"endColumn":9,"fix":{"range":[16190,16198],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 12.","line":487,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":487,"endColumn":13,"fix":{"range":[16228,16240],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 16.","line":488,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":488,"endColumn":17,"fix":{"range":[16254,16270],"text":"      "}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":488,"column":43,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":488,"endColumn":80,"fix":{"range":[16296,16333],"text":"{console.debug(logMessage, errorInfo);}"}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 16.","line":489,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":489,"endColumn":17,"fix":{"range":[16334,16350],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 12.","line":490,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":490,"endColumn":13,"fix":{"range":[16357,16369],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 16.","line":491,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":491,"endColumn":17,"fix":{"range":[16382,16398],"text":"      "}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":491,"column":59,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":491,"endColumn":95,"fix":{"range":[16440,16476],"text":"{console.info(logMessage, errorInfo);}"}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 16.","line":492,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":492,"endColumn":17,"fix":{"range":[16477,16493],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 12.","line":493,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":493,"endColumn":13,"fix":{"range":[16500,16512],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 16.","line":494,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":494,"endColumn":17,"fix":{"range":[16525,16541],"text":"      "}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":494,"column":67,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":494,"endColumn":103,"fix":{"range":[16591,16627],"text":"{console.warn(logMessage, errorInfo);}"}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 16.","line":495,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":495,"endColumn":17,"fix":{"range":[16628,16644],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 12.","line":496,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":496,"endColumn":13,"fix":{"range":[16651,16663],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 12.","line":497,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":497,"endColumn":13,"fix":{"range":[16677,16689],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 16.","line":498,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":498,"endColumn":17,"fix":{"range":[16698,16714],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 16.","line":499,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":499,"endColumn":17,"fix":{"range":[16752,16768],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":500,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":500,"endColumn":9,"fix":{"range":[16775,16783],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":501,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":501,"endColumn":5,"fix":{"range":[16785,16789],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":502,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":502,"endColumn":5,"fix":{"range":[16791,16795],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":503,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":503,"endColumn":5,"fix":{"range":[16796,16800],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":506,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":506,"endColumn":5,"fix":{"range":[16827,16831],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":507,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":507,"endColumn":9,"fix":{"range":[16862,16870],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":508,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":508,"endColumn":9,"fix":{"range":[16908,16916],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":509,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":509,"endColumn":9,"fix":{"range":[16917,16925],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":510,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":510,"endColumn":9,"fix":{"range":[16939,16947],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":511,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":511,"endColumn":13,"fix":{"range":[17009,17021],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":512,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":512,"endColumn":9,"fix":{"range":[17098,17106],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":513,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":513,"endColumn":9,"fix":{"range":[17108,17116],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":514,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":514,"endColumn":9,"fix":{"range":[17117,17125],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":515,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":515,"endColumn":9,"fix":{"range":[17136,17144],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":516,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":516,"endColumn":5,"fix":{"range":[17169,17173],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":517,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":517,"endColumn":5,"fix":{"range":[17175,17179],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":518,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":518,"endColumn":5,"fix":{"range":[17180,17184],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":521,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":521,"endColumn":5,"fix":{"range":[17212,17216],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":522,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":522,"endColumn":9,"fix":{"range":[17243,17251],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":523,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":523,"endColumn":13,"fix":{"range":[17257,17269],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":524,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":524,"endColumn":13,"fix":{"range":[17323,17335],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":525,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":525,"endColumn":17,"fix":{"range":[17349,17365],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":526,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":526,"endColumn":13,"fix":{"range":[17405,17417],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":527,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":527,"endColumn":9,"fix":{"range":[17419,17427],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":528,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":528,"endColumn":13,"fix":{"range":[17445,17457],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":529,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":529,"endColumn":13,"fix":{"range":[17504,17516],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":530,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":530,"endColumn":9,"fix":{"range":[17540,17548],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":531,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":531,"endColumn":5,"fix":{"range":[17550,17554],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":532,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":532,"endColumn":5,"fix":{"range":[17556,17560],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":533,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":533,"endColumn":5,"fix":{"range":[17561,17565],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":536,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":536,"endColumn":5,"fix":{"range":[17593,17597],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":537,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":537,"endColumn":9,"fix":{"range":[17618,17626],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":538,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":538,"endColumn":13,"fix":{"range":[17632,17644],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":539,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":539,"endColumn":9,"fix":{"range":[17718,17726],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":540,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":540,"endColumn":13,"fix":{"range":[17744,17756],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":541,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":541,"endColumn":9,"fix":{"range":[17803,17811],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":542,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":542,"endColumn":5,"fix":{"range":[17813,17817],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":543,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":543,"endColumn":5,"fix":{"range":[17819,17823],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":544,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":544,"endColumn":5,"fix":{"range":[17824,17828],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":547,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":547,"endColumn":5,"fix":{"range":[17854,17858],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":548,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":548,"endColumn":9,"fix":{"range":[17882,17890],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":549,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":549,"endColumn":9,"fix":{"range":[17909,17917],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":550,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":550,"endColumn":5,"fix":{"range":[17957,17961],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":551,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":551,"endColumn":5,"fix":{"range":[17963,17967],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":552,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":552,"endColumn":5,"fix":{"range":[17968,17972],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":555,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":555,"endColumn":5,"fix":{"range":[17998,18002],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":556,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":556,"endColumn":9,"fix":{"range":[18021,18029],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":557,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":557,"endColumn":13,"fix":{"range":[18035,18047],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":558,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":558,"endColumn":13,"fix":{"range":[18060,18072],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":559,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":559,"endColumn":13,"fix":{"range":[18097,18109],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":560,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":560,"endColumn":17,"fix":{"range":[18157,18173],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":561,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":561,"endColumn":17,"fix":{"range":[18206,18222],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":562,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":562,"endColumn":21,"fix":{"range":[18290,18310],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":563,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":563,"endColumn":17,"fix":{"range":[18334,18350],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":564,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":564,"endColumn":13,"fix":{"range":[18352,18364],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":565,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":565,"endColumn":13,"fix":{"range":[18366,18378],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":566,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":566,"endColumn":13,"fix":{"range":[18379,18391],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":567,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":567,"endColumn":13,"fix":{"range":[18450,18462],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":568,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":568,"endColumn":13,"fix":{"range":[18526,18538],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":569,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":569,"endColumn":9,"fix":{"range":[18539,18547],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":570,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":570,"endColumn":13,"fix":{"range":[18565,18577],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":571,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":571,"endColumn":9,"fix":{"range":[18622,18630],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":572,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":572,"endColumn":5,"fix":{"range":[18632,18636],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":573,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":573,"endColumn":5,"fix":{"range":[18638,18642],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":574,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":574,"endColumn":5,"fix":{"range":[18643,18647],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":577,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":577,"endColumn":5,"fix":{"range":[18674,18678],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":578,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":578,"endColumn":9,"fix":{"range":[18707,18715],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":579,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":579,"endColumn":5,"fix":{"range":[18750,18754],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":580,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":580,"endColumn":5,"fix":{"range":[18756,18760],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":581,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":581,"endColumn":5,"fix":{"range":[18761,18765],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":584,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":584,"endColumn":5,"fix":{"range":[18792,18796],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":585,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":585,"endColumn":9,"fix":{"range":[18828,18836],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":586,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":586,"endColumn":5,"fix":{"range":[18874,18878],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":587,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":587,"endColumn":5,"fix":{"range":[18880,18884],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":588,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":588,"endColumn":5,"fix":{"range":[18885,18889],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":591,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":591,"endColumn":5,"fix":{"range":[18916,18920],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":592,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":592,"endColumn":9,"fix":{"range":[18954,18962],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":593,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":593,"endColumn":13,"fix":{"range":[19004,19016],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":594,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":594,"endColumn":17,"fix":{"range":[19022,19038],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":595,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":595,"endColumn":13,"fix":{"range":[19059,19071],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":596,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":596,"endColumn":17,"fix":{"range":[19089,19105],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":597,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":597,"endColumn":13,"fix":{"range":[19153,19165],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":598,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":598,"endColumn":9,"fix":{"range":[19167,19175],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":599,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":599,"endColumn":5,"fix":{"range":[19179,19183],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":600,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":600,"endColumn":5,"fix":{"range":[19185,19189],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":601,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":601,"endColumn":5,"fix":{"range":[19190,19194],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":604,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":604,"endColumn":5,"fix":{"range":[19220,19224],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":605,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":605,"endColumn":9,"fix":{"range":[19242,19250],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":606,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":606,"endColumn":13,"fix":{"range":[19266,19278],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":607,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":607,"endColumn":13,"fix":{"range":[19311,19323],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":608,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":608,"endColumn":13,"fix":{"range":[19335,19347],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":609,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":609,"endColumn":13,"fix":{"range":[19363,19375],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":610,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":610,"endColumn":9,"fix":{"range":[19414,19422],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":611,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":611,"endColumn":9,"fix":{"range":[19425,19433],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":612,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":612,"endColumn":9,"fix":{"range":[19434,19442],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":613,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":613,"endColumn":13,"fix":{"range":[19479,19491],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":614,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":614,"endColumn":13,"fix":{"range":[19555,19567],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":615,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":615,"endColumn":9,"fix":{"range":[19647,19655],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":616,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":616,"endColumn":9,"fix":{"range":[19659,19667],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":617,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":617,"endColumn":9,"fix":{"range":[19668,19676],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":618,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":618,"endColumn":5,"fix":{"range":[19690,19694],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":619,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":619,"endColumn":5,"fix":{"range":[19696,19700],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":620,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":620,"endColumn":5,"fix":{"range":[19701,19705],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":623,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":623,"endColumn":5,"fix":{"range":[19731,19735],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":624,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":624,"endColumn":9,"fix":{"range":[19757,19765],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":625,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":625,"endColumn":9,"fix":{"range":[19789,19797],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":626,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":626,"endColumn":5,"fix":{"range":[19822,19826],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":627,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":627,"endColumn":5,"fix":{"range":[19828,19832],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":628,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":628,"endColumn":5,"fix":{"range":[19833,19837],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":631,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":631,"endColumn":5,"fix":{"range":[19863,19867],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":632,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":632,"endColumn":9,"fix":{"range":[19887,19895],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":633,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":633,"endColumn":5,"fix":{"range":[19968,19972],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":634,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":634,"endColumn":5,"fix":{"range":[19974,19978],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":635,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":635,"endColumn":5,"fix":{"range":[19979,19983],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":638,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":638,"endColumn":5,"fix":{"range":[20007,20011],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":639,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":639,"endColumn":9,"fix":{"range":[20023,20031],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":640,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":640,"endColumn":5,"fix":{"range":[20087,20091],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":641,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":641,"endColumn":5,"fix":{"range":[20093,20097],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":642,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":642,"endColumn":5,"fix":{"range":[20098,20102],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":645,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":645,"endColumn":5,"fix":{"range":[20129,20133],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":646,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":646,"endColumn":9,"fix":{"range":[20145,20153],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":647,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":647,"endColumn":9,"fix":{"range":[20182,20190],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":648,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":648,"endColumn":9,"fix":{"range":[20223,20231],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":649,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":649,"endColumn":5,"fix":{"range":[20259,20263],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":654,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":654,"endColumn":5,"fix":{"range":[20342,20346],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":656,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":656,"endColumn":5,"fix":{"range":[20421,20425],"text":"  "}},{"ruleId":"eol-last","severity":2,"message":"Newline required at end of file but not found.","line":657,"column":2,"nodeType":"Program","messageId":"missing","fix":{"range":[20462,20462],"text":"\n"}}],"suppressedMessages":[],"errorCount":585,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":583,"fixableWarningCount":0,"source":"/**\n * ErrorManager - 错误处理管理器\n * 提供统一的错误处理、用户友好的错误信息和错误恢复机制\n */\n\nclass ErrorManager {\n    constructor(config = {}) {\n        this.config = {\n            // 错误处理配置\n            enableErrorLogging: config.enableErrorLogging !== false,\n            enableUserFriendlyMessages: config.enableUserFriendlyMessages !== false,\n            enableErrorRecovery: config.enableErrorRecovery !== false,\n            enableErrorReporting: config.enableErrorReporting !== false,\n            \n            // 错误级别配置\n            logLevel: config.logLevel || 'error', // debug, info, warn, error\n            maxErrorHistory: config.maxErrorHistory || 100,\n            \n            // 恢复策略配置\n            maxRetryAttempts: config.maxRetryAttempts || 3,\n            retryDelay: config.retryDelay || 1000,\n            enableAutoRecovery: config.enableAutoRecovery !== false,\n            \n            // 用户界面配置\n            showErrorToasts: config.showErrorToasts !== false,\n            errorDisplayDuration: config.errorDisplayDuration || 5000,\n            \n            ...config\n        };\n        \n        // 错误历史记录\n        this.errorHistory = [];\n        \n        // 错误类型映射\n        this.errorTypes = {\n            VALIDATION_ERROR: 'validation',\n            NETWORK_ERROR: 'network',\n            STORAGE_ERROR: 'storage',\n            SECURITY_ERROR: 'security',\n            AUTHENTICATION_ERROR: 'authentication',\n            AUTHORIZATION_ERROR: 'authorization',\n            SYSTEM_ERROR: 'system',\n            USER_ERROR: 'user',\n            UNKNOWN_ERROR: 'unknown'\n        };\n        \n        // 错误恢复策略\n        this.recoveryStrategies = new Map();\n        \n        // 错误监听器\n        this.errorListeners = new Set();\n        \n        // 初始化状态\n        this.isInitialized = false;\n    }\n    \n    /**\n     * 初始化错误管理器\n     */\n    async init() {\n        try {\n            console.log('ErrorManager: 开始初始化');\n            \n            // 设置全局错误处理\n            this.setupGlobalErrorHandling();\n            \n            // 初始化错误恢复策略\n            this.initializeRecoveryStrategies();\n            \n            // 加载错误历史记录\n            await this.loadErrorHistory();\n            \n            // 设置错误报告\n            if (this.config.enableErrorReporting) {\n                this.setupErrorReporting();\n            }\n            \n            this.isInitialized = true;\n            console.log('ErrorManager: 初始化完成');\n            \n        } catch (error) {\n            console.error('ErrorManager: 初始化失败', error);\n            throw error;\n        }\n    }\n    \n    /**\n     * 设置全局错误处理\n     */\n    setupGlobalErrorHandling() {\n        // 捕获未处理的Promise拒绝\n        if (typeof window !== 'undefined') {\n            window.addEventListener('unhandledrejection', (event) => {\n                this.handleError(event.reason, {\n                    type: this.errorTypes.SYSTEM_ERROR,\n                    context: 'unhandledrejection',\n                    recoverable: false\n                });\n            });\n            \n            // 捕获全局JavaScript错误\n            window.addEventListener('error', (event) => {\n                this.handleError(event.error, {\n                    type: this.errorTypes.SYSTEM_ERROR,\n                    context: 'global_error',\n                    recoverable: false,\n                    filename: event.filename,\n                    lineno: event.lineno,\n                    colno: event.colno\n                });\n            });\n        }\n    }\n    \n    /**\n     * 初始化错误恢复策略\n     */\n    initializeRecoveryStrategies() {\n        // 网络错误恢复策略\n        this.recoveryStrategies.set(this.errorTypes.NETWORK_ERROR, {\n            canRecover: true,\n            maxAttempts: this.config.maxRetryAttempts,\n            delay: this.config.retryDelay,\n            strategy: async (error, context, attempt) => {\n                console.log(`ErrorManager: 网络错误恢复尝试 ${attempt}/${this.config.maxRetryAttempts}`);\n                \n                // 指数退避延迟\n                const delay = this.config.retryDelay * Math.pow(2, attempt - 1);\n                await this.delay(delay);\n                \n                // 检查网络连接\n                if (navigator.onLine === false) {\n                    throw new Error('网络连接不可用');\n                }\n                \n                // 重试原始操作\n                if (context.retryFunction) {\n                    return await context.retryFunction();\n                }\n                \n                return false;\n            }\n        });\n        \n        // 存储错误恢复策略\n        this.recoveryStrategies.set(this.errorTypes.STORAGE_ERROR, {\n            canRecover: true,\n            maxAttempts: 2,\n            delay: 500,\n            strategy: async (error, context, attempt) => {\n                console.log(`ErrorManager: 存储错误恢复尝试 ${attempt}/2`);\n                \n                if (attempt === 1) {\n                    // 第一次尝试：清理存储空间\n                    try {\n                        this.cleanupStorage();\n                        await this.delay(500);\n                        \n                        if (context.retryFunction) {\n                            return await context.retryFunction();\n                        }\n                    } catch (cleanupError) {\n                        console.warn('ErrorManager: 存储清理失败', cleanupError);\n                    }\n                } else {\n                    // 第二次尝试：使用备用存储\n                    try {\n                        if (context.fallbackFunction) {\n                            return await context.fallbackFunction();\n                        }\n                    } catch (fallbackError) {\n                        console.warn('ErrorManager: 备用存储失败', fallbackError);\n                    }\n                }\n                \n                return false;\n            }\n        });\n        \n        // 验证错误恢复策略\n        this.recoveryStrategies.set(this.errorTypes.VALIDATION_ERROR, {\n            canRecover: true,\n            maxAttempts: 1,\n            delay: 0,\n            strategy: async (error, context, attempt) => {\n                console.log('ErrorManager: 验证错误恢复');\n                \n                // 提供用户友好的验证错误信息\n                if (context.showUserMessage !== false) {\n                    this.showUserFriendlyError(error, context);\n                }\n                \n                // 聚焦到错误字段\n                if (context.fieldName && typeof document !== 'undefined') {\n                    const field = document.querySelector(`[name=\"${context.fieldName}\"]`);\n                    if (field) {\n                        field.focus();\n                        field.classList.add('error');\n                    }\n                }\n                \n                return true; // 验证错误通常不需要重试，只需要用户修正\n            }\n        });\n    }\n    \n    /**\n     * 处理错误\n     */\n    async handleError(error, options = {}) {\n        try {\n            const errorInfo = this.createErrorInfo(error, options);\n            \n            // 记录错误\n            if (this.config.enableErrorLogging) {\n                this.logError(errorInfo);\n            }\n            \n            // 添加到错误历史\n            this.addToErrorHistory(errorInfo);\n            \n            // 通知错误监听器\n            this.notifyErrorListeners(errorInfo);\n            \n            // 尝试错误恢复\n            if (this.config.enableErrorRecovery && options.recoverable !== false) {\n                const recovered = await this.attemptRecovery(errorInfo);\n                if (recovered) {\n                    console.log('ErrorManager: 错误恢复成功');\n                    return { recovered: true, errorInfo };\n                }\n            }\n            \n            // 显示用户友好的错误信息\n            if (this.config.enableUserFriendlyMessages && options.showUserMessage !== false) {\n                this.showUserFriendlyError(errorInfo, options);\n            }\n            \n            return { recovered: false, errorInfo };\n            \n        } catch (handlingError) {\n            console.error('ErrorManager: 错误处理过程中发生错误', handlingError);\n            return { recovered: false, errorInfo: null };\n        }\n    }\n    \n    /**\n     * 创建错误信息对象\n     */\n    createErrorInfo(error, options = {}) {\n        const errorInfo = {\n            id: this.generateErrorId(),\n            timestamp: new Date().toISOString(),\n            type: options.type || this.detectErrorType(error),\n            message: error.message || error.toString(),\n            stack: error.stack,\n            context: options.context || 'unknown',\n            severity: options.severity || 'error',\n            recoverable: options.recoverable !== false,\n            userAgent: typeof navigator !== 'undefined' ? navigator.userAgent : 'unknown',\n            url: typeof window !== 'undefined' ? window.location.href : 'unknown',\n            userId: options.userId || null,\n            sessionId: options.sessionId || null,\n            additionalData: options.additionalData || {}\n        };\n        \n        // 添加错误特定信息\n        if (options.filename) errorInfo.filename = options.filename;\n        if (options.lineno) errorInfo.lineno = options.lineno;\n        if (options.colno) errorInfo.colno = options.colno;\n        if (options.fieldName) errorInfo.fieldName = options.fieldName;\n        \n        return errorInfo;\n    }\n    \n    /**\n     * 检测错误类型\n     */\n    detectErrorType(error) {\n        const message = error.message?.toLowerCase() || '';\n        const name = error.name?.toLowerCase() || '';\n        \n        if (message.includes('network') || message.includes('fetch') || name.includes('networkerror')) {\n            return this.errorTypes.NETWORK_ERROR;\n        }\n        \n        if (message.includes('storage') || message.includes('quota') || name.includes('quotaexceedederror')) {\n            return this.errorTypes.STORAGE_ERROR;\n        }\n        \n        if (message.includes('validation') || message.includes('invalid')) {\n            return this.errorTypes.VALIDATION_ERROR;\n        }\n        \n        if (message.includes('unauthorized') || message.includes('authentication')) {\n            return this.errorTypes.AUTHENTICATION_ERROR;\n        }\n        \n        if (message.includes('forbidden') || message.includes('permission')) {\n            return this.errorTypes.AUTHORIZATION_ERROR;\n        }\n        \n        if (message.includes('security') || message.includes('xss') || message.includes('csrf')) {\n            return this.errorTypes.SECURITY_ERROR;\n        }\n        \n        return this.errorTypes.UNKNOWN_ERROR;\n    }\n    \n    /**\n     * 尝试错误恢复\n     */\n    async attemptRecovery(errorInfo) {\n        const strategy = this.recoveryStrategies.get(errorInfo.type);\n        \n        if (!strategy || !strategy.canRecover) {\n            console.log(`ErrorManager: 错误类型 ${errorInfo.type} 不支持自动恢复`);\n            return false;\n        }\n        \n        for (let attempt = 1; attempt <= strategy.maxAttempts; attempt++) {\n            try {\n                console.log(`ErrorManager: 错误恢复尝试 ${attempt}/${strategy.maxAttempts}`);\n                \n                const result = await strategy.strategy(errorInfo, errorInfo.context, attempt);\n                \n                if (result) {\n                    console.log('ErrorManager: 错误恢复成功');\n                    return true;\n                }\n                \n            } catch (recoveryError) {\n                console.warn(`ErrorManager: 恢复尝试 ${attempt} 失败`, recoveryError);\n                \n                if (attempt === strategy.maxAttempts) {\n                    console.error('ErrorManager: 所有恢复尝试都失败了');\n                    return false;\n                }\n            }\n        }\n        \n        return false;\n    }\n    \n    /**\n     * 显示用户友好的错误信息\n     */\n    showUserFriendlyError(errorInfo, options = {}) {\n        const userMessage = this.getUserFriendlyMessage(errorInfo);\n        \n        if (this.config.showErrorToasts && typeof document !== 'undefined') {\n            this.showErrorToast(userMessage, errorInfo.severity);\n        }\n        \n        // 触发自定义错误显示事件\n        if (typeof window !== 'undefined') {\n            window.dispatchEvent(new CustomEvent('userError', {\n                detail: {\n                    message: userMessage,\n                    severity: errorInfo.severity,\n                    type: errorInfo.type,\n                    errorId: errorInfo.id\n                }\n            }));\n        }\n    }\n    \n    /**\n     * 获取用户友好的错误信息\n     */\n    getUserFriendlyMessage(errorInfo) {\n        const errorMessages = {\n            [this.errorTypes.VALIDATION_ERROR]: {\n                'username': '用户名格式不正确，请使用3-20个字符，只能包含字母、数字和下划线',\n                'email': '邮箱格式不正确，请输入有效的邮箱地址',\n                'password': '密码强度不够，请使用至少8个字符，包含大小写字母、数字和特殊字符',\n                'default': '输入信息有误，请检查并重新输入'\n            },\n            [this.errorTypes.NETWORK_ERROR]: {\n                'default': '网络连接出现问题，请检查网络连接后重试'\n            },\n            [this.errorTypes.STORAGE_ERROR]: {\n                'default': '数据保存失败，请清理浏览器缓存后重试'\n            },\n            [this.errorTypes.AUTHENTICATION_ERROR]: {\n                'default': '身份验证失败，请重新登录'\n            },\n            [this.errorTypes.AUTHORIZATION_ERROR]: {\n                'default': '您没有权限执行此操作'\n            },\n            [this.errorTypes.SECURITY_ERROR]: {\n                'default': '安全检查失败，请确保输入内容安全'\n            },\n            [this.errorTypes.SYSTEM_ERROR]: {\n                'default': '系统出现错误，请稍后重试'\n            },\n            [this.errorTypes.USER_ERROR]: {\n                'default': '操作失败，请检查输入信息'\n            },\n            [this.errorTypes.UNKNOWN_ERROR]: {\n                'default': '发生未知错误，请联系技术支持'\n            }\n        };\n        \n        const typeMessages = errorMessages[errorInfo.type] || errorMessages[this.errorTypes.UNKNOWN_ERROR];\n        \n        // 尝试根据字段名获取特定消息\n        if (errorInfo.fieldName && typeMessages[errorInfo.fieldName]) {\n            return typeMessages[errorInfo.fieldName];\n        }\n        \n        // 尝试根据错误消息关键词匹配\n        const message = errorInfo.message.toLowerCase();\n        for (const [key, value] of Object.entries(typeMessages)) {\n            if (key !== 'default' && message.includes(key)) {\n                return value;\n            }\n        }\n        \n        return typeMessages.default;\n    }\n    \n    /**\n     * 显示错误提示\n     */\n    showErrorToast(message, severity = 'error') {\n        // 创建错误提示元素\n        const toast = document.createElement('div');\n        toast.className = `error-toast error-toast-${severity}`;\n        toast.textContent = message;\n        \n        // 添加样式\n        toast.style.cssText = `\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            background: ${severity === 'error' ? '#f44336' : '#ff9800'};\n            color: white;\n            padding: 12px 20px;\n            border-radius: 4px;\n            box-shadow: 0 2px 8px rgba(0,0,0,0.2);\n            z-index: 10000;\n            max-width: 400px;\n            word-wrap: break-word;\n            animation: slideIn 0.3s ease-out;\n        `;\n        \n        // 添加动画样式\n        if (!document.querySelector('#error-toast-styles')) {\n            const style = document.createElement('style');\n            style.id = 'error-toast-styles';\n            style.textContent = `\n                @keyframes slideIn {\n                    from { transform: translateX(100%); opacity: 0; }\n                    to { transform: translateX(0); opacity: 1; }\n                }\n                @keyframes slideOut {\n                    from { transform: translateX(0); opacity: 1; }\n                    to { transform: translateX(100%); opacity: 0; }\n                }\n            `;\n            document.head.appendChild(style);\n        }\n        \n        // 添加到页面\n        document.body.appendChild(toast);\n        \n        // 自动移除\n        setTimeout(() => {\n            toast.style.animation = 'slideOut 0.3s ease-in';\n            setTimeout(() => {\n                if (toast.parentNode) {\n                    toast.parentNode.removeChild(toast);\n                }\n            }, 300);\n        }, this.config.errorDisplayDuration);\n    }\n    \n    /**\n     * 记录错误\n     */\n    logError(errorInfo) {\n        const logLevel = this.config.logLevel;\n        const logMessage = `[${errorInfo.type}] ${errorInfo.message}`;\n        \n        switch (errorInfo.severity) {\n            case 'debug':\n                if (logLevel === 'debug') console.debug(logMessage, errorInfo);\n                break;\n            case 'info':\n                if (['debug', 'info'].includes(logLevel)) console.info(logMessage, errorInfo);\n                break;\n            case 'warn':\n                if (['debug', 'info', 'warn'].includes(logLevel)) console.warn(logMessage, errorInfo);\n                break;\n            case 'error':\n            default:\n                console.error(logMessage, errorInfo);\n                break;\n        }\n    }\n    \n    /**\n     * 添加到错误历史\n     */\n    addToErrorHistory(errorInfo) {\n        this.errorHistory.unshift(errorInfo);\n        \n        // 保持历史记录数量限制\n        if (this.errorHistory.length > this.config.maxErrorHistory) {\n            this.errorHistory = this.errorHistory.slice(0, this.config.maxErrorHistory);\n        }\n        \n        // 保存到本地存储\n        this.saveErrorHistory();\n    }\n    \n    /**\n     * 加载错误历史记录\n     */\n    async loadErrorHistory() {\n        try {\n            const stored = localStorage.getItem('error_history');\n            if (stored) {\n                this.errorHistory = JSON.parse(stored);\n            }\n        } catch (error) {\n            console.warn('ErrorManager: 加载错误历史失败', error);\n            this.errorHistory = [];\n        }\n    }\n    \n    /**\n     * 保存错误历史记录\n     */\n    saveErrorHistory() {\n        try {\n            localStorage.setItem('error_history', JSON.stringify(this.errorHistory));\n        } catch (error) {\n            console.warn('ErrorManager: 保存错误历史失败', error);\n        }\n    }\n    \n    /**\n     * 设置错误报告\n     */\n    setupErrorReporting() {\n        // 这里可以集成第三方错误报告服务\n        console.log('ErrorManager: 错误报告功能已启用');\n    }\n    \n    /**\n     * 清理存储空间\n     */\n    cleanupStorage() {\n        try {\n            // 清理过期的缓存数据\n            const keysToRemove = [];\n            for (let i = 0; i < localStorage.length; i++) {\n                const key = localStorage.key(i);\n                if (key && (key.startsWith('temp_') || key.startsWith('cache_'))) {\n                    keysToRemove.push(key);\n                }\n            }\n            \n            keysToRemove.forEach(key => localStorage.removeItem(key));\n            console.log(`ErrorManager: 清理了 ${keysToRemove.length} 个临时存储项`);\n            \n        } catch (error) {\n            console.warn('ErrorManager: 存储清理失败', error);\n        }\n    }\n    \n    /**\n     * 添加错误监听器\n     */\n    addErrorListener(listener) {\n        this.errorListeners.add(listener);\n    }\n    \n    /**\n     * 移除错误监听器\n     */\n    removeErrorListener(listener) {\n        this.errorListeners.delete(listener);\n    }\n    \n    /**\n     * 通知错误监听器\n     */\n    notifyErrorListeners(errorInfo) {\n        this.errorListeners.forEach(listener => {\n            try {\n                listener(errorInfo);\n            } catch (error) {\n                console.warn('ErrorManager: 错误监听器执行失败', error);\n            }\n        });\n    }\n    \n    /**\n     * 获取错误统计\n     */\n    getErrorStats() {\n        const stats = {\n            total: this.errorHistory.length,\n            byType: {},\n            bySeverity: {},\n            recent: this.errorHistory.slice(0, 10)\n        };\n        \n        this.errorHistory.forEach(error => {\n            stats.byType[error.type] = (stats.byType[error.type] || 0) + 1;\n            stats.bySeverity[error.severity] = (stats.bySeverity[error.severity] || 0) + 1;\n        });\n        \n        return stats;\n    }\n    \n    /**\n     * 清除错误历史\n     */\n    clearErrorHistory() {\n        this.errorHistory = [];\n        this.saveErrorHistory();\n    }\n    \n    /**\n     * 生成错误ID\n     */\n    generateErrorId() {\n        return `error_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    }\n    \n    /**\n     * 延迟函数\n     */\n    delay(ms) {\n        return new Promise(resolve => setTimeout(resolve, ms));\n    }\n    \n    /**\n     * 销毁错误管理器\n     */\n    destroy() {\n        this.errorListeners.clear();\n        this.recoveryStrategies.clear();\n        this.isInitialized = false;\n    }\n}\n\n// 导出ErrorManager类\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = ErrorManager;\n} else if (typeof window !== 'undefined') {\n    window.ErrorManager = ErrorManager;\n}","usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\auth\\http-client.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\auth\\input-validator.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\auth\\password-security.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\auth\\performance-monitor.js","messages":[{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":16,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":16,"endColumn":7,"fix":{"range":[418,424],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":21,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":21,"endColumn":7,"fix":{"range":[655,661],"text":""}},{"ruleId":"no-magic-numbers","severity":1,"message":"No magic number: 86400000.","line":23,"column":65,"nodeType":"Literal","messageId":"noMagic","endLine":23,"endColumn":73},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":25,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":25,"endColumn":7,"fix":{"range":[817,823],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":29,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":29,"endColumn":7,"fix":{"range":[971,977],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":40,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":40,"endColumn":7,"fix":{"range":[1161,1167],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":46,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":46,"endColumn":7,"fix":{"range":[1280,1286],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":50,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":50,"endColumn":7,"fix":{"range":[1351,1357],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":54,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":54,"endColumn":7,"fix":{"range":[1417,1423],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":96,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":96,"endColumn":7,"fix":{"range":[2158,2164],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":100,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":100,"endColumn":7,"fix":{"range":[2263,2269],"text":""}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":112,"column":47,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":112,"endColumn":54,"fix":{"range":[2559,2566],"text":"{return;}"}},{"ruleId":"no-magic-numbers","severity":1,"message":"No magic number: 3600000.","line":136,"column":8,"nodeType":"Literal","messageId":"noMagic","endLine":136,"endColumn":15},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":150,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":150,"endColumn":9,"fix":{"range":[3423,3431],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":163,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":163,"endColumn":5,"fix":{"range":[3742,3746],"text":""}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":184,"column":19,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":184,"endColumn":26,"fix":{"range":[4238,4245],"text":"{return;}"}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":235,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":235,"endColumn":7,"fix":{"range":[5409,5415],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":272,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":272,"endColumn":5,"fix":{"range":[6255,6259],"text":""}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":273,"column":39,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":273,"endColumn":46,"fix":{"range":[6298,6305],"text":"{return;}"}},{"ruleId":"no-magic-numbers","severity":1,"message":"No magic number: 95.","line":281,"column":74,"nodeType":"Literal","messageId":"noMagic","endLine":281,"endColumn":76},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":285,"column":59,"nodeType":"Program","messageId":"trailingSpace","endLine":285,"endColumn":60,"fix":{"range":[6816,6817],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":286,"column":60,"nodeType":"Program","messageId":"trailingSpace","endLine":286,"endColumn":61,"fix":{"range":[6877,6878],"text":""}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":301,"column":35,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":301,"endColumn":44,"fix":{"range":[7253,7262],"text":"{return 0;}"}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":302,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":302,"endColumn":5,"fix":{"range":[7263,7267],"text":""}},{"ruleId":"no-unused-vars","severity":2,"message":"'success' is defined but never used. Allowed unused args must match /^_/u.","line":310,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":310,"endColumn":58},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":356,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":356,"endColumn":5,"fix":{"range":[8631,8635],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":375,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":375,"endColumn":5,"fix":{"range":[9015,9019],"text":""}},{"ruleId":"no-magic-numbers","severity":1,"message":"No magic number: -720.","line":400,"column":67,"nodeType":"UnaryExpression","messageId":"noMagic","endLine":400,"endColumn":71},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":412,"column":36,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":412,"endColumn":43,"fix":{"range":[9973,9980],"text":"{return;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":433,"column":32,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":433,"endColumn":41,"fix":{"range":[10441,10450],"text":"{return 0;}"}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":481,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":481,"endColumn":7,"fix":{"range":[11884,11890],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":493,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":493,"endColumn":7,"fix":{"range":[12363,12369],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":500,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":500,"endColumn":7,"fix":{"range":[12559,12565],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":503,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":503,"endColumn":7,"fix":{"range":[12636,12642],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":506,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":506,"endColumn":7,"fix":{"range":[12721,12727],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":509,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":509,"endColumn":7,"fix":{"range":[12804,12810],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":514,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":514,"endColumn":7,"fix":{"range":[12924,12930],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":521,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":521,"endColumn":5,"fix":{"range":[13059,13063],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":581,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":581,"endColumn":5,"fix":{"range":[14382,14386],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":600,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":600,"endColumn":5,"fix":{"range":[14844,14848],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":655,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":655,"endColumn":7,"fix":{"range":[16145,16151],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":666,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":666,"endColumn":11,"fix":{"range":[16540,16550],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":696,"column":51,"nodeType":"Program","messageId":"trailingSpace","endLine":696,"endColumn":52,"fix":{"range":[17317,17318],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":697,"column":74,"nodeType":"Program","messageId":"trailingSpace","endLine":697,"endColumn":75,"fix":{"range":[17392,17393],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":717,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":717,"endColumn":5,"fix":{"range":[18070,18074],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":719,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":719,"endColumn":5,"fix":{"range":[18163,18167],"text":""}},{"ruleId":"no-else-return","severity":2,"message":"Unnecessary 'else' after 'return'.","line":724,"column":12,"nodeType":"BlockStatement","messageId":"unexpected","endLine":726,"endColumn":6,"fix":{"range":[17939,18346],"text":"() {\n    const recentAlerts = this.realTimeData.alerts.filter(\n      alert => Date.now() - alert.timestamp < 300000 // 5分钟内\n    );\n    \n    const highSeverityAlerts = recentAlerts.filter(alert => alert.severity === 'HIGH');\n    \n    if (highSeverityAlerts.length > 0) {\n      return 'CRITICAL';\n    } else if (recentAlerts.length > 0) {\n      return 'WARNING';\n    } \n      return 'HEALTHY';\n    \n  }"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":774,"column":18,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":774,"endColumn":39,"fix":{"range":[19196,19217],"text":"{clearInterval(timer);}"}},{"ruleId":"eol-last","severity":2,"message":"Newline required at end of file but not found.","line":789,"column":2,"nodeType":"Program","messageId":"missing","fix":{"range":[19457,19457],"text":"\n"}}],"suppressedMessages":[],"errorCount":45,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":44,"fixableWarningCount":0,"source":"/**\n * 注册流程性能监控模块\n * 提供性能指标收集、分析和报告功能\n * @author AI Assistant\n * @version 1.0\n * @date 2025-01-12\n */\n\nclass PerformanceMonitor {\n  constructor(options = {}) {\n    this.config = {\n      // 监控配置\n      enableRealTimeMonitoring: options.enableRealTimeMonitoring !== false,\n      enableMetricsCollection: options.enableMetricsCollection !== false,\n      enablePerformanceAlerts: options.enablePerformanceAlerts !== false,\n      \n      // 性能阈值\n      responseTimeThreshold: options.responseTimeThreshold || 3000, // 3秒\n      errorRateThreshold: options.errorRateThreshold || 0.05, // 5%\n      throughputThreshold: options.throughputThreshold || 100, // 每分钟100次\n      \n      // 数据保留\n      metricsRetentionPeriod: options.metricsRetentionPeriod || 86400000, // 24小时\n      samplingRate: options.samplingRate || 1.0, // 100%采样\n      \n      // 报告配置\n      reportInterval: options.reportInterval || 300000, // 5分钟\n      enableDetailedReports: options.enableDetailedReports !== false,\n      \n      ...options\n    };\n\n    // 性能指标存储\n    this.metrics = {\n      // 响应时间指标\n      responseTimes: [],\n      averageResponseTime: 0,\n      p95ResponseTime: 0,\n      p99ResponseTime: 0,\n      \n      // 吞吐量指标\n      requestCount: 0,\n      successCount: 0,\n      errorCount: 0,\n      throughputPerMinute: 0,\n      \n      // 错误率指标\n      errorRate: 0,\n      errorTypes: new Map(),\n      \n      // 资源使用指标\n      memoryUsage: [],\n      cpuUsage: [],\n      \n      // 用户体验指标\n      userSatisfactionScore: 0,\n      abandonmentRate: 0\n    };\n\n    // 实时监控数据\n    this.realTimeData = {\n      activeRequests: new Map(),\n      recentMetrics: [],\n      alerts: [],\n      performanceEvents: []\n    };\n\n    // 性能分析器\n    this.analyzer = {\n      trends: new Map(),\n      patterns: new Map(),\n      anomalies: [],\n      recommendations: []\n    };\n\n    // 定时器\n    this.timers = {\n      metricsCollection: null,\n      reportGeneration: null,\n      dataCleanup: null\n    };\n\n    // 初始化\n    this.initialize();\n  }\n\n  /**\n   * 初始化性能监控器\n   */\n  initialize() {\n    try {\n      this.setupMetricsCollection();\n      this.setupReportGeneration();\n      this.setupDataCleanup();\n      this.setupPerformanceObserver();\n      \n      if (this.config.enableRealTimeMonitoring) {\n        this.startRealTimeMonitoring();\n      }\n      \n      console.log('PerformanceMonitor initialized successfully');\n    } catch (error) {\n      console.error('Failed to initialize PerformanceMonitor:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * 设置指标收集\n   */\n  setupMetricsCollection() {\n    if (!this.config.enableMetricsCollection) return;\n\n    this.timers.metricsCollection = setInterval(() => {\n      this.collectSystemMetrics();\n      this.analyzePerformanceTrends();\n    }, 60000); // 每分钟收集一次\n  }\n\n  /**\n   * 设置报告生成\n   */\n  setupReportGeneration() {\n    this.timers.reportGeneration = setInterval(() => {\n      this.generatePerformanceReport();\n      this.checkPerformanceAlerts();\n    }, this.config.reportInterval);\n  }\n\n  /**\n   * 设置数据清理\n   */\n  setupDataCleanup() {\n    this.timers.dataCleanup = setInterval(() => {\n      this.cleanupOldMetrics();\n    }, 3600000); // 每小时清理一次\n  }\n\n  /**\n   * 设置性能观察器\n   */\n  setupPerformanceObserver() {\n    if (typeof PerformanceObserver !== 'undefined') {\n      try {\n        const observer = new PerformanceObserver((list) => {\n          for (const entry of list.getEntries()) {\n            this.processPerformanceEntry(entry);\n          }\n        });\n        \n        observer.observe({ entryTypes: ['measure', 'navigation', 'resource'] });\n      } catch (error) {\n        console.warn('PerformanceObserver not supported:', error);\n      }\n    }\n  }\n\n  /**\n   * 开始请求监控\n   */\n  startRequest(requestId, operation, metadata = {}) {\n    const startTime = performance.now();\n    \n    this.realTimeData.activeRequests.set(requestId, {\n      operation,\n      startTime,\n      metadata,\n      status: 'active'\n    });\n\n    // 记录性能标记\n    if (typeof performance !== 'undefined' && performance.mark) {\n      performance.mark(`${operation}-start-${requestId}`);\n    }\n\n    return requestId;\n  }\n\n  /**\n   * 结束请求监控\n   */\n  endRequest(requestId, success = true, error = null, result = null) {\n    const request = this.realTimeData.activeRequests.get(requestId);\n    if (!request) return;\n\n    const endTime = performance.now();\n    const duration = endTime - request.startTime;\n\n    // 记录性能标记和测量\n    if (typeof performance !== 'undefined' && performance.mark && performance.measure) {\n      performance.mark(`${request.operation}-end-${requestId}`);\n      performance.measure(\n        `${request.operation}-duration-${requestId}`,\n        `${request.operation}-start-${requestId}`,\n        `${request.operation}-end-${requestId}`\n      );\n    }\n\n    // 更新指标\n    this.updateMetrics({\n      operation: request.operation,\n      duration,\n      success,\n      error,\n      result,\n      metadata: request.metadata\n    });\n\n    // 移除活跃请求\n    this.realTimeData.activeRequests.delete(requestId);\n\n    // 检查性能阈值\n    this.checkPerformanceThresholds(request.operation, duration, success);\n\n    return {\n      operation: request.operation,\n      duration,\n      success,\n      timestamp: endTime\n    };\n  }\n\n  /**\n   * 更新性能指标\n   */\n  updateMetrics(data) {\n    const { operation, duration, success, error } = data;\n\n    // 更新请求计数\n    this.metrics.requestCount++;\n    if (success) {\n      this.metrics.successCount++;\n    } else {\n      this.metrics.errorCount++;\n      \n      // 记录错误类型\n      const errorType = error?.name || 'UnknownError';\n      const currentCount = this.metrics.errorTypes.get(errorType) || 0;\n      this.metrics.errorTypes.set(errorType, currentCount + 1);\n    }\n\n    // 更新响应时间\n    this.metrics.responseTimes.push({\n      operation,\n      duration,\n      timestamp: Date.now(),\n      success\n    });\n\n    // 计算统计指标\n    this.calculateStatistics();\n\n    // 记录实时数据\n    this.realTimeData.recentMetrics.push({\n      operation,\n      duration,\n      success,\n      timestamp: Date.now()\n    });\n\n    // 限制实时数据大小\n    if (this.realTimeData.recentMetrics.length > 1000) {\n      this.realTimeData.recentMetrics = this.realTimeData.recentMetrics.slice(-500);\n    }\n  }\n\n  /**\n   * 计算统计指标\n   */\n  calculateStatistics() {\n    const recentResponses = this.metrics.responseTimes.slice(-100); // 最近100次请求\n    \n    if (recentResponses.length === 0) return;\n\n    // 计算平均响应时间\n    const totalTime = recentResponses.reduce((sum, item) => sum + item.duration, 0);\n    this.metrics.averageResponseTime = totalTime / recentResponses.length;\n\n    // 计算百分位数\n    const sortedTimes = recentResponses.map(item => item.duration).sort((a, b) => a - b);\n    this.metrics.p95ResponseTime = this.calculatePercentile(sortedTimes, 95);\n    this.metrics.p99ResponseTime = this.calculatePercentile(sortedTimes, 99);\n\n    // 计算错误率\n    this.metrics.errorRate = this.metrics.requestCount > 0 \n      ? this.metrics.errorCount / this.metrics.requestCount \n      : 0;\n\n    // 计算吞吐量（每分钟请求数）\n    const oneMinuteAgo = Date.now() - 60000;\n    const recentRequests = this.realTimeData.recentMetrics.filter(\n      metric => metric.timestamp > oneMinuteAgo\n    );\n    this.metrics.throughputPerMinute = recentRequests.length;\n  }\n\n  /**\n   * 计算百分位数\n   */\n  calculatePercentile(sortedArray, percentile) {\n    if (sortedArray.length === 0) return 0;\n    \n    const index = Math.ceil((percentile / 100) * sortedArray.length) - 1;\n    return sortedArray[Math.max(0, index)];\n  }\n\n  /**\n   * 检查性能阈值\n   */\n  checkPerformanceThresholds(operation, duration, success) {\n    const alerts = [];\n\n    // 检查响应时间阈值\n    if (duration > this.config.responseTimeThreshold) {\n      alerts.push({\n        type: 'SLOW_RESPONSE',\n        operation,\n        duration,\n        threshold: this.config.responseTimeThreshold,\n        timestamp: Date.now(),\n        severity: duration > this.config.responseTimeThreshold * 2 ? 'HIGH' : 'MEDIUM'\n      });\n    }\n\n    // 检查错误率阈值\n    if (this.metrics.errorRate > this.config.errorRateThreshold) {\n      alerts.push({\n        type: 'HIGH_ERROR_RATE',\n        errorRate: this.metrics.errorRate,\n        threshold: this.config.errorRateThreshold,\n        timestamp: Date.now(),\n        severity: 'HIGH'\n      });\n    }\n\n    // 检查吞吐量阈值\n    if (this.metrics.throughputPerMinute < this.config.throughputThreshold) {\n      alerts.push({\n        type: 'LOW_THROUGHPUT',\n        throughput: this.metrics.throughputPerMinute,\n        threshold: this.config.throughputThreshold,\n        timestamp: Date.now(),\n        severity: 'MEDIUM'\n      });\n    }\n\n    // 添加告警\n    alerts.forEach(alert => this.addAlert(alert));\n  }\n\n  /**\n   * 添加性能告警\n   */\n  addAlert(alert) {\n    this.realTimeData.alerts.push(alert);\n    \n    // 限制告警数量\n    if (this.realTimeData.alerts.length > 100) {\n      this.realTimeData.alerts = this.realTimeData.alerts.slice(-50);\n    }\n\n    // 触发告警事件\n    if (this.config.enablePerformanceAlerts) {\n      this.dispatchAlert(alert);\n    }\n  }\n\n  /**\n   * 分发性能告警\n   */\n  dispatchAlert(alert) {\n    const event = new CustomEvent('performance-alert', {\n      detail: alert\n    });\n    \n    if (typeof window !== 'undefined') {\n      window.dispatchEvent(event);\n    }\n\n    console.warn('Performance Alert:', alert);\n  }\n\n  /**\n   * 收集系统指标\n   */\n  collectSystemMetrics() {\n    try {\n      // 收集内存使用情况\n      if (typeof performance !== 'undefined' && performance.memory) {\n        this.metrics.memoryUsage.push({\n          used: performance.memory.usedJSHeapSize,\n          total: performance.memory.totalJSHeapSize,\n          limit: performance.memory.jsHeapSizeLimit,\n          timestamp: Date.now()\n        });\n      }\n\n      // 限制历史数据大小\n      if (this.metrics.memoryUsage.length > 1440) { // 24小时数据\n        this.metrics.memoryUsage = this.metrics.memoryUsage.slice(-720);\n      }\n    } catch (error) {\n      console.warn('Failed to collect system metrics:', error);\n    }\n  }\n\n  /**\n   * 分析性能趋势\n   */\n  analyzePerformanceTrends() {\n    const recentMetrics = this.realTimeData.recentMetrics.slice(-100);\n    if (recentMetrics.length < 10) return;\n\n    // 分析响应时间趋势\n    const responseTrend = this.calculateTrend(\n      recentMetrics.map(m => ({ x: m.timestamp, y: m.duration }))\n    );\n\n    this.analyzer.trends.set('responseTime', {\n      direction: responseTrend > 0 ? 'increasing' : 'decreasing',\n      slope: responseTrend,\n      timestamp: Date.now()\n    });\n\n    // 检测异常\n    this.detectAnomalies(recentMetrics);\n  }\n\n  /**\n   * 计算趋势斜率\n   */\n  calculateTrend(dataPoints) {\n    if (dataPoints.length < 2) return 0;\n\n    const n = dataPoints.length;\n    const sumX = dataPoints.reduce((sum, point) => sum + point.x, 0);\n    const sumY = dataPoints.reduce((sum, point) => sum + point.y, 0);\n    const sumXY = dataPoints.reduce((sum, point) => sum + point.x * point.y, 0);\n    const sumXX = dataPoints.reduce((sum, point) => sum + point.x * point.x, 0);\n\n    const slope = (n * sumXY - sumX * sumY) / (n * sumXX - sumX * sumX);\n    return isNaN(slope) ? 0 : slope;\n  }\n\n  /**\n   * 检测性能异常\n   */\n  detectAnomalies(metrics) {\n    const durations = metrics.map(m => m.duration);\n    const mean = durations.reduce((sum, d) => sum + d, 0) / durations.length;\n    const variance = durations.reduce((sum, d) => sum + Math.pow(d - mean, 2), 0) / durations.length;\n    const stdDev = Math.sqrt(variance);\n\n    const threshold = mean + 2 * stdDev; // 2σ阈值\n\n    metrics.forEach(metric => {\n      if (metric.duration > threshold) {\n        this.analyzer.anomalies.push({\n          type: 'RESPONSE_TIME_ANOMALY',\n          value: metric.duration,\n          threshold,\n          timestamp: metric.timestamp,\n          operation: metric.operation\n        });\n      }\n    });\n\n    // 限制异常记录数量\n    if (this.analyzer.anomalies.length > 100) {\n      this.analyzer.anomalies = this.analyzer.anomalies.slice(-50);\n    }\n  }\n\n  /**\n   * 生成性能报告\n   */\n  generatePerformanceReport() {\n    const report = {\n      timestamp: Date.now(),\n      period: this.config.reportInterval,\n      \n      // 基础指标\n      metrics: {\n        totalRequests: this.metrics.requestCount,\n        successfulRequests: this.metrics.successCount,\n        failedRequests: this.metrics.errorCount,\n        errorRate: this.metrics.errorRate,\n        averageResponseTime: this.metrics.averageResponseTime,\n        p95ResponseTime: this.metrics.p95ResponseTime,\n        p99ResponseTime: this.metrics.p99ResponseTime,\n        throughputPerMinute: this.metrics.throughputPerMinute\n      },\n      \n      // 错误分析\n      errors: {\n        totalErrors: this.metrics.errorCount,\n        errorTypes: Object.fromEntries(this.metrics.errorTypes),\n        topErrors: this.getTopErrors()\n      },\n      \n      // 性能趋势\n      trends: Object.fromEntries(this.analyzer.trends),\n      \n      // 异常检测\n      anomalies: this.analyzer.anomalies.slice(-10), // 最近10个异常\n      \n      // 告警信息\n      alerts: this.realTimeData.alerts.slice(-20), // 最近20个告警\n      \n      // 系统资源\n      systemMetrics: {\n        memoryUsage: this.metrics.memoryUsage.slice(-1)[0] || null\n      },\n      \n      // 性能建议\n      recommendations: this.generateRecommendations()\n    };\n\n    // 触发报告事件\n    this.dispatchReportEvent(report);\n    \n    return report;\n  }\n\n  /**\n   * 获取错误排行\n   */\n  getTopErrors() {\n    return Array.from(this.metrics.errorTypes.entries())\n      .sort((a, b) => b[1] - a[1])\n      .slice(0, 5)\n      .map(([type, count]) => ({ type, count }));\n  }\n\n  /**\n   * 生成性能建议\n   */\n  generateRecommendations() {\n    const recommendations = [];\n\n    // 响应时间建议\n    if (this.metrics.averageResponseTime > this.config.responseTimeThreshold * 0.8) {\n      recommendations.push({\n        type: 'PERFORMANCE',\n        priority: 'HIGH',\n        message: '平均响应时间接近阈值，建议优化性能',\n        suggestion: '考虑优化数据库查询、减少网络请求或使用缓存'\n      });\n    }\n\n    // 错误率建议\n    if (this.metrics.errorRate > this.config.errorRateThreshold * 0.5) {\n      recommendations.push({\n        type: 'RELIABILITY',\n        priority: 'HIGH',\n        message: '错误率较高，需要改善系统稳定性',\n        suggestion: '检查错误日志，修复常见错误，增强错误处理'\n      });\n    }\n\n    // 吞吐量建议\n    if (this.metrics.throughputPerMinute < this.config.throughputThreshold * 0.7) {\n      recommendations.push({\n        type: 'CAPACITY',\n        priority: 'MEDIUM',\n        message: '系统吞吐量较低，可能需要扩容',\n        suggestion: '考虑增加服务器资源或优化并发处理能力'\n      });\n    }\n\n    return recommendations;\n  }\n\n  /**\n   * 分发报告事件\n   */\n  dispatchReportEvent(report) {\n    const event = new CustomEvent('performance-report', {\n      detail: report\n    });\n    \n    if (typeof window !== 'undefined') {\n      window.dispatchEvent(event);\n    }\n\n    if (this.config.enableDetailedReports) {\n      console.log('Performance Report:', report);\n    }\n  }\n\n  /**\n   * 检查性能告警\n   */\n  checkPerformanceAlerts() {\n    const recentAlerts = this.realTimeData.alerts.filter(\n      alert => Date.now() - alert.timestamp < 300000 // 5分钟内\n    );\n\n    const highSeverityAlerts = recentAlerts.filter(alert => alert.severity === 'HIGH');\n    \n    if (highSeverityAlerts.length > 0) {\n      console.warn(`检测到 ${highSeverityAlerts.length} 个高严重性性能告警`);\n    }\n  }\n\n  /**\n   * 清理过期指标\n   */\n  cleanupOldMetrics() {\n    const cutoffTime = Date.now() - this.config.metricsRetentionPeriod;\n\n    // 清理响应时间数据\n    this.metrics.responseTimes = this.metrics.responseTimes.filter(\n      item => item.timestamp > cutoffTime\n    );\n\n    // 清理实时指标\n    this.realTimeData.recentMetrics = this.realTimeData.recentMetrics.filter(\n      metric => metric.timestamp > cutoffTime\n    );\n\n    // 清理内存使用数据\n    this.metrics.memoryUsage = this.metrics.memoryUsage.filter(\n      item => item.timestamp > cutoffTime\n    );\n\n    // 清理告警数据\n    this.realTimeData.alerts = this.realTimeData.alerts.filter(\n      alert => alert.timestamp > cutoffTime\n    );\n  }\n\n  /**\n   * 处理性能条目\n   */\n  processPerformanceEntry(entry) {\n    if (entry.entryType === 'measure' && entry.name.includes('registration')) {\n      this.realTimeData.performanceEvents.push({\n        name: entry.name,\n        duration: entry.duration,\n        startTime: entry.startTime,\n        timestamp: Date.now()\n      });\n    }\n  }\n\n  /**\n   * 开始实时监控\n   */\n  startRealTimeMonitoring() {\n    // 监控活跃请求超时\n    setInterval(() => {\n      const now = performance.now();\n      const timeoutThreshold = 30000; // 30秒超时\n      \n      for (const [requestId, request] of this.realTimeData.activeRequests) {\n        if (now - request.startTime > timeoutThreshold) {\n          this.addAlert({\n            type: 'REQUEST_TIMEOUT',\n            requestId,\n            operation: request.operation,\n            duration: now - request.startTime,\n            timestamp: Date.now(),\n            severity: 'HIGH'\n          });\n          \n          // 移除超时请求\n          this.realTimeData.activeRequests.delete(requestId);\n        }\n      }\n    }, 10000); // 每10秒检查一次\n  }\n\n  /**\n   * 获取实时性能数据\n   */\n  getRealTimeMetrics() {\n    return {\n      activeRequests: this.realTimeData.activeRequests.size,\n      recentMetrics: this.realTimeData.recentMetrics.slice(-20),\n      currentThroughput: this.metrics.throughputPerMinute,\n      averageResponseTime: this.metrics.averageResponseTime,\n      errorRate: this.metrics.errorRate,\n      alerts: this.realTimeData.alerts.slice(-10)\n    };\n  }\n\n  /**\n   * 获取性能摘要\n   */\n  getPerformanceSummary() {\n    return {\n      status: this.getOverallStatus(),\n      metrics: {\n        totalRequests: this.metrics.requestCount,\n        successRate: this.metrics.requestCount > 0 \n          ? (this.metrics.successCount / this.metrics.requestCount) * 100 \n          : 0,\n        averageResponseTime: this.metrics.averageResponseTime,\n        throughput: this.metrics.throughputPerMinute\n      },\n      health: {\n        responseTimeHealth: this.metrics.averageResponseTime < this.config.responseTimeThreshold ? 'GOOD' : 'POOR',\n        errorRateHealth: this.metrics.errorRate < this.config.errorRateThreshold ? 'GOOD' : 'POOR',\n        throughputHealth: this.metrics.throughputPerMinute > this.config.throughputThreshold ? 'GOOD' : 'POOR'\n      }\n    };\n  }\n\n  /**\n   * 获取整体状态\n   */\n  getOverallStatus() {\n    const recentAlerts = this.realTimeData.alerts.filter(\n      alert => Date.now() - alert.timestamp < 300000 // 5分钟内\n    );\n    \n    const highSeverityAlerts = recentAlerts.filter(alert => alert.severity === 'HIGH');\n    \n    if (highSeverityAlerts.length > 0) {\n      return 'CRITICAL';\n    } else if (recentAlerts.length > 0) {\n      return 'WARNING';\n    } else {\n      return 'HEALTHY';\n    }\n  }\n\n  /**\n   * 重置性能监控器\n   */\n  reset() {\n    // 重置指标\n    this.metrics = {\n      responseTimes: [],\n      averageResponseTime: 0,\n      p95ResponseTime: 0,\n      p99ResponseTime: 0,\n      requestCount: 0,\n      successCount: 0,\n      errorCount: 0,\n      throughputPerMinute: 0,\n      errorRate: 0,\n      errorTypes: new Map(),\n      memoryUsage: [],\n      cpuUsage: [],\n      userSatisfactionScore: 0,\n      abandonmentRate: 0\n    };\n\n    // 重置实时数据\n    this.realTimeData = {\n      activeRequests: new Map(),\n      recentMetrics: [],\n      alerts: [],\n      performanceEvents: []\n    };\n\n    // 重置分析器\n    this.analyzer = {\n      trends: new Map(),\n      patterns: new Map(),\n      anomalies: [],\n      recommendations: []\n    };\n  }\n\n  /**\n   * 销毁性能监控器\n   */\n  destroy() {\n    // 清理定时器\n    Object.values(this.timers).forEach(timer => {\n      if (timer) clearInterval(timer);\n    });\n\n    // 重置数据\n    this.reset();\n  }\n}\n\n// 导出模块\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = PerformanceMonitor;\n}\n\nif (typeof window !== 'undefined') {\n  window.PerformanceMonitor = PerformanceMonitor;\n}","usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\auth\\registration-event-integration.js","messages":[{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":4,"column":3,"nodeType":"Program","messageId":"trailingSpace","endLine":4,"endColumn":4,"fix":{"range":[48,49],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":26,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":26,"endColumn":5,"fix":{"range":[448,452],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":51,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":51,"endColumn":5,"fix":{"range":[856,860],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":54,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":54,"endColumn":5,"fix":{"range":[906,910],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":85,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":85,"endColumn":7,"fix":{"range":[2269,2275],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":90,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":90,"endColumn":7,"fix":{"range":[2432,2438],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":95,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":95,"endColumn":7,"fix":{"range":[2563,2569],"text":""}},{"ruleId":"no-magic-numbers","severity":1,"message":"No magic number: 999.","line":145,"column":59,"nodeType":"Literal","messageId":"noMagic","endLine":145,"endColumn":62},{"ruleId":"no-magic-numbers","severity":1,"message":"No magic number: 999.","line":146,"column":59,"nodeType":"Literal","messageId":"noMagic","endLine":146,"endColumn":62},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":179,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":179,"endColumn":7,"fix":{"range":[4566,4572],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":235,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":235,"endColumn":5,"fix":{"range":[6244,6248],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":249,"column":43,"nodeType":"Program","messageId":"trailingSpace","endLine":249,"endColumn":44,"fix":{"range":[6666,6667],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":296,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":296,"endColumn":5,"fix":{"range":[7728,7732],"text":""}},{"ruleId":"no-magic-numbers","severity":1,"message":"No magic number: 999.","line":323,"column":57,"nodeType":"Literal","messageId":"noMagic","endLine":323,"endColumn":60},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":413,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":413,"endColumn":5,"fix":{"range":[10371,10375],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":463,"column":39,"nodeType":"Program","messageId":"trailingSpace","endLine":463,"endColumn":40,"fix":{"range":[11395,11396],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":464,"column":56,"nodeType":"Program","messageId":"trailingSpace","endLine":464,"endColumn":57,"fix":{"range":[11452,11453],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":466,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":466,"endColumn":5,"fix":{"range":[11508,11512],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":479,"column":38,"nodeType":"Program","messageId":"trailingSpace","endLine":479,"endColumn":39,"fix":{"range":[11745,11746],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":480,"column":60,"nodeType":"Program","messageId":"trailingSpace","endLine":480,"endColumn":61,"fix":{"range":[11806,11807],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":482,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":482,"endColumn":5,"fix":{"range":[11866,11870],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":494,"column":40,"nodeType":"Program","messageId":"trailingSpace","endLine":494,"endColumn":41,"fix":{"range":[12096,12097],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":495,"column":62,"nodeType":"Program","messageId":"trailingSpace","endLine":495,"endColumn":63,"fix":{"range":[12159,12160],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":497,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":497,"endColumn":5,"fix":{"range":[12221,12225],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":510,"column":39,"nodeType":"Program","messageId":"trailingSpace","endLine":510,"endColumn":40,"fix":{"range":[12450,12451],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":511,"column":53,"nodeType":"Program","messageId":"trailingSpace","endLine":511,"endColumn":54,"fix":{"range":[12504,12505],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":513,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":513,"endColumn":5,"fix":{"range":[12557,12561],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":525,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":525,"endColumn":3,"fix":{"range":[12794,12796],"text":""}},{"ruleId":"eol-last","severity":2,"message":"Newline required at end of file but not found.","line":535,"column":2,"nodeType":"Program","messageId":"missing","fix":{"range":[13057,13057],"text":"\n"}}],"suppressedMessages":[],"errorCount":26,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":26,"fixableWarningCount":0,"source":"/**\n * 注册事件集成模块\n * 统一管理注册相关的事件触发和处理，与现有事件系统集成\n * \n * 功能特性：\n * - 统一的事件命名规范\n * - 事件优先级管理\n * - 错误处理和恢复\n * - 性能监控\n * - 与现有系统的无缝集成\n */\n\nclass RegistrationEventIntegration {\n  constructor(options = {}) {\n    this.config = {\n      enableEventLogging: true,\n      enablePerformanceMonitoring: true,\n      enableErrorRecovery: true,\n      eventTimeout: 5000,\n      maxRetries: 3,\n      ...options\n    };\n\n    // 事件监听器存储\n    this.eventListeners = new Map();\n    \n    // 事件统计\n    this.eventStats = {\n      totalEvents: 0,\n      successfulEvents: 0,\n      failedEvents: 0,\n      averageExecutionTime: 0,\n      eventsByType: {},\n      retryCount: 0\n    };\n\n    // 事件队列（用于批处理和优先级管理）\n    this.eventQueue = [];\n    this.isProcessingQueue = false;\n\n    // 初始化\n    this.init();\n  }\n\n  /**\n   * 初始化事件集成系统\n   */\n  init() {\n    // 注册标准注册事件类型\n    this.registerStandardEvents();\n    \n    // 设置错误处理\n    this.setupErrorHandling();\n    \n    // 启动事件队列处理\n    this.startQueueProcessor();\n\n    if (this.config.enableEventLogging) {\n      console.log('RegistrationEventIntegration initialized');\n    }\n  }\n\n  /**\n   * 注册标准注册事件类型\n   */\n  registerStandardEvents() {\n    this.eventTypes = {\n      // 注册流程事件\n      REGISTRATION_STARTED: 'registration:started',\n      REGISTRATION_VALIDATION_STARTED: 'registration:validation:started',\n      REGISTRATION_VALIDATION_SUCCESS: 'registration:validation:success',\n      REGISTRATION_VALIDATION_FAILED: 'registration:validation:failed',\n      REGISTRATION_SECURITY_CHECK_STARTED: 'registration:security:started',\n      REGISTRATION_SECURITY_CHECK_SUCCESS: 'registration:security:success',\n      REGISTRATION_SECURITY_CHECK_FAILED: 'registration:security:failed',\n      REGISTRATION_UNIQUENESS_CHECK_STARTED: 'registration:uniqueness:started',\n      REGISTRATION_UNIQUENESS_CHECK_SUCCESS: 'registration:uniqueness:success',\n      REGISTRATION_UNIQUENESS_CHECK_FAILED: 'registration:uniqueness:failed',\n      REGISTRATION_STORAGE_STARTED: 'registration:storage:started',\n      REGISTRATION_STORAGE_SUCCESS: 'registration:storage:success',\n      REGISTRATION_STORAGE_FAILED: 'registration:storage:failed',\n      REGISTRATION_SUCCESS: 'registration:success',\n      REGISTRATION_FAILED: 'registration:failed',\n      REGISTRATION_CANCELLED: 'registration:cancelled',\n      \n      // 用户交互事件\n      USER_INPUT_CHANGED: 'user:input:changed',\n      USER_FORM_SUBMITTED: 'user:form:submitted',\n      USER_FORM_RESET: 'user:form:reset',\n      \n      // 系统事件\n      SYSTEM_ERROR: 'system:error',\n      SYSTEM_WARNING: 'system:warning',\n      SYSTEM_INFO: 'system:info',\n      \n      // 性能事件\n      PERFORMANCE_METRIC: 'performance:metric',\n      PERFORMANCE_WARNING: 'performance:warning'\n    };\n\n    // 事件优先级定义\n    this.eventPriorities = {\n      [this.eventTypes.SYSTEM_ERROR]: 1,\n      [this.eventTypes.REGISTRATION_FAILED]: 2,\n      [this.eventTypes.REGISTRATION_SUCCESS]: 3,\n      [this.eventTypes.REGISTRATION_STARTED]: 4,\n      [this.eventTypes.USER_FORM_SUBMITTED]: 5,\n      [this.eventTypes.PERFORMANCE_WARNING]: 6,\n      [this.eventTypes.USER_INPUT_CHANGED]: 10\n    };\n  }\n\n  /**\n   * 设置错误处理\n   */\n  setupErrorHandling() {\n    // 与现有错误管理器集成\n    if (typeof window !== 'undefined' && window.errorManager) {\n      this.errorManager = window.errorManager;\n    }\n  }\n\n  /**\n   * 启动事件队列处理器\n   */\n  startQueueProcessor() {\n    setInterval(() => {\n      this.processEventQueue();\n    }, 100); // 每100ms处理一次队列\n  }\n\n  /**\n   * 处理事件队列\n   */\n  async processEventQueue() {\n    if (this.isProcessingQueue || this.eventQueue.length === 0) {\n      return;\n    }\n\n    this.isProcessingQueue = true;\n\n    try {\n      // 按优先级排序\n      this.eventQueue.sort((a, b) => {\n        const priorityA = this.eventPriorities[a.type] || 999;\n        const priorityB = this.eventPriorities[b.type] || 999;\n        return priorityA - priorityB;\n      });\n\n      // 处理队列中的事件\n      while (this.eventQueue.length > 0) {\n        const eventData = this.eventQueue.shift();\n        await this.processEvent(eventData);\n      }\n    } catch (error) {\n      if (this.errorManager) {\n        this.errorManager.handleError(error, {\n          context: 'RegistrationEventIntegration.processEventQueue',\n          severity: 'warning'\n        });\n      } else {\n        console.error('Event queue processing error:', error);\n      }\n    } finally {\n      this.isProcessingQueue = false;\n    }\n  }\n\n  /**\n   * 处理单个事件\n   */\n  async processEvent(eventData) {\n    const startTime = Date.now();\n    let success = false;\n\n    try {\n      // 获取事件监听器\n      const listeners = this.eventListeners.get(eventData.type) || [];\n      \n      if (listeners.length === 0) {\n        if (this.config.enableEventLogging) {\n          console.log(`No listeners for event: ${eventData.type}`);\n        }\n        return;\n      }\n\n      // 执行所有监听器\n      const promises = listeners.map(async (listener) => {\n        try {\n          if (typeof listener.handler === 'function') {\n            await listener.handler(eventData);\n          }\n        } catch (error) {\n          if (this.errorManager) {\n            this.errorManager.handleError(error, {\n              context: `RegistrationEventIntegration.listener.${eventData.type}`,\n              severity: 'warning'\n            });\n          } else {\n            console.error(`Event listener error for ${eventData.type}:`, error);\n          }\n          throw error;\n        }\n      });\n\n      await Promise.allSettled(promises);\n      success = true;\n\n    } catch (error) {\n      if (this.config.enableErrorRecovery && eventData.retryCount < this.config.maxRetries) {\n        eventData.retryCount = (eventData.retryCount || 0) + 1;\n        this.eventQueue.push(eventData);\n        this.eventStats.retryCount++;\n      } else {\n        this.eventStats.failedEvents++;\n        if (this.errorManager) {\n          this.errorManager.handleError(error, {\n            context: 'RegistrationEventIntegration.processEvent',\n            severity: 'error',\n            eventType: eventData.type\n          });\n        }\n      }\n    } finally {\n      const executionTime = Date.now() - startTime;\n      this.updateStats(eventData.type, success, executionTime);\n    }\n  }\n\n  /**\n   * 更新统计信息\n   */\n  updateStats(eventType, success, executionTime) {\n    this.eventStats.totalEvents++;\n    \n    if (success) {\n      this.eventStats.successfulEvents++;\n    }\n\n    // 更新事件类型统计\n    if (!this.eventStats.eventsByType[eventType]) {\n      this.eventStats.eventsByType[eventType] = 0;\n    }\n    this.eventStats.eventsByType[eventType]++;\n\n    // 更新平均执行时间\n    const totalEvents = this.eventStats.totalEvents;\n    const currentAverage = this.eventStats.averageExecutionTime;\n    this.eventStats.averageExecutionTime = \n      ((currentAverage * (totalEvents - 1)) + executionTime) / totalEvents;\n\n    // 性能警告\n    if (this.config.enablePerformanceMonitoring && executionTime > 1000) {\n      this.emit(this.eventTypes.PERFORMANCE_WARNING, {\n        eventType,\n        executionTime,\n        threshold: 1000\n      });\n    }\n  }\n\n  /**\n   * 添加事件监听器\n   */\n  on(eventType, handler, options = {}) {\n    if (!this.eventListeners.has(eventType)) {\n      this.eventListeners.set(eventType, []);\n    }\n\n    const listener = {\n      handler,\n      options,\n      id: this.generateListenerId(),\n      createdAt: new Date().toISOString()\n    };\n\n    this.eventListeners.get(eventType).push(listener);\n\n    if (this.config.enableEventLogging) {\n      console.log(`Event listener added for: ${eventType}`);\n    }\n\n    return listener.id;\n  }\n\n  /**\n   * 移除事件监听器\n   */\n  off(eventType, listenerId) {\n    if (!this.eventListeners.has(eventType)) {\n      return false;\n    }\n\n    const listeners = this.eventListeners.get(eventType);\n    const index = listeners.findIndex(l => l.id === listenerId);\n    \n    if (index !== -1) {\n      listeners.splice(index, 1);\n      if (this.config.enableEventLogging) {\n        console.log(`Event listener removed for: ${eventType}`);\n      }\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * 触发事件\n   */\n  emit(eventType, data = {}, options = {}) {\n    const eventData = {\n      type: eventType,\n      data,\n      timestamp: new Date().toISOString(),\n      id: this.generateEventId(),\n      source: 'RegistrationEventIntegration',\n      retryCount: 0,\n      ...options\n    };\n\n    // 立即处理高优先级事件\n    const priority = this.eventPriorities[eventType] || 999;\n    if (priority <= 3) {\n      this.processEvent(eventData);\n    } else {\n      this.eventQueue.push(eventData);\n    }\n\n    if (this.config.enableEventLogging) {\n      console.log(`Event emitted: ${eventType}`, data);\n    }\n\n    // 与现有事件系统集成\n    this.integrateWithExistingSystems(eventType, data);\n  }\n\n  /**\n   * 与现有事件系统集成\n   */\n  integrateWithExistingSystems(eventType, data) {\n    // 与registration-manager的事件总线集成\n    if (typeof window !== 'undefined' && window.registrationManager) {\n      try {\n        if (typeof window.registrationManager.emit === 'function') {\n          window.registrationManager.emit(eventType, data);\n        }\n      } catch (error) {\n        console.warn('Failed to integrate with registration manager events:', error);\n      }\n    }\n\n    // 与DOM事件系统集成\n    if (typeof window !== 'undefined' && window.document) {\n      try {\n        const customEvent = new CustomEvent(eventType, {\n          detail: data,\n          bubbles: true,\n          cancelable: true\n        });\n        window.document.dispatchEvent(customEvent);\n      } catch (error) {\n        console.warn('Failed to dispatch DOM event:', error);\n      }\n    }\n\n    // 与utils.js的EventDelegator集成\n    if (typeof window !== 'undefined' && window.eventDelegator) {\n      try {\n        if (typeof window.eventDelegator.emit === 'function') {\n          window.eventDelegator.emit(eventType, data);\n        }\n      } catch (error) {\n        console.warn('Failed to integrate with event delegator:', error);\n      }\n    }\n  }\n\n  /**\n   * 生成监听器ID\n   */\n  generateListenerId() {\n    return `listener_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * 生成事件ID\n   */\n  generateEventId() {\n    return `event_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * 获取事件统计信息\n   */\n  getStats() {\n    return { ...this.eventStats };\n  }\n\n  /**\n   * 获取所有事件类型\n   */\n  getEventTypes() {\n    return { ...this.eventTypes };\n  }\n\n  /**\n   * 清理资源\n   */\n  destroy() {\n    this.eventListeners.clear();\n    this.eventQueue.length = 0;\n    \n    if (this.config.enableEventLogging) {\n      console.log('RegistrationEventIntegration destroyed');\n    }\n  }\n\n  /**\n   * 注册流程专用方法\n   */\n\n  /**\n   * 触发注册开始事件\n   */\n  emitRegistrationStarted(userData) {\n    this.emit(this.eventTypes.REGISTRATION_STARTED, {\n      user: userData,\n      timestamp: new Date().toISOString()\n    });\n  }\n\n  /**\n   * 触发注册成功事件\n   */\n  emitRegistrationSuccess(userData, registrationResult) {\n    this.emit(this.eventTypes.REGISTRATION_SUCCESS, {\n      user: userData,\n      result: registrationResult,\n      timestamp: new Date().toISOString()\n    });\n  }\n\n  /**\n   * 触发注册失败事件\n   */\n  emitRegistrationFailed(userData, error) {\n    this.emit(this.eventTypes.REGISTRATION_FAILED, {\n      user: userData,\n      error: {\n        message: error.message,\n        type: error.type || 'unknown',\n        code: error.code\n      },\n      timestamp: new Date().toISOString()\n    });\n  }\n\n  /**\n   * 触发验证事件\n   */\n  emitValidationEvent(type, field, value, result) {\n    const eventType = result.isValid ? \n      this.eventTypes.REGISTRATION_VALIDATION_SUCCESS : \n      this.eventTypes.REGISTRATION_VALIDATION_FAILED;\n    \n    this.emit(eventType, {\n      field,\n      value,\n      result,\n      timestamp: new Date().toISOString()\n    });\n  }\n\n  /**\n   * 触发安全检查事件\n   */\n  emitSecurityEvent(type, checkType, result) {\n    const eventType = result.passed ? \n      this.eventTypes.REGISTRATION_SECURITY_CHECK_SUCCESS : \n      this.eventTypes.REGISTRATION_SECURITY_CHECK_FAILED;\n    \n    this.emit(eventType, {\n      checkType,\n      result,\n      timestamp: new Date().toISOString()\n    });\n  }\n\n  /**\n   * 触发唯一性检查事件\n   */\n  emitUniquenessEvent(field, value, result) {\n    const eventType = result.isUnique ? \n      this.eventTypes.REGISTRATION_UNIQUENESS_CHECK_SUCCESS : \n      this.eventTypes.REGISTRATION_UNIQUENESS_CHECK_FAILED;\n    \n    this.emit(eventType, {\n      field,\n      value,\n      result,\n      timestamp: new Date().toISOString()\n    });\n  }\n\n  /**\n   * 触发存储事件\n   */\n  emitStorageEvent(operation, result) {\n    const eventType = result.success ? \n      this.eventTypes.REGISTRATION_STORAGE_SUCCESS : \n      this.eventTypes.REGISTRATION_STORAGE_FAILED;\n    \n    this.emit(eventType, {\n      operation,\n      result,\n      timestamp: new Date().toISOString()\n    });\n  }\n}\n\n// 创建全局实例\nif (typeof window !== 'undefined') {\n  window.RegistrationEventIntegration = RegistrationEventIntegration;\n  \n  // 创建默认实例\n  if (!window.registrationEventIntegration) {\n    window.registrationEventIntegration = new RegistrationEventIntegration();\n  }\n}\n\n// 导出模块\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = { RegistrationEventIntegration };\n}","usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\auth\\registration-manager.js","messages":[{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":16,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":16,"endColumn":7,"fix":{"range":[425,431],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":20,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":20,"endColumn":7,"fix":{"range":[547,553],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":25,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":25,"endColumn":7,"fix":{"range":[784,790],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":30,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":30,"endColumn":7,"fix":{"range":[997,1003],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":44,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":44,"endColumn":5,"fix":{"range":[1332,1336],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":48,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":48,"endColumn":5,"fix":{"range":[1433,1437],"text":""}},{"ruleId":"no-undef","severity":2,"message":"'UniquenessChecker' is not defined.","line":92,"column":36,"nodeType":"Identifier","messageId":"undef","endLine":92,"endColumn":53},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":152,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":152,"endColumn":5,"fix":{"range":[4773,4777],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":176,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":176,"endColumn":5,"fix":{"range":[5731,5735],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":188,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":188,"endColumn":5,"fix":{"range":[5964,5968],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":193,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":193,"endColumn":5,"fix":{"range":[6129,6133],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":198,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":198,"endColumn":5,"fix":{"range":[6291,6295],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":203,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":203,"endColumn":5,"fix":{"range":[6452,6456],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":217,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":217,"endColumn":5,"fix":{"range":[6797,6801],"text":""}},{"ruleId":"no-else-return","severity":2,"message":"Unnecessary 'else' after 'return'.","line":226,"column":12,"nodeType":"BlockStatement","messageId":"unexpected","endLine":229,"endColumn":6,"fix":{"range":[6726,7179],"text":"(userData) {\n    const registrationId = this.generateRegistrationId();\n    \n    // 使用容错机制包装整个注册流程\n    if (this.resilienceManager) {\n      return await this.resilienceManager.handleRegistrationWithDegradation(\n        userData,\n        async (data) => {\n          return await this.performRegistration(registrationId, data);\n        }\n      );\n    } \n      // 降级到直接执行\n      return await this.performRegistration(registrationId, userData);\n    \n  }"}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":240,"column":57,"nodeType":"Program","messageId":"trailingSpace","endLine":240,"endColumn":58,"fix":{"range":[7450,7451],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":242,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":242,"endColumn":5,"fix":{"range":[7537,7541],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":250,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":250,"endColumn":7,"fix":{"range":[7812,7818],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":253,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":253,"endColumn":7,"fix":{"range":[7894,7900],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":258,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":258,"endColumn":7,"fix":{"range":[8074,8080],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":263,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":263,"endColumn":7,"fix":{"range":[8257,8263],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":268,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":268,"endColumn":7,"fix":{"range":[8463,8469],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":276,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":276,"endColumn":7,"fix":{"range":[8774,8780],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":281,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":281,"endColumn":7,"fix":{"range":[8998,9004],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":286,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":286,"endColumn":7,"fix":{"range":[9198,9204],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":293,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":293,"endColumn":7,"fix":{"range":[9391,9397],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":301,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":301,"endColumn":7,"fix":{"range":[9616,9622],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":310,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":310,"endColumn":7,"fix":{"range":[9840,9846],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":323,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":323,"endColumn":7,"fix":{"range":[10181,10187],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":354,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":354,"endColumn":5,"fix":{"range":[10868,10872],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":363,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":363,"endColumn":5,"fix":{"range":[11093,11097],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":383,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":383,"endColumn":5,"fix":{"range":[11606,11610],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":398,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":398,"endColumn":7,"fix":{"range":[12142,12148],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":405,"column":62,"nodeType":"Program","messageId":"trailingSpace","endLine":405,"endColumn":63,"fix":{"range":[12409,12410],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":430,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":430,"endColumn":5,"fix":{"range":[13056,13060],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":437,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":437,"endColumn":5,"fix":{"range":[13236,13240],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":442,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":442,"endColumn":5,"fix":{"range":[13389,13393],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":471,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":471,"endColumn":5,"fix":{"range":[14092,14096],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":481,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":481,"endColumn":5,"fix":{"range":[14331,14335],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":538,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":538,"endColumn":7,"fix":{"range":[15848,15854],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":563,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":563,"endColumn":5,"fix":{"range":[16355,16359],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":604,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":604,"endColumn":5,"fix":{"range":[17383,17387],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":632,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":632,"endColumn":5,"fix":{"range":[17996,18000],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":646,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":646,"endColumn":5,"fix":{"range":[18270,18274],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":665,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":665,"endColumn":7,"fix":{"range":[18796,18802],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":668,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":668,"endColumn":9,"fix":{"range":[18912,18920],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":676,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":676,"endColumn":9,"fix":{"range":[19151,19159],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":681,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":681,"endColumn":7,"fix":{"range":[19217,19223],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":696,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":696,"endColumn":7,"fix":{"range":[19666,19672],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":714,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":714,"endColumn":7,"fix":{"range":[20116,20122],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":722,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":722,"endColumn":7,"fix":{"range":[20321,20327],"text":""}},{"ruleId":"prefer-const","severity":2,"message":"'userIndex' is never reassigned. Use 'const' instead.","line":732,"column":11,"nodeType":"Identifier","messageId":"useConst","endLine":732,"endColumn":20,"fix":{"range":[20441,20599],"text":"const userIndex = await this.storageManager.retrieve('user_index') || {\n        byUsername: {},\n        byEmail: {},\n        byId: {},\n        count: 0\n      };"}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":839,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":839,"endColumn":5,"fix":{"range":[22880,22884],"text":""}},{"ruleId":"eol-last","severity":2,"message":"Newline required at end of file but not found.","line":898,"column":2,"nodeType":"Program","messageId":"missing","fix":{"range":[24406,24406],"text":"\n"}}],"suppressedMessages":[],"errorCount":54,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":53,"fixableWarningCount":0,"source":"/**\n * 用户注册流程管理器\n * 整合验证、安全、唯一性检查，实现完整注册流程\n * @author AI Assistant\n * @version 1.0\n * @date 2025-01-12\n */\n\nclass RegistrationManager {\n  constructor(options = {}) {\n    this.config = {\n      // 注册流程配置\n      enableEmailVerification: options.enableEmailVerification !== false,\n      enableUsernameReservation: options.enableUsernameReservation !== false,\n      reservationTimeout: options.reservationTimeout || 300000, // 5分钟\n      \n      // 重试配置\n      maxRetryAttempts: options.maxRetryAttempts || 3,\n      retryDelay: options.retryDelay || 1000,\n      \n      // 安全配置\n      enableRateLimiting: options.enableRateLimiting !== false,\n      enableConcurrencyControl: options.enableConcurrencyControl !== false,\n      enableSecurityProtection: options.enableSecurityProtection !== false,\n      \n      // 存储配置\n      enableDataStorage: options.enableDataStorage !== false,\n      enableDataPersistence: options.enableDataPersistence !== false,\n      enableDataBackup: options.enableDataBackup !== false,\n      \n      ...options\n    };\n\n    // 依赖模块\n    this.inputValidator = null;\n    this.passwordSecurity = null;\n    this.uniquenessChecker = null;\n    this.apiManager = null;\n    this.eventBus = null;\n    this.securityManager = null;\n    this.storageManager = null;\n    this.resilienceManager = null;\n    this.performanceMonitor = null;\n    \n    // 注册状态跟踪\n    this.registrationState = new Map();\n    this.activeRegistrations = new Set();\n    \n    // 初始化\n    this.initialize();\n  }\n\n  /**\n   * 初始化注册管理器\n   */\n  initialize() {\n    try {\n      this.initializeDependencies();\n      this.setupEventListeners();\n      console.log('注册管理器初始化完成');\n    } catch (error) {\n      console.error('注册管理器初始化失败:', error);\n      throw new Error('注册管理器初始化失败');\n    }\n  }\n\n  /**\n   * 初始化依赖模块\n   */\n  initializeDependencies() {\n    // 输入验证模块\n    if (typeof window !== 'undefined' && window.RealTimeValidationManager) {\n      this.inputValidator = new window.RealTimeValidationManager({\n        enableRealTimeValidation: true,\n        showValidationMessages: true\n      });\n    } else {\n      console.warn('RealTimeValidationManager not available');\n    }\n\n    // 密码安全模块\n    if (typeof window !== 'undefined' && window.PasswordSecurityManager) {\n      this.passwordSecurity = new window.PasswordSecurityManager();\n    } else {\n      console.warn('PasswordSecurityManager not available');\n    }\n\n    // 用户唯一性检查模块\n    if (typeof window !== 'undefined' && window.UniquenessChecker) {\n      this.uniquenessChecker = new window.UniquenessChecker();\n    } else if (typeof UniquenessChecker !== 'undefined') {\n      this.uniquenessChecker = new UniquenessChecker();\n    } else {\n      console.warn('UniquenessChecker not available');\n    }\n\n    // API管理模块\n    if (typeof window !== 'undefined' && window.APIIntegrationManager) {\n      this.apiManager = new window.APIIntegrationManager();\n    } else {\n      console.warn('APIIntegrationManager not available');\n    }\n\n    // 安全管理模块\n    if (typeof window !== 'undefined' && window.SecurityManager) {\n      this.securityManager = new window.SecurityManager({\n        enableRateLimiting: this.config.enableRateLimiting,\n        enableConcurrencyControl: this.config.enableConcurrencyControl\n      });\n    } else {\n      console.warn('SecurityManager not available');\n    }\n\n    // 存储管理模块\n    if (typeof window !== 'undefined' && window.StorageManager) {\n      this.storageManager = new window.StorageManager({\n        enableLocalStorage: true,\n        enableIndexedDB: true,\n        enableDataValidation: true,\n        enableBackup: this.config.enableDataBackup,\n        enableEncryption: this.config.enableSecurityProtection\n      });\n    } else {\n      console.warn('StorageManager not available');\n    }\n\n    // 容错管理模块\n    if (typeof window !== 'undefined' && window.RegistrationResilienceManager) {\n      this.resilienceManager = new window.RegistrationResilienceManager({\n        maxRetries: this.config.maxRetryAttempts || 3,\n        baseDelay: this.config.retryDelay || 1000,\n        enableLogging: this.config.enableLogging !== false\n      });\n    } else {\n      console.warn('RegistrationResilienceManager not available');\n    }\n\n    // 性能监控模块\n    if (typeof window !== 'undefined' && window.PerformanceMonitor) {\n      this.performanceMonitor = new window.PerformanceMonitor({\n        enableMetrics: this.config.enablePerformanceMonitoring !== false,\n        enableProfiling: this.config.enableProfiling || false,\n        enableReporting: this.config.enablePerformanceReporting || false,\n        reportingInterval: this.config.performanceReportingInterval || 60000\n      });\n    } else {\n      console.warn('PerformanceMonitor not available');\n    }\n\n    // 事件总线 - 集成新的事件系统\n    this.eventBus = (typeof window !== 'undefined' ? window : global) || {};\n    \n    // 初始化事件集成系统\n    if (typeof window !== 'undefined' && window.RegistrationEventIntegration) {\n      this.eventIntegration = new window.RegistrationEventIntegration({\n        enableEventLogging: this.config.enableEventLogging,\n        enablePerformanceMonitoring: this.config.enablePerformanceMonitoring,\n        enableErrorRecovery: true\n      });\n    } else {\n      console.warn('RegistrationEventIntegration not available');\n    }\n  }\n\n  /**\n   * 设置事件监听器\n   */\n  setupEventListeners() {\n    if (typeof document !== 'undefined') {\n      // 监听注册相关事件\n      document.addEventListener('registration:start', this.handleRegistrationStart.bind(this));\n      document.addEventListener('registration:validate', this.handleRegistrationValidate.bind(this));\n      document.addEventListener('registration:submit', this.handleRegistrationSubmit.bind(this));\n      document.addEventListener('registration:cancel', this.handleRegistrationCancel.bind(this));\n    }\n    \n    // 设置新事件系统的监听器\n    if (this.eventIntegration) {\n      this.setupAdvancedEventListeners();\n    }\n  }\n\n  /**\n   * 设置高级事件监听器\n   */\n  setupAdvancedEventListeners() {\n    const eventTypes = this.eventIntegration.getEventTypes();\n    \n    // 注册成功事件监听\n    this.eventIntegration.on(eventTypes.REGISTRATION_SUCCESS, (eventData) => {\n      this.handleAdvancedRegistrationSuccess(eventData);\n    });\n    \n    // 注册失败事件监听\n    this.eventIntegration.on(eventTypes.REGISTRATION_FAILED, (eventData) => {\n      this.handleAdvancedRegistrationError(eventData);\n    });\n    \n    // 验证事件监听\n    this.eventIntegration.on(eventTypes.REGISTRATION_VALIDATION_FAILED, (eventData) => {\n      this.handleValidationError(eventData);\n    });\n    \n    // 性能警告监听\n    this.eventIntegration.on(eventTypes.PERFORMANCE_WARNING, (eventData) => {\n      this.handlePerformanceWarning(eventData);\n    });\n  }\n\n  /**\n   * 完整注册流程\n   * @param {Object} userData - 用户注册数据\n   * @returns {Promise<Object>} 注册结果\n   */\n  async register(userData) {\n    const registrationId = this.generateRegistrationId();\n    \n    // 使用容错机制包装整个注册流程\n    if (this.resilienceManager) {\n      return await this.resilienceManager.handleRegistrationWithDegradation(\n        userData,\n        async (data) => {\n          return await this.performRegistration(registrationId, data);\n        }\n      );\n    } else {\n      // 降级到直接执行\n      return await this.performRegistration(registrationId, userData);\n    }\n  }\n\n  /**\n   * 执行注册流程\n   * @param {string} registrationId - 注册ID\n   * @param {Object} userData - 用户注册数据\n   * @returns {Promise<Object>} 注册结果\n   */\n  async performRegistration(registrationId, userData) {\n    // 开始性能监控\n    const performanceSession = this.performanceMonitor ? \n      this.performanceMonitor.startSession(`registration_${registrationId}`) : null;\n    \n    try {\n      // 1. 安全检查\n      if (this.config.enableSecurityProtection && this.securityManager) {\n        const securityTimer = performanceSession?.startTimer('security_check');\n        await this.performSecurityCheck(userData);\n        securityTimer?.end();\n      }\n      \n      // 2. 开始注册流程\n      this.startRegistration(registrationId, userData);\n      \n      // 3. 输入数据验证\n      const validationTimer = performanceSession?.startTimer('input_validation');\n      await this.validateInput(userData);\n      validationTimer?.end();\n      \n      // 4. 用户唯一性检查\n      const uniquenessTimer = performanceSession?.startTimer('uniqueness_check');\n      await this.checkUniqueness(userData);\n      uniquenessTimer?.end();\n      \n      // 5. 密码安全处理\n      const passwordTimer = performanceSession?.startTimer('password_security');\n      const secureData = await this.processPasswordSecurity(userData);\n      passwordTimer?.end();\n      \n      // 6. 预留用户名和邮箱（可选）\n      let reservationId = null;\n      if (this.config.enableUsernameReservation) {\n        const reservationTimer = performanceSession?.startTimer('identity_reservation');\n        reservationId = await this.reserveUserIdentity(userData);\n        reservationTimer?.end();\n      }\n      \n      // 7. 提交注册请求\n      const submissionTimer = performanceSession?.startTimer('registration_submission');\n      const result = await this.submitRegistration(secureData, reservationId);\n      submissionTimer?.end();\n      \n      // 8. 处理注册成功\n      const successTimer = performanceSession?.startTimer('success_handling');\n      await this.handleRegistrationSuccess(registrationId, result);\n      successTimer?.end();\n      \n      // 结束性能监控会话\n      performanceSession?.end({\n        success: true,\n        userId: result.user?.id,\n        registrationMethod: userData.registrationMethod || 'standard'\n      });\n      \n      return {\n        success: true,\n        registrationId,\n        user: result.user,\n        message: result.message || '注册成功',\n        requiresEmailVerification: result.requiresEmailVerification || false\n      };\n      \n    } catch (error) {\n      // 记录性能监控错误\n      performanceSession?.recordError({\n        error: error.message,\n        errorType: error.constructor.name,\n        registrationId,\n        timestamp: Date.now()\n      });\n      \n      // 处理注册失败\n      await this.handleRegistrationError(registrationId, error);\n      throw error;\n    } finally {\n      // 结束性能监控会话（如果还未结束）\n      if (performanceSession && !performanceSession.isEnded) {\n        performanceSession.end({\n          success: false,\n          registrationId,\n          aborted: true\n        });\n      }\n      \n      // 清理注册状态\n      this.cleanupRegistration(registrationId);\n    }\n  }\n\n  /**\n   * 生成注册ID\n   */\n  generateRegistrationId() {\n    return `reg_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * 开始注册流程\n   */\n  startRegistration(registrationId, userData) {\n    // 检查并发限制\n    if (this.config.enableConcurrencyControl && this.activeRegistrations.size >= 10) {\n      throw new Error('系统繁忙，请稍后重试');\n    }\n\n    // 记录注册状态\n    this.registrationState.set(registrationId, {\n      startTime: Date.now(),\n      userData: { ...userData, password: '[HIDDEN]' }, // 隐藏密码\n      status: 'started',\n      steps: []\n    });\n\n    this.activeRegistrations.add(registrationId);\n    \n    // 触发注册开始事件 - 使用新事件系统\n    if (this.eventIntegration) {\n      this.eventIntegration.emitRegistrationStarted({\n        registrationId,\n        username: userData.username,\n        email: userData.email\n      });\n    }\n    \n    // 保持向后兼容\n    this.dispatchEvent('registration:started', {\n      registrationId,\n      timestamp: Date.now()\n    });\n  }\n\n  /**\n   * 执行安全检查\n   * @param {Object} userData - 用户数据\n   * @returns {Promise<void>}\n   */\n  async performSecurityCheck(userData) {\n    // 触发安全检查开始事件\n    if (this.eventIntegration) {\n      this.eventIntegration.emit(this.eventIntegration.getEventTypes().REGISTRATION_SECURITY_CHECK_STARTED, {\n        userData: { username: userData.username, email: userData.email }\n      });\n    }\n    \n    if (!this.securityManager) {\n      console.warn('SecurityManager not available, skipping security check');\n      return;\n    }\n\n    try {\n      // 验证输入数据的安全性\n      const securityResult = this.securityManager.validateSecurityRules(userData, {\n        username: { escapeHtml: true, maxLength: 50 },\n        email: { escapeHtml: true, maxLength: 100 },\n        password: { escapeHtml: false, maxLength: 200 },\n        firstName: { escapeHtml: true, maxLength: 50 },\n        lastName: { escapeHtml: true, maxLength: 50 }\n      });\n      \n      // 触发安全检查结果事件\n      if (this.eventIntegration) {\n        this.eventIntegration.emitSecurityEvent('registration', 'comprehensive', securityResult);\n      }\n\n      if (!securityResult.isValid) {\n        const violations = securityResult.violations.map(v => \n          `${v.field}: ${v.violations.join(', ')}`\n        ).join('; ');\n        throw new Error(`Security validation failed: ${violations}`);\n      }\n\n      // 更新用户数据为清理后的数据\n      Object.assign(userData, securityResult.sanitizedData);\n\n    } catch (error) {\n      console.error('Security check failed:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * 输入数据验证\n   */\n  async validateInput(userData) {\n    // 触发验证开始事件\n    if (this.eventIntegration) {\n      this.eventIntegration.emit(this.eventIntegration.getEventTypes().REGISTRATION_VALIDATION_STARTED, {\n        userData: { username: userData.username, email: userData.email }\n      });\n    }\n    \n    if (!this.inputValidator) {\n      throw new Error('输入验证模块未初始化');\n    }\n\n    // 验证注册表单\n    const validationResult = this.inputValidator.validateRegistrationForm(userData);\n    \n    // 触发验证结果事件\n    if (this.eventIntegration) {\n      this.eventIntegration.emitValidationEvent('input', 'all', userData, validationResult);\n    }\n    \n    if (!validationResult.isValid) {\n      const errors = validationResult.errors.join(', ');\n      throw new Error(`输入验证失败: ${errors}`);\n    }\n\n    // 验证密码确认\n    if (userData.password !== userData.confirmPassword) {\n      throw new Error('密码和确认密码不匹配');\n    }\n\n    // 验证服务条款同意\n    if (!userData.agreeTerms) {\n      throw new Error('请同意服务条款');\n    }\n\n    return validationResult;\n  }\n\n  /**\n   * 用户唯一性检查\n   */\n  async checkUniqueness(userData) {\n    // 触发唯一性检查开始事件\n    if (this.eventIntegration) {\n      this.eventIntegration.emit(this.eventIntegration.getEventTypes().REGISTRATION_UNIQUENESS_CHECK_STARTED, {\n        userData: { username: userData.username, email: userData.email }\n      });\n    }\n    \n    if (!this.uniquenessChecker) {\n      throw new Error('唯一性检查模块未初始化');\n    }\n\n    // 批量检查用户名和邮箱唯一性\n    const uniquenessResult = await this.uniquenessChecker.checkBatchUniqueness(\n      userData.username,\n      userData.email\n    );\n    \n    // 触发唯一性检查结果事件\n    if (this.eventIntegration) {\n      this.eventIntegration.emitUniquenessEvent('username', userData.username, uniquenessResult);\n      this.eventIntegration.emitUniquenessEvent('email', userData.email, uniquenessResult);\n    }\n\n    if (!uniquenessResult.isValid) {\n      const errors = uniquenessResult.errors.join(', ');\n      throw new Error(`唯一性检查失败: ${errors}`);\n    }\n\n    return uniquenessResult;\n  }\n\n  /**\n   * 密码安全处理\n   */\n  async processPasswordSecurity(userData) {\n    if (!this.passwordSecurity) {\n      throw new Error('密码安全模块未初始化');\n    }\n\n    // 密码强度检查\n    const strengthResult = this.passwordSecurity.checkPasswordStrength(userData.password);\n    if (strengthResult.score < 60) {\n      throw new Error(`密码强度不足: ${strengthResult.feedback.join(', ')}`);\n    }\n\n    // 密码哈希处理\n    const passwordHash = await this.passwordSecurity.hashPassword(userData.password);\n\n    // 构建安全的用户数据\n    return {\n      username: userData.username.trim(),\n      email: userData.email.trim().toLowerCase(),\n      passwordHash,\n      agreeTerms: userData.agreeTerms,\n      createdAt: new Date().toISOString(),\n      deviceInfo: this.getDeviceInfo()\n    };\n  }\n\n  /**\n   * 预留用户身份\n   */\n  async reserveUserIdentity(userData) {\n    if (!this.uniquenessChecker || !this.uniquenessChecker.reserveUser) {\n      console.warn('用户预留功能不可用');\n      return null;\n    }\n\n    try {\n      const reservationResult = await this.uniquenessChecker.reserveUser(\n        userData.username,\n        userData.email\n      );\n      \n      return reservationResult.reservationId;\n    } catch (error) {\n      console.warn('用户预留失败:', error.message);\n      return null;\n    }\n  }\n\n  /**\n   * 提交注册请求\n   */\n  async submitRegistration(secureData, reservationId = null) {\n    if (!this.apiManager) {\n      throw new Error('API管理模块未初始化');\n    }\n\n    // 准备请求数据\n    const requestData = {\n      ...secureData,\n      reservationId,\n      timestamp: Date.now()\n    };\n\n    // 发送注册请求\n    const result = await this.apiManager.register(requestData);\n    \n    if (!result.success) {\n      throw new Error(result.message || '注册请求失败');\n    }\n\n    // 数据持久化处理\n    if (this.config.enableDataPersistence && this.storageManager) {\n      await this.handleDataPersistence(secureData, result);\n    }\n\n    return result;\n  }\n\n  /**\n   * 处理注册成功\n   */\n  async handleRegistrationSuccess(registrationId, result) {\n    // 更新注册状态\n    const state = this.registrationState.get(registrationId);\n    if (state) {\n      state.status = 'completed';\n      state.completedAt = Date.now();\n      state.result = result;\n    }\n\n    // 确认用户预留（如果有）\n    if (result.reservationId && this.uniquenessChecker && this.uniquenessChecker.confirmReservation) {\n      try {\n        await this.uniquenessChecker.confirmReservation(result.reservationId);\n      } catch (error) {\n        console.warn('确认用户预留失败:', error.message);\n      }\n    }\n\n    // 触发成功事件 - 使用新事件系统\n    if (this.eventIntegration) {\n      this.eventIntegration.emitRegistrationSuccess(\n        state ? state.userData : {},\n        result\n      );\n    }\n    \n    // 保持向后兼容\n    this.dispatchEvent('registration:success', {\n      registrationId,\n      user: result.user,\n      timestamp: Date.now()\n    });\n  }\n\n  /**\n   * 处理注册错误\n   */\n  async handleRegistrationError(registrationId, error) {\n    // 更新注册状态\n    const state = this.registrationState.get(registrationId);\n    if (state) {\n      state.status = 'failed';\n      state.failedAt = Date.now();\n      state.error = error.message;\n    }\n\n    // 触发错误事件 - 使用新事件系统\n    if (this.eventIntegration) {\n      this.eventIntegration.emitRegistrationFailed(\n        state ? state.userData : {},\n        error\n      );\n    }\n    \n    // 保持向后兼容\n    this.dispatchEvent('registration:error', {\n      registrationId,\n      error: error.message,\n      timestamp: Date.now()\n    });\n  }\n\n  /**\n   * 清理注册状态\n   */\n  cleanupRegistration(registrationId) {\n    this.activeRegistrations.delete(registrationId);\n    \n    // 延迟清理注册状态（保留一段时间用于调试）\n    setTimeout(() => {\n      this.registrationState.delete(registrationId);\n    }, 300000); // 5分钟后清理\n  }\n\n  /**\n   * 数据持久化处理\n   */\n  async handleDataPersistence(userData, registrationResult) {\n    try {\n      // 触发存储开始事件\n      if (this.eventIntegration) {\n        this.eventIntegration.emit(this.eventIntegration.getEventTypes().REGISTRATION_STORAGE_STARTED, {\n          userId: registrationResult.user?.id || this.generateUserId(),\n          operation: 'store_user_data'\n        });\n      }\n      \n      if (!this.storageManager) {\n        console.warn('StorageManager not available for data persistence');\n        \n        // 触发存储失败事件\n        if (this.eventIntegration) {\n          this.eventIntegration.emitStorageEvent('store_user_data', {\n            success: false,\n            reason: 'StorageManager not available'\n          });\n        }\n        \n        return;\n      }\n\n      console.log('开始数据持久化处理');\n      \n      // 保存用户基本信息\n      const userRecord = {\n        id: registrationResult.user?.id || this.generateUserId(),\n        username: userData.username,\n        email: userData.email,\n        createdAt: new Date().toISOString(),\n        status: 'active'\n      };\n\n      await this.storageManager.store(`user_${userRecord.id}`, userRecord, {\n        persistent: true,\n        encrypted: true,\n        backup: this.config.enableDataBackup\n      });\n      \n      // 触发存储成功事件\n      if (this.eventIntegration) {\n        this.eventIntegration.emitStorageEvent('store_user_data', {\n          success: true,\n          userId: userRecord.id\n        });\n      }\n\n      // 更新用户索引\n      await this.updateUserIndex(userRecord);\n\n      // 记录用户活动\n      await this.recordUserActivity(userRecord.id, 'registration');\n\n      console.log('数据持久化处理完成');\n    } catch (error) {\n      console.error('数据持久化处理失败:', error);\n      \n      // 触发存储失败事件\n      if (this.eventIntegration) {\n        this.eventIntegration.emitStorageEvent('store_user_data', {\n          success: false,\n          error: error.message\n        });\n      }\n      \n      // 持久化失败不应该影响注册流程\n    }\n  }\n\n  /**\n   * 更新用户索引\n   */\n  async updateUserIndex(userRecord) {\n    try {\n      let userIndex = await this.storageManager.retrieve('user_index') || {\n        byUsername: {},\n        byEmail: {},\n        byId: {},\n        count: 0\n      };\n\n      userIndex.byUsername[userRecord.username] = userRecord.id;\n      userIndex.byEmail[userRecord.email] = userRecord.id;\n      userIndex.byId[userRecord.id] = {\n        username: userRecord.username,\n        email: userRecord.email,\n        createdAt: userRecord.createdAt,\n        status: userRecord.status\n      };\n      userIndex.count++;\n\n      await this.storageManager.store('user_index', userIndex, {\n        persistent: true,\n        encrypted: false,\n        backup: true\n      });\n    } catch (error) {\n      console.error('用户索引更新失败:', error);\n    }\n  }\n\n  /**\n   * 记录用户活动\n   */\n  async recordUserActivity(userId, activity) {\n    try {\n      const activityRecord = {\n        userId,\n        activity,\n        timestamp: new Date().toISOString(),\n        deviceInfo: this.getDeviceInfo()\n      };\n\n      let activities = await this.storageManager.retrieve(`activities_${userId}`) || [];\n      activities.push(activityRecord);\n\n      // 保持最近100条记录\n      if (activities.length > 100) {\n        activities = activities.slice(-100);\n      }\n\n      await this.storageManager.store(`activities_${userId}`, activities, {\n        persistent: true,\n        encrypted: true,\n        backup: false\n      });\n    } catch (error) {\n      console.error('用户活动记录失败:', error);\n    }\n  }\n\n  /**\n   * 生成用户ID\n   */\n  generateUserId() {\n    return `user_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * 获取设备信息\n   */\n  getDeviceInfo() {\n    if (typeof navigator === 'undefined') {\n      return { platform: 'server', userAgent: 'node.js' };\n    }\n\n    return {\n      platform: navigator.platform,\n      userAgent: navigator.userAgent,\n      language: navigator.language,\n      timestamp: Date.now()\n    };\n  }\n\n  /**\n   * 触发事件\n   */\n  dispatchEvent(eventName, detail) {\n    if (typeof document !== 'undefined') {\n      const event = new CustomEvent(eventName, { detail });\n      document.dispatchEvent(event);\n    }\n  }\n\n  /**\n   * 事件处理器\n   */\n  handleRegistrationStart(event) {\n    console.log('注册开始:', event.detail);\n  }\n\n  handleRegistrationValidate(event) {\n    console.log('注册验证:', event.detail);\n  }\n\n  handleRegistrationSubmit(event) {\n    console.log('注册提交:', event.detail);\n  }\n\n  handleRegistrationCancel(event) {\n    console.log('注册取消:', event.detail);\n    \n    // 清理相关状态\n    const { registrationId } = event.detail;\n    if (registrationId) {\n      this.cleanupRegistration(registrationId);\n    }\n  }\n\n  /**\n   * 获取注册统计信息\n   */\n  getRegistrationStats() {\n    const stats = {\n      activeRegistrations: this.activeRegistrations.size,\n      totalRegistrations: this.registrationState.size,\n      completedRegistrations: 0,\n      failedRegistrations: 0\n    };\n\n    for (const state of this.registrationState.values()) {\n      if (state.status === 'completed') {\n        stats.completedRegistrations++;\n      } else if (state.status === 'failed') {\n        stats.failedRegistrations++;\n      }\n    }\n\n    // 添加性能监控统计信息\n    if (this.performanceMonitor) {\n      const performanceStats = this.performanceMonitor.getStats();\n      stats.performance = {\n        averageRegistrationTime: performanceStats.averageSessionDuration || 0,\n        totalSessions: performanceStats.totalSessions || 0,\n        errorRate: performanceStats.errorRate || 0,\n        slowestOperations: performanceStats.slowestOperations || [],\n        memoryUsage: performanceStats.memoryUsage || {},\n        lastReportTime: performanceStats.lastReportTime || null\n      };\n    }\n\n    return stats;\n  }\n\n  /**\n   * 重置注册管理器\n   */\n  reset() {\n    this.registrationState.clear();\n    this.activeRegistrations.clear();\n  }\n}\n\n// 导出模块\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = RegistrationManager;\n}\n\nif (typeof window !== 'undefined') {\n  window.RegistrationManager = RegistrationManager;\n}","usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\auth\\registration-resilience.js","messages":[{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":4,"column":3,"nodeType":"Program","messageId":"trailingSpace","endLine":4,"endColumn":4,"fix":{"range":[48,49],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":21,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":21,"endColumn":7,"fix":{"range":[362,368],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":26,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":26,"endColumn":7,"fix":{"range":[478,484],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":30,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":30,"endColumn":7,"fix":{"range":[564,570],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":34,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":34,"endColumn":7,"fix":{"range":[639,645],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":40,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":40,"endColumn":5,"fix":{"range":[718,722],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":43,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":43,"endColumn":5,"fix":{"range":[774,778],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":46,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":46,"endColumn":5,"fix":{"range":[835,839],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":68,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":68,"endColumn":5,"fix":{"range":[1220,1224],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":237,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":237,"endColumn":5,"fix":{"range":[5896,5900],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":248,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":248,"endColumn":9,"fix":{"range":[6188,6196],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":254,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":254,"endColumn":9,"fix":{"range":[6387,6395],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":257,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":257,"endColumn":9,"fix":{"range":[6459,6467],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":261,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":261,"endColumn":9,"fix":{"range":[6549,6557],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":266,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":266,"endColumn":9,"fix":{"range":[6691,6699],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":271,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":271,"endColumn":11,"fix":{"range":[6851,6861],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":275,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":275,"endColumn":11,"fix":{"range":[7027,7037],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":278,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":278,"endColumn":9,"fix":{"range":[7071,7079],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":281,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":281,"endColumn":9,"fix":{"range":[7146,7154],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":287,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":287,"endColumn":9,"fix":{"range":[7322,7330],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":291,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":291,"endColumn":9,"fix":{"range":[7506,7514],"text":""}},{"ruleId":"no-unused-vars","severity":2,"message":"'options' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":300,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":300,"endColumn":45},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":306,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":306,"endColumn":5,"fix":{"range":[7841,7845],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":359,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":359,"endColumn":5,"fix":{"range":[9285,9289],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":364,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":364,"endColumn":5,"fix":{"range":[9420,9424],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":369,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":369,"endColumn":5,"fix":{"range":[9579,9583],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":379,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":379,"endColumn":5,"fix":{"range":[9803,9807],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":386,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":386,"endColumn":5,"fix":{"range":[9965,9969],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":388,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":388,"endColumn":5,"fix":{"range":[10059,10063],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":392,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":392,"endColumn":5,"fix":{"range":[10182,10186],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":408,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":408,"endColumn":7,"fix":{"range":[10545,10551],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":415,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":415,"endColumn":7,"fix":{"range":[10734,10740],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":425,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":425,"endColumn":7,"fix":{"range":[10978,10984],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":427,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":427,"endColumn":7,"fix":{"range":[11070,11076],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":437,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":437,"endColumn":5,"fix":{"range":[11191,11195],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":441,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":441,"endColumn":5,"fix":{"range":[11314,11318],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":457,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":457,"endColumn":5,"fix":{"range":[11628,11632],"text":""}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":460,"column":31,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":460,"endColumn":40,"fix":{"range":[11737,11746],"text":"{continue;}"}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":461,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":461,"endColumn":7,"fix":{"range":[11747,11753],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":484,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":484,"endColumn":9,"fix":{"range":[12403,12411],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":487,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":487,"endColumn":11,"fix":{"range":[12577,12587],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":491,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":491,"endColumn":11,"fix":{"range":[12677,12687],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":551,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":551,"endColumn":5,"fix":{"range":[13911,13915],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":561,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":561,"endColumn":3,"fix":{"range":[14147,14149],"text":""}},{"ruleId":"eol-last","severity":2,"message":"Newline required at end of file but not found.","line":571,"column":2,"nodeType":"Program","messageId":"missing","fix":{"range":[14414,14414],"text":"\n"}}],"suppressedMessages":[],"errorCount":45,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":44,"fixableWarningCount":0,"source":"/**\n * 注册容错和降级管理器\n * 提供网络错误重试、存储失败备用方案、服务降级策略\n * \n * 功能特性：\n * - 智能重试机制（指数退避）\n * - 多级存储备用方案\n * - 服务降级策略\n * - 离线模式支持\n * - 错误恢复机制\n */\n\nclass RegistrationResilienceManager {\n  constructor(options = {}) {\n    this.config = {\n      // 重试配置\n      maxRetries: 3,\n      baseDelay: 1000, // 基础延迟 1秒\n      maxDelay: 30000, // 最大延迟 30秒\n      backoffMultiplier: 2, // 指数退避倍数\n      \n      // 存储配置\n      enableLocalStorage: true,\n      enableSessionStorage: true,\n      enableIndexedDB: true,\n      \n      // 降级配置\n      enableGracefulDegradation: true,\n      offlineMode: false,\n      \n      // 监控配置\n      enableMetrics: true,\n      enableLogging: true,\n      \n      ...options\n    };\n\n    // 重试状态管理\n    this.retryState = new Map();\n    \n    // 存储适配器\n    this.storageAdapters = new Map();\n    \n    // 降级策略\n    this.degradationStrategies = new Map();\n    \n    // 指标收集\n    this.metrics = {\n      totalRetries: 0,\n      successfulRetries: 0,\n      failedRetries: 0,\n      storageFailovers: 0,\n      degradationActivations: 0,\n      offlineOperations: 0\n    };\n\n    // 初始化\n    this.init();\n  }\n\n  /**\n   * 初始化容错管理器\n   */\n  init() {\n    this.setupStorageAdapters();\n    this.setupDegradationStrategies();\n    this.setupNetworkMonitoring();\n    \n    if (this.config.enableLogging) {\n      console.log('RegistrationResilienceManager initialized');\n    }\n  }\n\n  /**\n   * 设置存储适配器\n   */\n  setupStorageAdapters() {\n    // LocalStorage 适配器\n    if (this.config.enableLocalStorage && typeof localStorage !== 'undefined') {\n      this.storageAdapters.set('localStorage', {\n        priority: 1,\n        available: true,\n        store: (key, data) => {\n          try {\n            localStorage.setItem(key, JSON.stringify(data));\n            return true;\n          } catch (error) {\n            console.warn('LocalStorage failed:', error);\n            return false;\n          }\n        },\n        retrieve: (key) => {\n          try {\n            const data = localStorage.getItem(key);\n            return data ? JSON.parse(data) : null;\n          } catch (error) {\n            console.warn('LocalStorage retrieval failed:', error);\n            return null;\n          }\n        },\n        remove: (key) => {\n          try {\n            localStorage.removeItem(key);\n            return true;\n          } catch (error) {\n            console.warn('LocalStorage removal failed:', error);\n            return false;\n          }\n        }\n      });\n    }\n\n    // SessionStorage 适配器\n    if (this.config.enableSessionStorage && typeof sessionStorage !== 'undefined') {\n      this.storageAdapters.set('sessionStorage', {\n        priority: 2,\n        available: true,\n        store: (key, data) => {\n          try {\n            sessionStorage.setItem(key, JSON.stringify(data));\n            return true;\n          } catch (error) {\n            console.warn('SessionStorage failed:', error);\n            return false;\n          }\n        },\n        retrieve: (key) => {\n          try {\n            const data = sessionStorage.getItem(key);\n            return data ? JSON.parse(data) : null;\n          } catch (error) {\n            console.warn('SessionStorage retrieval failed:', error);\n            return null;\n          }\n        },\n        remove: (key) => {\n          try {\n            sessionStorage.removeItem(key);\n            return true;\n          } catch (error) {\n            console.warn('SessionStorage removal failed:', error);\n            return false;\n          }\n        }\n      });\n    }\n\n    // 内存存储适配器（最后备用）\n    this.memoryStorage = new Map();\n    this.storageAdapters.set('memory', {\n      priority: 3,\n      available: true,\n      store: (key, data) => {\n        try {\n          this.memoryStorage.set(key, data);\n          return true;\n        } catch (error) {\n          console.warn('Memory storage failed:', error);\n          return false;\n        }\n      },\n      retrieve: (key) => {\n        return this.memoryStorage.get(key) || null;\n      },\n      remove: (key) => {\n        return this.memoryStorage.delete(key);\n      }\n    });\n  }\n\n  /**\n   * 设置降级策略\n   */\n  setupDegradationStrategies() {\n    // 网络降级策略\n    this.degradationStrategies.set('network', {\n      condition: () => !navigator.onLine,\n      action: () => {\n        this.config.offlineMode = true;\n        this.metrics.degradationActivations++;\n        if (this.config.enableLogging) {\n          console.log('Network degradation activated - switching to offline mode');\n        }\n      },\n      recovery: () => {\n        this.config.offlineMode = false;\n        if (this.config.enableLogging) {\n          console.log('Network recovered - switching back to online mode');\n        }\n      }\n    });\n\n    // 存储降级策略\n    this.degradationStrategies.set('storage', {\n      condition: () => {\n        // 检查主要存储是否可用\n        const primaryStorage = Array.from(this.storageAdapters.values())\n          .sort((a, b) => a.priority - b.priority)[0];\n        return !primaryStorage || !primaryStorage.available;\n      },\n      action: () => {\n        this.metrics.degradationActivations++;\n        if (this.config.enableLogging) {\n          console.log('Storage degradation activated - using fallback storage');\n        }\n      }\n    });\n  }\n\n  /**\n   * 设置网络监控\n   */\n  setupNetworkMonitoring() {\n    if (typeof window !== 'undefined') {\n      window.addEventListener('online', () => {\n        const strategy = this.degradationStrategies.get('network');\n        if (strategy && strategy.recovery) {\n          strategy.recovery();\n        }\n      });\n\n      window.addEventListener('offline', () => {\n        const strategy = this.degradationStrategies.get('network');\n        if (strategy && strategy.action) {\n          strategy.action();\n        }\n      });\n    }\n  }\n\n  /**\n   * 执行带重试的操作\n   */\n  async executeWithRetry(operationId, operation, options = {}) {\n    const config = { ...this.config, ...options };\n    const retryKey = `${operationId}_${Date.now()}`;\n    \n    this.retryState.set(retryKey, {\n      attempts: 0,\n      lastError: null,\n      startTime: Date.now()\n    });\n\n    for (let attempt = 0; attempt <= config.maxRetries; attempt++) {\n      try {\n        const state = this.retryState.get(retryKey);\n        state.attempts = attempt + 1;\n        \n        if (this.config.enableLogging && attempt > 0) {\n          console.log(`Retry attempt ${attempt} for operation: ${operationId}`);\n        }\n\n        const result = await operation();\n        \n        // 成功时清理重试状态\n        this.retryState.delete(retryKey);\n        \n        if (attempt > 0) {\n          this.metrics.successfulRetries++;\n        }\n        \n        return result;\n      } catch (error) {\n        const state = this.retryState.get(retryKey);\n        state.lastError = error;\n        \n        if (attempt === config.maxRetries) {\n          // 最后一次尝试失败\n          this.metrics.failedRetries++;\n          this.retryState.delete(retryKey);\n          \n          if (this.config.enableLogging) {\n            console.error(`Operation ${operationId} failed after ${config.maxRetries + 1} attempts:`, error);\n          }\n          \n          throw error;\n        }\n        \n        // 计算重试次数（不包括最后一次失败）\n        this.metrics.totalRetries++;\n        \n        // 计算延迟时间（指数退避）\n        const delay = Math.min(\n          config.baseDelay * Math.pow(config.backoffMultiplier, attempt),\n          config.maxDelay\n        );\n        \n        if (this.config.enableLogging) {\n          console.warn(`Operation ${operationId} failed (attempt ${attempt + 1}), retrying in ${delay}ms:`, error.message);\n        }\n        \n        await this.delay(delay);\n      }\n    }\n  }\n\n  /**\n   * 容错存储操作\n   */\n  async storeWithFallback(key, data, options = {}) {\n    const adapters = Array.from(this.storageAdapters.entries())\n      .sort(([, a], [, b]) => a.priority - b.priority)\n      .filter(([, adapter]) => adapter.available);\n\n    let attemptCount = 0;\n    \n    for (const [name, adapter] of adapters) {\n      try {\n        const success = await adapter.store(key, data);\n        if (success) {\n          // 只有在不是第一个适配器时才计为故障转移\n          if (attemptCount > 0) {\n            this.metrics.storageFailovers++;\n            if (this.config.enableLogging) {\n              console.log(`Data stored using fallback storage: ${name}`);\n            }\n          }\n          return { success: true, adapter: name };\n        }\n      } catch (error) {\n        console.warn(`Storage adapter ${name} failed:`, error);\n        adapter.available = false;\n      }\n      attemptCount++;\n    }\n\n    throw new Error('All storage adapters failed');\n  }\n\n  /**\n   * 容错检索操作\n   */\n  async retrieveWithFallback(key) {\n    const adapters = Array.from(this.storageAdapters.entries())\n      .sort(([, a], [, b]) => a.priority - b.priority)\n      .filter(([, adapter]) => adapter.available);\n\n    for (const [name, adapter] of adapters) {\n      try {\n        const data = await adapter.retrieve(key);\n        if (data !== null) {\n          return { data, adapter: name };\n        }\n      } catch (error) {\n        console.warn(`Retrieval from ${name} failed:`, error);\n        continue;\n      }\n    }\n\n    return { data: null, adapter: null };\n  }\n\n  /**\n   * 注册降级处理\n   */\n  async handleRegistrationWithDegradation(userData, registrationFunction) {\n    // 检查是否需要降级\n    const needsDegradation = this.checkDegradationConditions();\n    \n    if (needsDegradation.network) {\n      // 网络降级：保存到本地存储，稍后同步\n      return await this.handleOfflineRegistration(userData);\n    }\n    \n    if (needsDegradation.storage) {\n      // 存储降级：使用备用存储\n      return await this.handleStorageDegradedRegistration(userData, registrationFunction);\n    }\n    \n    // 正常流程\n    return await this.executeWithRetry('registration', () => registrationFunction(userData));\n  }\n\n  /**\n   * 处理离线注册\n   */\n  async handleOfflineRegistration(userData) {\n    this.metrics.offlineOperations++;\n    \n    const offlineData = {\n      userData,\n      timestamp: new Date().toISOString(),\n      status: 'pending_sync',\n      id: this.generateOfflineId()\n    };\n    \n    await this.storeWithFallback(`offline_registration_${offlineData.id}`, offlineData);\n    \n    if (this.config.enableLogging) {\n      console.log('Registration saved for offline sync:', offlineData.id);\n    }\n    \n    return {\n      success: true,\n      offline: true,\n      id: offlineData.id,\n      message: '注册已保存，将在网络恢复后同步'\n    };\n  }\n\n  /**\n   * 处理存储降级注册\n   */\n  async handleStorageDegradedRegistration(userData, registrationFunction) {\n    try {\n      // 尝试正常注册\n      const result = await this.executeWithRetry('registration', () => registrationFunction(userData));\n      \n      // 使用备用存储保存结果\n      await this.storeWithFallback(`registration_backup_${Date.now()}`, {\n        userData,\n        result,\n        timestamp: new Date().toISOString()\n      });\n      \n      return result;\n    } catch (error) {\n      // 注册失败，保存到备用存储稍后重试\n      const backupData = {\n        userData,\n        error: error.message,\n        timestamp: new Date().toISOString(),\n        status: 'failed_retry_pending'\n      };\n      \n      await this.storeWithFallback(`failed_registration_${Date.now()}`, backupData);\n      \n      throw error;\n    }\n  }\n\n  /**\n   * 检查降级条件\n   */\n  checkDegradationConditions() {\n    const conditions = {};\n    \n    for (const [name, strategy] of this.degradationStrategies) {\n      conditions[name] = strategy.condition();\n    }\n    \n    return conditions;\n  }\n\n  /**\n   * 同步离线数据\n   */\n  async syncOfflineData(syncFunction) {\n    if (this.config.offlineMode) {\n      if (this.config.enableLogging) {\n        console.log('Still in offline mode, skipping sync');\n      }\n      return { synced: 0, failed: 0 };\n    }\n\n    const offlineKeys = [];\n    \n    // 查找所有离线数据\n    for (const [name, adapter] of this.storageAdapters) {\n      if (!adapter.available) continue;\n      \n      try {\n        // 这里需要实现存储扫描逻辑\n        // 简化实现：假设有方法获取所有键\n        if (name === 'memory') {\n          for (const key of this.memoryStorage.keys()) {\n            if (key.startsWith('offline_registration_')) {\n              offlineKeys.push({ key, adapter: name });\n            }\n          }\n        }\n      } catch (error) {\n        console.warn(`Failed to scan ${name} for offline data:`, error);\n      }\n    }\n\n    let synced = 0;\n    let failed = 0;\n\n    for (const { key, adapter } of offlineKeys) {\n      try {\n        const storageAdapter = this.storageAdapters.get(adapter);\n        const offlineData = await storageAdapter.retrieve(key);\n        \n        if (offlineData && offlineData.status === 'pending_sync') {\n          await this.executeWithRetry('offline_sync', () => syncFunction(offlineData.userData));\n          \n          // 同步成功，删除离线数据\n          await storageAdapter.remove(key);\n          synced++;\n          \n          if (this.config.enableLogging) {\n            console.log(`Synced offline registration: ${offlineData.id}`);\n          }\n        }\n      } catch (error) {\n        failed++;\n        console.error(`Failed to sync offline data ${key}:`, error);\n      }\n    }\n\n    return { synced, failed };\n  }\n\n  /**\n   * 获取容错指标\n   */\n  getMetrics() {\n    return {\n      ...this.metrics,\n      activeRetries: this.retryState.size,\n      availableStorageAdapters: Array.from(this.storageAdapters.values())\n        .filter(adapter => adapter.available).length,\n      isOfflineMode: this.config.offlineMode\n    };\n  }\n\n  /**\n   * 重置指标\n   */\n  resetMetrics() {\n    this.metrics = {\n      totalRetries: 0,\n      successfulRetries: 0,\n      failedRetries: 0,\n      storageFailovers: 0,\n      degradationActivations: 0,\n      offlineOperations: 0\n    };\n  }\n\n  /**\n   * 工具方法\n   */\n  delay(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  generateOfflineId() {\n    return `offline_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * 清理资源\n   */\n  destroy() {\n    this.retryState.clear();\n    this.storageAdapters.clear();\n    this.degradationStrategies.clear();\n    this.memoryStorage.clear();\n    \n    if (this.config.enableLogging) {\n      console.log('RegistrationResilienceManager destroyed');\n    }\n  }\n}\n\n// 创建全局实例\nif (typeof window !== 'undefined') {\n  window.RegistrationResilienceManager = RegistrationResilienceManager;\n  \n  // 创建默认实例\n  if (!window.registrationResilienceManager) {\n    window.registrationResilienceManager = new RegistrationResilienceManager();\n  }\n}\n\n// 导出模块\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = { RegistrationResilienceManager };\n}","usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\auth\\security-manager.js","messages":[{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":3,"column":3,"nodeType":"Program","messageId":"trailingSpace","endLine":3,"endColumn":4,"fix":{"range":[40,41],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":10,"column":3,"nodeType":"Program","messageId":"trailingSpace","endLine":10,"endColumn":4,"fix":{"range":[126,127],"text":""}},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":43,"column":12,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":43,"endColumn":13,"suggestions":[{"messageId":"removeEscape","fix":{"range":[1025,1026],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[1025,1025],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":43,"column":14,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":43,"endColumn":15,"suggestions":[{"messageId":"removeEscape","fix":{"range":[1027,1028],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[1027,1027],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":65,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":65,"endColumn":7,"fix":{"range":[1466,1472],"text":""}},{"ruleId":"quotes","severity":2,"message":"Strings must use singlequote.","line":81,"column":9,"nodeType":"Literal","messageId":"wrongQuotes","endLine":81,"endColumn":29,"fix":{"range":[1879,1899],"text":"'default-src \\'self\\''"}},{"ruleId":"quotes","severity":2,"message":"Strings must use singlequote.","line":82,"column":9,"nodeType":"Literal","messageId":"wrongQuotes","endLine":82,"endColumn":58,"fix":{"range":[1909,1958],"text":"'script-src \\'self\\' \\'unsafe-inline\\' \\'unsafe-eval\\''"}},{"ruleId":"quotes","severity":2,"message":"Strings must use singlequote.","line":83,"column":9,"nodeType":"Literal","messageId":"wrongQuotes","endLine":83,"endColumn":43,"fix":{"range":[1968,2002],"text":"'style-src \\'self\\' \\'unsafe-inline\\''"}},{"ruleId":"quotes","severity":2,"message":"Strings must use singlequote.","line":84,"column":9,"nodeType":"Literal","messageId":"wrongQuotes","endLine":84,"endColumn":38,"fix":{"range":[2012,2041],"text":"'img-src \\'self\\' data: https:'"}},{"ruleId":"quotes","severity":2,"message":"Strings must use singlequote.","line":85,"column":9,"nodeType":"Literal","messageId":"wrongQuotes","endLine":85,"endColumn":33,"fix":{"range":[2051,2075],"text":"'font-src \\'self\\' https:'"}},{"ruleId":"quotes","severity":2,"message":"Strings must use singlequote.","line":86,"column":9,"nodeType":"Literal","messageId":"wrongQuotes","endLine":86,"endColumn":36,"fix":{"range":[2085,2112],"text":"'connect-src \\'self\\' https:'"}},{"ruleId":"quotes","severity":2,"message":"Strings must use singlequote.","line":87,"column":9,"nodeType":"Literal","messageId":"wrongQuotes","endLine":87,"endColumn":27,"fix":{"range":[2122,2140],"text":"'frame-src \\'none\\''"}},{"ruleId":"quotes","severity":2,"message":"Strings must use singlequote.","line":88,"column":9,"nodeType":"Literal","messageId":"wrongQuotes","endLine":88,"endColumn":28,"fix":{"range":[2150,2169],"text":"'object-src \\'none\\''"}},{"ruleId":"quotes","severity":2,"message":"Strings must use singlequote.","line":89,"column":9,"nodeType":"Literal","messageId":"wrongQuotes","endLine":89,"endColumn":26,"fix":{"range":[2179,2196],"text":"'base-uri \\'self\\''"}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":91,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":91,"endColumn":7,"fix":{"range":[2217,2223],"text":""}},{"ruleId":"quotes","severity":2,"message":"Strings must use singlequote.","line":148,"column":7,"nodeType":"Literal","messageId":"wrongQuotes","endLine":148,"endColumn":10,"fix":{"range":[3626,3629],"text":"'\\''"}},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":154,"column":35,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":154,"endColumn":36,"suggestions":[{"messageId":"removeEscape","fix":{"range":[3745,3746],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[3745,3745],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"quotes","severity":2,"message":"Strings must use singlequote.","line":172,"column":17,"nodeType":"Literal","messageId":"wrongQuotes","endLine":172,"endColumn":20,"fix":{"range":[4092,4095],"text":"'\\''"}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":265,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":265,"endColumn":5,"fix":{"range":[6251,6255],"text":""}},{"ruleId":"no-magic-numbers","severity":1,"message":"No magic number: 32.","line":332,"column":25,"nodeType":"Literal","messageId":"noMagic","endLine":332,"endColumn":27},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":352,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":352,"endColumn":7,"fix":{"range":[8323,8329],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":358,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":358,"endColumn":7,"fix":{"range":[8547,8553],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":380,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":380,"endColumn":7,"fix":{"range":[9041,9047],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":386,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":386,"endColumn":7,"fix":{"range":[9285,9291],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":410,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":410,"endColumn":7,"fix":{"range":[9862,9868],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":412,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":412,"endColumn":7,"fix":{"range":[9931,9937],"text":""}},{"ruleId":"no-magic-numbers","severity":1,"message":"No magic number: 32.","line":430,"column":32,"nodeType":"Literal","messageId":"noMagic","endLine":430,"endColumn":34},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":433,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":433,"endColumn":5,"fix":{"range":[10387,10391],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":446,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":446,"endColumn":5,"fix":{"range":[10803,10807],"text":""}},{"ruleId":"eol-last","severity":2,"message":"Newline required at end of file but not found.","line":472,"column":2,"nodeType":"Program","messageId":"missing","fix":{"range":[11273,11273],"text":"\n"}}],"suppressedMessages":[],"errorCount":28,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":25,"fixableWarningCount":0,"source":"/**\n * 安全管理器 - 提供XSS防护、输入过滤、数据加密等安全措施\n * \n * 功能包括：\n * - XSS防护和HTML转义\n * - 输入数据过滤和清理\n * - 敏感数据加密/解密\n * - CSP策略管理\n * - 安全头部设置\n * \n * @author AI Assistant\n * @version 1.0.0\n */\n\nclass SecurityManager {\n  constructor(options = {}) {\n    this.config = {\n      enableXSSProtection: true,\n      enableCSP: true,\n      enableInputSanitization: true,\n      enableDataEncryption: true,\n      encryptionKey: options.encryptionKey || this.generateEncryptionKey(),\n      allowedTags: options.allowedTags || ['b', 'i', 'em', 'strong'],\n      allowedAttributes: options.allowedAttributes || ['class', 'id'],\n      maxInputLength: options.maxInputLength || 1000,\n      ...options\n    };\n\n    this.xssPatterns = [\n      /<script[^>]*>.*?<\\/script>/gi,\n      /<iframe[^>]*>.*?<\\/iframe>/gi,\n      /<object[^>]*>.*?<\\/object>/gi,\n      /<embed[^>]*>/gi,\n      /<link[^>]*>/gi,\n      /<meta[^>]*>/gi,\n      /javascript:/gi,\n      /vbscript:/gi,\n      /data:text\\/html/gi,\n      /on\\w+\\s*=/gi\n    ];\n\n    this.sqlInjectionPatterns = [\n      /('|(\\-\\-)|(;)|(\\||\\|)|(\\*|\\*))/gi,\n      /(union|select|insert|delete|update|drop|create|alter|exec|execute)/gi,\n      /(script|javascript|vbscript|onload|onerror|onclick)/gi\n    ];\n\n    this.init();\n  }\n\n  /**\n   * 初始化安全管理器\n   */\n  init() {\n    try {\n      if (this.config.enableCSP) {\n        this.setupCSP();\n      }\n\n      if (this.config.enableXSSProtection) {\n        this.setupXSSProtection();\n      }\n\n      this.setupSecurityHeaders();\n      \n      console.log('SecurityManager initialized successfully');\n    } catch (error) {\n      console.error('Failed to initialize SecurityManager:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * 设置内容安全策略 (CSP)\n   */\n  setupCSP() {\n    if (typeof document !== 'undefined') {\n      const meta = document.createElement('meta');\n      meta.httpEquiv = 'Content-Security-Policy';\n      meta.content = [\n        \"default-src 'self'\",\n        \"script-src 'self' 'unsafe-inline' 'unsafe-eval'\",\n        \"style-src 'self' 'unsafe-inline'\",\n        \"img-src 'self' data: https:\",\n        \"font-src 'self' https:\",\n        \"connect-src 'self' https:\",\n        \"frame-src 'none'\",\n        \"object-src 'none'\",\n        \"base-uri 'self'\"\n      ].join('; ');\n      \n      document.head.appendChild(meta);\n    }\n  }\n\n  /**\n   * 设置XSS防护\n   */\n  setupXSSProtection() {\n    if (typeof document !== 'undefined') {\n      const meta = document.createElement('meta');\n      meta.httpEquiv = 'X-XSS-Protection';\n      meta.content = '1; mode=block';\n      document.head.appendChild(meta);\n    }\n  }\n\n  /**\n   * 设置安全头部\n   */\n  setupSecurityHeaders() {\n    if (typeof document !== 'undefined') {\n      // X-Content-Type-Options\n      const noSniff = document.createElement('meta');\n      noSniff.httpEquiv = 'X-Content-Type-Options';\n      noSniff.content = 'nosniff';\n      document.head.appendChild(noSniff);\n\n      // X-Frame-Options\n      const frameOptions = document.createElement('meta');\n      frameOptions.httpEquiv = 'X-Frame-Options';\n      frameOptions.content = 'DENY';\n      document.head.appendChild(frameOptions);\n\n      // Referrer-Policy\n      const referrerPolicy = document.createElement('meta');\n      referrerPolicy.name = 'referrer';\n      referrerPolicy.content = 'strict-origin-when-cross-origin';\n      document.head.appendChild(referrerPolicy);\n    }\n  }\n\n  /**\n   * HTML转义，防止XSS攻击\n   * @param {string} input - 需要转义的字符串\n   * @returns {string} 转义后的字符串\n   */\n  escapeHtml(input) {\n    if (typeof input !== 'string') {\n      return input;\n    }\n\n    const escapeMap = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#x27;',\n      '/': '&#x2F;',\n      '`': '&#x60;',\n      '=': '&#x3D;'\n    };\n\n    return input.replace(/[&<>\"'`=\\/]/g, (match) => escapeMap[match]);\n  }\n\n  /**\n   * 反转义HTML\n   * @param {string} input - 需要反转义的字符串\n   * @returns {string} 反转义后的字符串\n   */\n  unescapeHtml(input) {\n    if (typeof input !== 'string') {\n      return input;\n    }\n\n    const unescapeMap = {\n      '&amp;': '&',\n      '&lt;': '<',\n      '&gt;': '>',\n      '&quot;': '\"',\n      '&#x27;': \"'\",\n      '&#x2F;': '/',\n      '&#x60;': '`',\n      '&#x3D;': '='\n    };\n\n    return input.replace(/&(amp|lt|gt|quot|#x27|#x2F|#x60|#x3D);/g, (match) => unescapeMap[match]);\n  }\n\n  /**\n   * 清理和过滤输入数据\n   * @param {string} input - 输入数据\n   * @param {Object} options - 过滤选项\n   * @returns {Object} 过滤结果\n   */\n  sanitizeInput(input, options = {}) {\n    const result = {\n      original: input,\n      sanitized: input,\n      isValid: true,\n      violations: []\n    };\n\n    if (typeof input !== 'string') {\n      result.isValid = false;\n      result.violations.push('Input must be a string');\n      return result;\n    }\n\n    // 长度检查\n    if (input.length > this.config.maxInputLength) {\n      result.isValid = false;\n      result.violations.push(`Input exceeds maximum length of ${this.config.maxInputLength}`);\n      result.sanitized = input.substring(0, this.config.maxInputLength);\n    }\n\n    // XSS检查\n    if (this.config.enableXSSProtection) {\n      const xssResult = this.detectXSS(input);\n      if (!xssResult.isClean) {\n        result.violations.push(...xssResult.violations);\n        result.sanitized = this.removeXSS(result.sanitized);\n      }\n    }\n\n    // SQL注入检查\n    const sqlResult = this.detectSQLInjection(input);\n    if (!sqlResult.isClean) {\n      result.isValid = false;\n      result.violations.push(...sqlResult.violations);\n    }\n\n    // HTML转义\n    if (options.escapeHtml !== false) {\n      result.sanitized = this.escapeHtml(result.sanitized);\n    }\n\n    // 移除不允许的标签和属性\n    if (options.allowHtml) {\n      result.sanitized = this.sanitizeHtml(result.sanitized, options);\n    }\n\n    return result;\n  }\n\n  /**\n   * 检测XSS攻击\n   * @param {string} input - 输入字符串\n   * @returns {Object} 检测结果\n   */\n  detectXSS(input) {\n    const result = {\n      isClean: true,\n      violations: []\n    };\n\n    for (const pattern of this.xssPatterns) {\n      if (pattern.test(input)) {\n        result.isClean = false;\n        result.violations.push(`Potential XSS detected: ${pattern.source}`);\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * 移除XSS攻击代码\n   * @param {string} input - 输入字符串\n   * @returns {string} 清理后的字符串\n   */\n  removeXSS(input) {\n    let cleaned = input;\n    \n    for (const pattern of this.xssPatterns) {\n      cleaned = cleaned.replace(pattern, '');\n    }\n\n    return cleaned;\n  }\n\n  /**\n   * 检测SQL注入攻击\n   * @param {string} input - 输入字符串\n   * @returns {Object} 检测结果\n   */\n  detectSQLInjection(input) {\n    const result = {\n      isClean: true,\n      violations: []\n    };\n\n    for (const pattern of this.sqlInjectionPatterns) {\n      if (pattern.test(input)) {\n        result.isClean = false;\n        result.violations.push(`Potential SQL injection detected: ${pattern.source}`);\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * 清理HTML内容\n   * @param {string} html - HTML字符串\n   * @param {Object} options - 清理选项\n   * @returns {string} 清理后的HTML\n   */\n  sanitizeHtml(html, options = {}) {\n    const allowedTags = options.allowedTags || this.config.allowedTags;\n    const allowedAttributes = options.allowedAttributes || this.config.allowedAttributes;\n\n    // 简单的HTML清理实现\n    // 在生产环境中建议使用DOMPurify等专业库\n    let cleaned = html;\n\n    // 移除不允许的标签\n    cleaned = cleaned.replace(/<\\/?([a-zA-Z][a-zA-Z0-9]*)\\b[^>]*>/g, (match, tagName) => {\n      if (allowedTags.includes(tagName.toLowerCase())) {\n        // 清理属性\n        return match.replace(/\\s+([a-zA-Z-]+)\\s*=\\s*[\"']?[^\"'>]*[\"']?/g, (attrMatch, attrName) => {\n          if (allowedAttributes.includes(attrName.toLowerCase())) {\n            return attrMatch;\n          }\n          return '';\n        });\n      }\n      return '';\n    });\n\n    return cleaned;\n  }\n\n  /**\n   * 生成加密密钥\n   * @returns {string} 加密密钥\n   */\n  generateEncryptionKey() {\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let key = '';\n    for (let i = 0; i < 32; i++) {\n      key += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    return key;\n  }\n\n  /**\n   * 简单的数据加密（仅用于演示，生产环境请使用专业加密库）\n   * @param {string} data - 需要加密的数据\n   * @returns {string} 加密后的数据\n   */\n  encrypt(data) {\n    if (!this.config.enableDataEncryption) {\n      return data;\n    }\n\n    try {\n      // 简单的XOR加密（仅用于演示）\n      const key = this.config.encryptionKey;\n      let encrypted = '';\n      \n      for (let i = 0; i < data.length; i++) {\n        const keyChar = key.charCodeAt(i % key.length);\n        const dataChar = data.charCodeAt(i);\n        encrypted += String.fromCharCode(dataChar ^ keyChar);\n      }\n      \n      return btoa(encrypted); // Base64编码\n    } catch (error) {\n      console.error('Encryption failed:', error);\n      return data;\n    }\n  }\n\n  /**\n   * 简单的数据解密\n   * @param {string} encryptedData - 加密的数据\n   * @returns {string} 解密后的数据\n   */\n  decrypt(encryptedData) {\n    if (!this.config.enableDataEncryption) {\n      return encryptedData;\n    }\n\n    try {\n      const encrypted = atob(encryptedData); // Base64解码\n      const key = this.config.encryptionKey;\n      let decrypted = '';\n      \n      for (let i = 0; i < encrypted.length; i++) {\n        const keyChar = key.charCodeAt(i % key.length);\n        const encryptedChar = encrypted.charCodeAt(i);\n        decrypted += String.fromCharCode(encryptedChar ^ keyChar);\n      }\n      \n      return decrypted;\n    } catch (error) {\n      console.error('Decryption failed:', error);\n      return encryptedData;\n    }\n  }\n\n  /**\n   * 验证输入数据的安全性\n   * @param {Object} data - 输入数据对象\n   * @param {Object} rules - 验证规则\n   * @returns {Object} 验证结果\n   */\n  validateSecurityRules(data, rules = {}) {\n    const result = {\n      isValid: true,\n      violations: [],\n      sanitizedData: {}\n    };\n\n    for (const [field, value] of Object.entries(data)) {\n      const fieldRules = rules[field] || {};\n      const sanitizeResult = this.sanitizeInput(value, fieldRules);\n      \n      result.sanitizedData[field] = sanitizeResult.sanitized;\n      \n      if (!sanitizeResult.isValid) {\n        result.isValid = false;\n        result.violations.push({\n          field,\n          violations: sanitizeResult.violations\n        });\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * 生成安全的随机令牌\n   * @param {number} length - 令牌长度\n   * @returns {string} 随机令牌\n   */\n  generateSecureToken(length = 32) {\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let token = '';\n    \n    if (typeof crypto !== 'undefined' && crypto.getRandomValues) {\n      const array = new Uint8Array(length);\n      crypto.getRandomValues(array);\n      for (let i = 0; i < length; i++) {\n        token += chars[array[i] % chars.length];\n      }\n    } else {\n      // 降级到Math.random\n      for (let i = 0; i < length; i++) {\n        token += chars.charAt(Math.floor(Math.random() * chars.length));\n      }\n    }\n    \n    return token;\n  }\n\n  /**\n   * 获取安全配置\n   * @returns {Object} 当前安全配置\n   */\n  getConfig() {\n    return { ...this.config };\n  }\n\n  /**\n   * 更新安全配置\n   * @param {Object} newConfig - 新的配置\n   */\n  updateConfig(newConfig) {\n    this.config = { ...this.config, ...newConfig };\n  }\n}\n\n// 导出类\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = SecurityManager;\n} else if (typeof window !== 'undefined') {\n  window.SecurityManager = SecurityManager;\n}","usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\auth\\session-management.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\auth\\storage-manager.js","messages":[{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":6,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":6,"endColumn":5,"fix":{"range":[74,78],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":7,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":7,"endColumn":9,"fix":{"range":[105,113],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":8,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":8,"endColumn":13,"fix":{"range":[129,141],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":9,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":9,"endColumn":13,"fix":{"range":[149,161],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":10,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":10,"endColumn":13,"fix":{"range":[218,230],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":11,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":11,"endColumn":13,"fix":{"range":[291,303],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":12,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":12,"endColumn":13,"fix":{"range":[354,366],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":13,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":13,"endColumn":13,"fix":{"range":[416,428],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":14,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":14,"endColumn":13,"fix":{"range":[429,441],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":15,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":15,"endColumn":13,"fix":{"range":[452,464],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":16,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":16,"endColumn":13,"fix":{"range":[525,537],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":17,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":17,"endColumn":13,"fix":{"range":[582,594],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":18,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":18,"endColumn":13,"fix":{"range":[647,659],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":19,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":19,"endColumn":13,"fix":{"range":[660,672],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":20,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":20,"endColumn":13,"fix":{"range":[680,692],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":21,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":21,"endColumn":13,"fix":{"range":[728,740],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":22,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":22,"endColumn":13,"fix":{"range":[791,803],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":23,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":23,"endColumn":13,"fix":{"range":[859,871],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":24,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":24,"endColumn":13,"fix":{"range":[872,884],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":25,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":25,"endColumn":13,"fix":{"range":[894,906],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":26,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":26,"endColumn":13,"fix":{"range":[942,954],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":27,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":27,"endColumn":13,"fix":{"range":[993,1005],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":28,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":28,"endColumn":13,"fix":{"range":[1058,1070],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":29,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":29,"endColumn":13,"fix":{"range":[1071,1083],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":30,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":30,"endColumn":9,"fix":{"range":[1093,1101],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":31,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":31,"endColumn":9,"fix":{"range":[1104,1112],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":32,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":32,"endColumn":9,"fix":{"range":[1113,1121],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":33,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":33,"endColumn":9,"fix":{"range":[1145,1153],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":34,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":34,"endColumn":9,"fix":{"range":[1189,1197],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":35,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":35,"endColumn":9,"fix":{"range":[1218,1226],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":36,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":36,"endColumn":9,"fix":{"range":[1254,1262],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":37,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":37,"endColumn":9,"fix":{"range":[1290,1298],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":38,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":38,"endColumn":9,"fix":{"range":[1325,1333],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":39,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":39,"endColumn":9,"fix":{"range":[1334,1342],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":40,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":40,"endColumn":9,"fix":{"range":[1350,1358],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":41,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":41,"endColumn":9,"fix":{"range":[1392,1400],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":42,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":42,"endColumn":9,"fix":{"range":[1436,1444],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":43,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":43,"endColumn":9,"fix":{"range":[1486,1494],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":44,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":44,"endColumn":9,"fix":{"range":[1532,1540],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":45,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":45,"endColumn":9,"fix":{"range":[1576,1584],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":46,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":46,"endColumn":9,"fix":{"range":[1618,1626],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":47,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":47,"endColumn":9,"fix":{"range":[1664,1672],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":48,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":48,"endColumn":5,"fix":{"range":[1712,1716],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":49,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":49,"endColumn":5,"fix":{"range":[1718,1722],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":50,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":50,"endColumn":5,"fix":{"range":[1723,1727],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":53,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":53,"endColumn":5,"fix":{"range":[1755,1759],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":54,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":54,"endColumn":9,"fix":{"range":[1774,1782],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":55,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":55,"endColumn":13,"fix":{"range":[1788,1800],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":56,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":56,"endColumn":13,"fix":{"range":[1841,1853],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":57,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":57,"endColumn":13,"fix":{"range":[1854,1866],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":58,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":58,"endColumn":13,"fix":{"range":[1877,1889],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":59,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":59,"endColumn":13,"fix":{"range":[1928,1940],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":60,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":60,"endColumn":13,"fix":{"range":[1941,1953],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":61,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":61,"endColumn":13,"fix":{"range":[1962,1974],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":62,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":62,"endColumn":17,"fix":{"range":[2010,2026],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":63,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":63,"endColumn":13,"fix":{"range":[2055,2067],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":64,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":64,"endColumn":13,"fix":{"range":[2069,2081],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":65,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":65,"endColumn":13,"fix":{"range":[2082,2094],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":66,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":66,"endColumn":13,"fix":{"range":[2110,2122],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":67,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":67,"endColumn":17,"fix":{"range":[2192,2208],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":68,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":68,"endColumn":13,"fix":{"range":[2236,2248],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":69,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":69,"endColumn":13,"fix":{"range":[2250,2262],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":70,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":70,"endColumn":13,"fix":{"range":[2263,2275],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":71,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":71,"endColumn":13,"fix":{"range":[2285,2297],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":72,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":72,"endColumn":17,"fix":{"range":[2332,2348],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":73,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":73,"endColumn":13,"fix":{"range":[2373,2385],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":74,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":74,"endColumn":13,"fix":{"range":[2387,2399],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":75,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":75,"endColumn":13,"fix":{"range":[2400,2412],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":76,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":76,"endColumn":13,"fix":{"range":[2422,2434],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":77,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":77,"endColumn":13,"fix":{"range":[2469,2481],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":78,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":78,"endColumn":13,"fix":{"range":[2482,2494],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":79,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":79,"endColumn":13,"fix":{"range":[2521,2533],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":80,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":80,"endColumn":13,"fix":{"range":[2571,2583],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":81,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":81,"endColumn":13,"fix":{"range":[2584,2596],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":82,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":82,"endColumn":17,"fix":{"range":[2605,2621],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":83,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":83,"endColumn":17,"fix":{"range":[2636,2652],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":84,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":84,"endColumn":17,"fix":{"range":[2693,2709],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":85,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":85,"endColumn":13,"fix":{"range":[2729,2741],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":86,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":86,"endColumn":9,"fix":{"range":[2744,2752],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":87,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":87,"endColumn":13,"fix":{"range":[2770,2782],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":88,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":88,"endColumn":13,"fix":{"range":[2829,2841],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":89,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":89,"endColumn":9,"fix":{"range":[2890,2898],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":90,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":90,"endColumn":5,"fix":{"range":[2900,2904],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":91,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":91,"endColumn":5,"fix":{"range":[2906,2910],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":92,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":92,"endColumn":5,"fix":{"range":[2911,2915],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":95,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":95,"endColumn":5,"fix":{"range":[2942,2946],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":96,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":96,"endColumn":9,"fix":{"range":[2981,2989],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":97,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":97,"endColumn":9,"fix":{"range":[3007,3015],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":98,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":98,"endColumn":13,"fix":{"range":[3021,3033],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":99,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":99,"endColumn":13,"fix":{"range":[3069,3081],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":100,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":100,"endColumn":13,"fix":{"range":[3120,3132],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":101,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":101,"endColumn":13,"fix":{"range":[3166,3178],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":102,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":102,"endColumn":9,"fix":{"range":[3221,3229],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":103,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":103,"endColumn":13,"fix":{"range":[3243,3255],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":104,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":104,"endColumn":13,"fix":{"range":[3299,3311],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":105,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":105,"endColumn":9,"fix":{"range":[3357,3365],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":106,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":106,"endColumn":9,"fix":{"range":[3367,3375],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":107,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":107,"endColumn":9,"fix":{"range":[3376,3384],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":108,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":108,"endColumn":9,"fix":{"range":[3404,3412],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":109,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":109,"endColumn":13,"fix":{"range":[3418,3430],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":110,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":110,"endColumn":13,"fix":{"range":[3466,3478],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":111,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":111,"endColumn":13,"fix":{"range":[3519,3531],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":112,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":112,"endColumn":13,"fix":{"range":[3567,3579],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":113,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":113,"endColumn":9,"fix":{"range":[3624,3632],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":114,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":114,"endColumn":13,"fix":{"range":[3646,3658],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":115,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":115,"endColumn":13,"fix":{"range":[3704,3716],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":116,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":116,"endColumn":9,"fix":{"range":[3764,3772],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":117,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":117,"endColumn":9,"fix":{"range":[3774,3782],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":118,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":118,"endColumn":9,"fix":{"range":[3783,3791],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":119,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":119,"endColumn":9,"fix":{"range":[3806,3814],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":120,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":120,"endColumn":13,"fix":{"range":[3820,3832],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":121,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":121,"endColumn":9,"fix":{"range":[3889,3897],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":122,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":122,"endColumn":13,"fix":{"range":[3911,3923],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":123,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":123,"endColumn":13,"fix":{"range":[3964,3976],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":124,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":124,"endColumn":9,"fix":{"range":[4019,4027],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":125,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":125,"endColumn":5,"fix":{"range":[4029,4033],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":126,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":126,"endColumn":5,"fix":{"range":[4035,4039],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":127,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":127,"endColumn":5,"fix":{"range":[4040,4044],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":130,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":130,"endColumn":5,"fix":{"range":[4069,4073],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":131,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":131,"endColumn":9,"fix":{"range":[4098,4106],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":132,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":132,"endColumn":13,"fix":{"range":[4112,4124],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":133,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":133,"endColumn":17,"fix":{"range":[4169,4185],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":134,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":134,"endColumn":17,"fix":{"range":[4198,4214],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":135,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":135,"endColumn":17,"fix":{"range":[4274,4290],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":136,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":136,"endColumn":21,"fix":{"range":[4305,4325],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":137,"column":1,"nodeType":"String","messageId":"wrongIndentation","endLine":137,"endColumn":25,"fix":{"range":[4384,4408],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":138,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":138,"endColumn":25,"fix":{"range":[4415,4439],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":139,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":139,"endColumn":25,"fix":{"range":[4476,4500],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":140,"column":1,"nodeType":"Boolean","messageId":"wrongIndentation","endLine":140,"endColumn":25,"fix":{"range":[4521,4545],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":141,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":141,"endColumn":25,"fix":{"range":[4552,4576],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":142,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":142,"endColumn":21,"fix":{"range":[4599,4619],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":143,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":143,"endColumn":17,"fix":{"range":[4622,4638],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":144,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":144,"endColumn":21,"fix":{"range":[4647,4667],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":145,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":145,"endColumn":25,"fix":{"range":[4728,4752],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":146,"column":1,"nodeType":"Boolean","messageId":"wrongIndentation","endLine":146,"endColumn":25,"fix":{"range":[4786,4810],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":147,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":147,"endColumn":25,"fix":{"range":[4816,4840],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":148,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":148,"endColumn":21,"fix":{"range":[4863,4883],"text":"          "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":149,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":149,"endColumn":21,"fix":{"range":[4886,4906],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":150,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":150,"endColumn":21,"fix":{"range":[4907,4927],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":151,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":151,"endColumn":21,"fix":{"range":[4938,4958],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":152,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":152,"endColumn":21,"fix":{"range":[5043,5063],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":153,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":153,"endColumn":17,"fix":{"range":[5164,5180],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":154,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":154,"endColumn":17,"fix":{"range":[5182,5198],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":155,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":155,"endColumn":13,"fix":{"range":[5238,5250],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":156,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":156,"endColumn":17,"fix":{"range":[5259,5275],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":157,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":157,"endColumn":17,"fix":{"range":[5332,5348],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":158,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":158,"endColumn":13,"fix":{"range":[5386,5398],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":159,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":159,"endColumn":9,"fix":{"range":[5400,5408],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":160,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":160,"endColumn":13,"fix":{"range":[5426,5438],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":161,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":161,"endColumn":13,"fix":{"range":[5487,5499],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":162,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":162,"endColumn":9,"fix":{"range":[5537,5545],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":163,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":163,"endColumn":5,"fix":{"range":[5547,5551],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":164,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":164,"endColumn":5,"fix":{"range":[5553,5557],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":165,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":165,"endColumn":5,"fix":{"range":[5558,5562],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":168,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":168,"endColumn":5,"fix":{"range":[5594,5598],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":169,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":169,"endColumn":9,"fix":{"range":[5622,5630],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":170,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":170,"endColumn":13,"fix":{"range":[5672,5684],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":171,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":171,"endColumn":13,"fix":{"range":[5736,5748],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":172,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":172,"endColumn":13,"fix":{"range":[5749,5761],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":173,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":173,"endColumn":17,"fix":{"range":[5787,5803],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":174,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":174,"endColumn":17,"fix":{"range":[5852,5868],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":175,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":175,"endColumn":17,"fix":{"range":[5909,5925],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":176,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":176,"endColumn":13,"fix":{"range":[5948,5960],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":177,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":177,"endColumn":13,"fix":{"range":[5963,5975],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":178,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":178,"endColumn":13,"fix":{"range":[5976,5988],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":179,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":179,"endColumn":17,"fix":{"range":[6016,6032],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":180,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":180,"endColumn":17,"fix":{"range":[6065,6081],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":181,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":181,"endColumn":17,"fix":{"range":[6129,6145],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":182,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":182,"endColumn":13,"fix":{"range":[6156,6168],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":183,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":183,"endColumn":13,"fix":{"range":[6171,6183],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":184,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":184,"endColumn":13,"fix":{"range":[6184,6196],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":185,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":185,"endColumn":17,"fix":{"range":[6235,6251],"text":"        "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":186,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":186,"endColumn":17,"fix":{"range":[6283,6299],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":187,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":187,"endColumn":17,"fix":{"range":[6300,6316],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":188,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":188,"endColumn":17,"fix":{"range":[6328,6344],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":189,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":189,"endColumn":21,"fix":{"range":[6390,6410],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":190,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":190,"endColumn":21,"fix":{"range":[6478,6498],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":191,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":191,"endColumn":21,"fix":{"range":[6563,6583],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":192,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":192,"endColumn":17,"fix":{"range":[6642,6658],"text":"        "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":193,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":193,"endColumn":17,"fix":{"range":[6660,6676],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":194,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":194,"endColumn":17,"fix":{"range":[6677,6693],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":195,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":195,"endColumn":17,"fix":{"range":[6705,6721],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":196,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":196,"endColumn":21,"fix":{"range":[6770,6790],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":197,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":197,"endColumn":17,"fix":{"range":[6843,6859],"text":"        "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":198,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":198,"endColumn":17,"fix":{"range":[6861,6877],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":199,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":199,"endColumn":17,"fix":{"range":[6878,6894],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":200,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":200,"endColumn":17,"fix":{"range":[6906,6922],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":201,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":201,"endColumn":21,"fix":{"range":[6970,6990],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":202,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":202,"endColumn":17,"fix":{"range":[7049,7065],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":203,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":203,"endColumn":13,"fix":{"range":[7067,7079],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":204,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":204,"endColumn":9,"fix":{"range":[7082,7090],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":205,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":205,"endColumn":5,"fix":{"range":[7094,7098],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":206,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":206,"endColumn":5,"fix":{"range":[7100,7104],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":207,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":207,"endColumn":5,"fix":{"range":[7105,7109],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":210,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":210,"endColumn":5,"fix":{"range":[7133,7137],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":211,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":211,"endColumn":9,"fix":{"range":[7176,7184],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":212,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":212,"endColumn":13,"fix":{"range":[7190,7202],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":213,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":213,"endColumn":17,"fix":{"range":[7229,7245],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":214,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":214,"endColumn":13,"fix":{"range":[7264,7276],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":215,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":215,"endColumn":13,"fix":{"range":[7278,7290],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":216,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":216,"endColumn":13,"fix":{"range":[7291,7303],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":217,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":217,"endColumn":17,"fix":{"range":[7326,7342],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":218,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":218,"endColumn":17,"fix":{"range":[7384,7400],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":219,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":219,"endColumn":17,"fix":{"range":[7462,7478],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":220,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":220,"endColumn":17,"fix":{"range":[7512,7528],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":221,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":221,"endColumn":17,"fix":{"range":[7566,7582],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":222,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":222,"endColumn":17,"fix":{"range":[7626,7642],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":223,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":223,"endColumn":13,"fix":{"range":[7653,7665],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":224,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":224,"endColumn":13,"fix":{"range":[7668,7680],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":225,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":225,"endColumn":13,"fix":{"range":[7681,7693],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":226,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":226,"endColumn":13,"fix":{"range":[7701,7713],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":227,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":227,"endColumn":17,"fix":{"range":[7778,7794],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":228,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":228,"endColumn":13,"fix":{"range":[7830,7842],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":229,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":229,"endColumn":13,"fix":{"range":[7844,7856],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":230,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":230,"endColumn":13,"fix":{"range":[7857,7869],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":231,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":231,"endColumn":13,"fix":{"range":[7877,7889],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":232,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":232,"endColumn":13,"fix":{"range":[7915,7927],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":233,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":233,"endColumn":17,"fix":{"range":[7979,7995],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":234,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":234,"endColumn":13,"fix":{"range":[8041,8053],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":235,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":235,"endColumn":13,"fix":{"range":[8055,8067],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":236,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":236,"endColumn":13,"fix":{"range":[8068,8080],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":237,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":237,"endColumn":13,"fix":{"range":[8088,8100],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":238,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":238,"endColumn":17,"fix":{"range":[8138,8154],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":239,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":239,"endColumn":13,"fix":{"range":[8210,8222],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":240,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":240,"endColumn":13,"fix":{"range":[8224,8236],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":241,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":241,"endColumn":13,"fix":{"range":[8237,8249],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":242,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":242,"endColumn":13,"fix":{"range":[8259,8271],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":243,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":243,"endColumn":13,"fix":{"range":[8366,8378],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":244,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":244,"endColumn":13,"fix":{"range":[8379,8391],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":245,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":245,"endColumn":13,"fix":{"range":[8399,8411],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":246,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":246,"endColumn":13,"fix":{"range":[8498,8510],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":247,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":247,"endColumn":13,"fix":{"range":[8511,8523],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":248,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":248,"endColumn":13,"fix":{"range":[8531,8543],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":249,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":249,"endColumn":13,"fix":{"range":[8586,8598],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":250,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":250,"endColumn":13,"fix":{"range":[8599,8611],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":251,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":251,"endColumn":13,"fix":{"range":[8619,8631],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":252,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":252,"endColumn":17,"fix":{"range":[8686,8702],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":253,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":253,"endColumn":13,"fix":{"range":[8738,8750],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":254,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":254,"endColumn":13,"fix":{"range":[8752,8764],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":255,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":255,"endColumn":13,"fix":{"range":[8765,8777],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":256,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":256,"endColumn":13,"fix":{"range":[8788,8800],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":257,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":257,"endColumn":17,"fix":{"range":[8835,8851],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":258,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":258,"endColumn":13,"fix":{"range":[8892,8904],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":259,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":259,"endColumn":13,"fix":{"range":[8906,8918],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":260,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":260,"endColumn":13,"fix":{"range":[8919,8931],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":261,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":261,"endColumn":13,"fix":{"range":[8979,8991],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":262,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":262,"endColumn":13,"fix":{"range":[9006,9018],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":263,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":263,"endColumn":9,"fix":{"range":[9019,9027],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":264,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":264,"endColumn":13,"fix":{"range":[9045,9057],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":265,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":265,"endColumn":13,"fix":{"range":[9114,9126],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":266,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":266,"endColumn":9,"fix":{"range":[9171,9179],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":267,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":267,"endColumn":5,"fix":{"range":[9181,9185],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":268,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":268,"endColumn":5,"fix":{"range":[9187,9191],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":269,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":269,"endColumn":5,"fix":{"range":[9192,9196],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":272,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":272,"endColumn":5,"fix":{"range":[9220,9224],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":273,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":273,"endColumn":9,"fix":{"range":[9260,9268],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":274,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":274,"endColumn":13,"fix":{"range":[9274,9286],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":275,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":275,"endColumn":17,"fix":{"range":[9313,9329],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":276,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":276,"endColumn":13,"fix":{"range":[9348,9360],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":277,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":277,"endColumn":13,"fix":{"range":[9362,9374],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":278,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":278,"endColumn":13,"fix":{"range":[9375,9387],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":279,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":279,"endColumn":17,"fix":{"range":[9413,9429],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":280,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":280,"endColumn":17,"fix":{"range":[9467,9483],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":281,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":281,"endColumn":17,"fix":{"range":[9519,9535],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":282,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":282,"endColumn":17,"fix":{"range":[9573,9589],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":283,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":283,"endColumn":17,"fix":{"range":[9633,9649],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":284,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":284,"endColumn":13,"fix":{"range":[9660,9672],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":285,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":285,"endColumn":13,"fix":{"range":[9675,9687],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":286,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":286,"endColumn":13,"fix":{"range":[9688,9700],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":287,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":287,"endColumn":13,"fix":{"range":[9708,9720],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":288,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":288,"endColumn":17,"fix":{"range":[9775,9791],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":289,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":289,"endColumn":17,"fix":{"range":[9831,9847],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":290,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":290,"endColumn":21,"fix":{"range":[9884,9904],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":291,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":291,"endColumn":21,"fix":{"range":[9953,9973],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":292,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":292,"endColumn":17,"fix":{"range":[9997,10013],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":293,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":293,"endColumn":13,"fix":{"range":[10015,10027],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":294,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":294,"endColumn":13,"fix":{"range":[10029,10041],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":295,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":295,"endColumn":13,"fix":{"range":[10042,10054],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":296,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":296,"endColumn":13,"fix":{"range":[10064,10076],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":297,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":297,"endColumn":13,"fix":{"range":[10093,10105],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":298,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":298,"endColumn":13,"fix":{"range":[10184,10196],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":299,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":299,"endColumn":13,"fix":{"range":[10197,10209],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":300,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":300,"endColumn":17,"fix":{"range":[10251,10267],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":301,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":301,"endColumn":21,"fix":{"range":[10273,10293],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":302,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":302,"endColumn":21,"fix":{"range":[10346,10366],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":303,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":303,"endColumn":25,"fix":{"range":[10387,10411],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":304,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":304,"endColumn":21,"fix":{"range":[10418,10438],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":305,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":305,"endColumn":17,"fix":{"range":[10440,10456],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":306,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":306,"endColumn":21,"fix":{"range":[10474,10494],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":307,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":307,"endColumn":21,"fix":{"range":[10556,10576],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":308,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":308,"endColumn":17,"fix":{"range":[10586,10602],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":309,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":309,"endColumn":13,"fix":{"range":[10604,10616],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":310,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":310,"endColumn":13,"fix":{"range":[10618,10630],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":311,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":311,"endColumn":13,"fix":{"range":[10631,10643],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":312,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":312,"endColumn":17,"fix":{"range":[10664,10680],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":313,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":313,"endColumn":21,"fix":{"range":[10712,10732],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":314,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":314,"endColumn":17,"fix":{"range":[10775,10791],"text":"        "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":315,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":315,"endColumn":17,"fix":{"range":[10793,10809],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":316,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":316,"endColumn":17,"fix":{"range":[10810,10826],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":317,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":317,"endColumn":21,"fix":{"range":[10847,10867],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":318,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":318,"endColumn":21,"fix":{"range":[10914,10934],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":319,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":319,"endColumn":17,"fix":{"range":[10947,10963],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":320,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":320,"endColumn":13,"fix":{"range":[10965,10977],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":321,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":321,"endColumn":13,"fix":{"range":[10979,10991],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":322,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":322,"endColumn":13,"fix":{"range":[10992,11004],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":323,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":323,"endColumn":13,"fix":{"range":[11013,11025],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":324,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":324,"endColumn":17,"fix":{"range":[11063,11079],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":325,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":325,"endColumn":13,"fix":{"range":[11119,11131],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":326,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":326,"endColumn":13,"fix":{"range":[11133,11145],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":327,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":327,"endColumn":13,"fix":{"range":[11146,11158],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":328,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":328,"endColumn":13,"fix":{"range":[11166,11178],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":329,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":329,"endColumn":17,"fix":{"range":[11231,11247],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":330,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":330,"endColumn":13,"fix":{"range":[11284,11296],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":331,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":331,"endColumn":13,"fix":{"range":[11298,11310],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":332,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":332,"endColumn":13,"fix":{"range":[11311,11323],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":333,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":333,"endColumn":13,"fix":{"range":[11331,11343],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":334,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":334,"endColumn":13,"fix":{"range":[11389,11401],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":335,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":335,"endColumn":13,"fix":{"range":[11402,11414],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":336,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":336,"endColumn":13,"fix":{"range":[11462,11474],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":337,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":337,"endColumn":13,"fix":{"range":[11487,11499],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":338,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":338,"endColumn":9,"fix":{"range":[11500,11508],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":339,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":339,"endColumn":13,"fix":{"range":[11526,11538],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":340,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":340,"endColumn":13,"fix":{"range":[11595,11607],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":341,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":341,"endColumn":9,"fix":{"range":[11652,11660],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":342,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":342,"endColumn":5,"fix":{"range":[11662,11666],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":343,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":343,"endColumn":5,"fix":{"range":[11668,11672],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":344,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":344,"endColumn":5,"fix":{"range":[11673,11677],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":347,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":347,"endColumn":5,"fix":{"range":[11701,11705],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":348,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":348,"endColumn":9,"fix":{"range":[11739,11747],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":349,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":349,"endColumn":13,"fix":{"range":[11753,11765],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":350,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":350,"endColumn":17,"fix":{"range":[11792,11808],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":351,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":351,"endColumn":13,"fix":{"range":[11827,11839],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":352,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":352,"endColumn":13,"fix":{"range":[11841,11853],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":353,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":353,"endColumn":13,"fix":{"range":[11854,11866],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":354,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":354,"endColumn":17,"fix":{"range":[11890,11906],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":355,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":355,"endColumn":17,"fix":{"range":[11954,11970],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":356,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":356,"endColumn":17,"fix":{"range":[12016,12032],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":357,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":357,"endColumn":13,"fix":{"range":[12043,12055],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":358,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":358,"endColumn":13,"fix":{"range":[12058,12070],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":359,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":359,"endColumn":13,"fix":{"range":[12071,12083],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":360,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":360,"endColumn":13,"fix":{"range":[12094,12106],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":361,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":361,"endColumn":17,"fix":{"range":[12168,12184],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":362,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":362,"endColumn":17,"fix":{"range":[12244,12260],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":363,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":363,"endColumn":21,"fix":{"range":[12272,12292],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":364,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":364,"endColumn":17,"fix":{"range":[12345,12361],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":365,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":365,"endColumn":13,"fix":{"range":[12363,12375],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":366,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":366,"endColumn":13,"fix":{"range":[12377,12389],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":367,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":367,"endColumn":13,"fix":{"range":[12390,12402],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":368,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":368,"endColumn":13,"fix":{"range":[12414,12426],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":369,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":369,"endColumn":17,"fix":{"range":[12461,12477],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":370,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":370,"endColumn":17,"fix":{"range":[12547,12563],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":371,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":371,"endColumn":21,"fix":{"range":[12605,12625],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":372,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":372,"endColumn":25,"fix":{"range":[12631,12655],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":373,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":373,"endColumn":21,"fix":{"range":[12699,12719],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":374,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":374,"endColumn":25,"fix":{"range":[12737,12761],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":375,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":375,"endColumn":21,"fix":{"range":[12823,12843],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":376,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":376,"endColumn":17,"fix":{"range":[12845,12861],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":377,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":377,"endColumn":13,"fix":{"range":[12863,12875],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":378,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":378,"endColumn":17,"fix":{"range":[12884,12900],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":379,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":379,"endColumn":13,"fix":{"range":[12968,12980],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":380,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":380,"endColumn":13,"fix":{"range":[12982,12994],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":381,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":381,"endColumn":13,"fix":{"range":[12995,13007],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":382,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":382,"endColumn":13,"fix":{"range":[13017,13029],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":383,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":383,"endColumn":13,"fix":{"range":[13053,13065],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":384,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":384,"endColumn":13,"fix":{"range":[13066,13078],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":385,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":385,"endColumn":13,"fix":{"range":[13089,13101],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":386,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":386,"endColumn":17,"fix":{"range":[13136,13152],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":387,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":387,"endColumn":13,"fix":{"range":[13194,13206],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":388,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":388,"endColumn":13,"fix":{"range":[13208,13220],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":389,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":389,"endColumn":13,"fix":{"range":[13221,13233],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":390,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":390,"endColumn":13,"fix":{"range":[13281,13293],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":391,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":391,"endColumn":13,"fix":{"range":[13306,13318],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":392,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":392,"endColumn":9,"fix":{"range":[13319,13327],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":393,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":393,"endColumn":13,"fix":{"range":[13345,13357],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":394,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":394,"endColumn":13,"fix":{"range":[13414,13426],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":395,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":395,"endColumn":9,"fix":{"range":[13471,13479],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":396,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":396,"endColumn":5,"fix":{"range":[13481,13485],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":397,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":397,"endColumn":5,"fix":{"range":[13487,13491],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":398,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":398,"endColumn":5,"fix":{"range":[13492,13496],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":401,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":401,"endColumn":5,"fix":{"range":[13520,13524],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":402,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":402,"endColumn":9,"fix":{"range":[13552,13560],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":403,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":403,"endColumn":13,"fix":{"range":[13566,13578],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":404,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":404,"endColumn":17,"fix":{"range":[13601,13617],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":405,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":405,"endColumn":17,"fix":{"range":[13655,13671],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":406,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":406,"endColumn":17,"fix":{"range":[13717,13733],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":407,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":407,"endColumn":13,"fix":{"range":[13744,13756],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":408,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":408,"endColumn":13,"fix":{"range":[13759,13771],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":409,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":409,"endColumn":13,"fix":{"range":[13772,13784],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":410,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":410,"endColumn":13,"fix":{"range":[13794,13806],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":411,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":411,"endColumn":17,"fix":{"range":[13867,13883],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":412,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":412,"endColumn":13,"fix":{"range":[13914,13926],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":413,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":413,"endColumn":13,"fix":{"range":[13928,13940],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":414,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":414,"endColumn":13,"fix":{"range":[13941,13953],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":415,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":415,"endColumn":13,"fix":{"range":[13963,13975],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":416,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":416,"endColumn":17,"fix":{"range":[14004,14020],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":417,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":417,"endColumn":21,"fix":{"range":[14062,14082],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":418,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":418,"endColumn":17,"fix":{"range":[14104,14120],"text":"        "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":419,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":419,"endColumn":17,"fix":{"range":[14122,14138],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":420,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":420,"endColumn":17,"fix":{"range":[14139,14155],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":421,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":421,"endColumn":21,"fix":{"range":[14199,14219],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":422,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":422,"endColumn":17,"fix":{"range":[14243,14259],"text":"        "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":423,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":423,"endColumn":17,"fix":{"range":[14261,14277],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":424,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":424,"endColumn":17,"fix":{"range":[14278,14294],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":425,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":425,"endColumn":21,"fix":{"range":[14351,14371],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":426,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":426,"endColumn":17,"fix":{"range":[14400,14416],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":427,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":427,"endColumn":13,"fix":{"range":[14418,14430],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":428,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":428,"endColumn":13,"fix":{"range":[14432,14444],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":429,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":429,"endColumn":13,"fix":{"range":[14445,14457],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":430,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":430,"endColumn":13,"fix":{"range":[14465,14477],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":431,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":431,"endColumn":13,"fix":{"range":[14497,14509],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":432,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":432,"endColumn":13,"fix":{"range":[14510,14522],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":433,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":433,"endColumn":13,"fix":{"range":[14532,14544],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":434,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":434,"endColumn":13,"fix":{"range":[14565,14577],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":435,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":435,"endColumn":13,"fix":{"range":[14578,14590],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":436,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":436,"endColumn":13,"fix":{"range":[14629,14641],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":437,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":437,"endColumn":13,"fix":{"range":[14654,14666],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":438,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":438,"endColumn":9,"fix":{"range":[14667,14675],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":439,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":439,"endColumn":13,"fix":{"range":[14693,14705],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":440,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":440,"endColumn":13,"fix":{"range":[14753,14765],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":441,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":441,"endColumn":9,"fix":{"range":[14810,14818],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":442,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":442,"endColumn":5,"fix":{"range":[14820,14824],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":443,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":443,"endColumn":5,"fix":{"range":[14826,14830],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":444,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":444,"endColumn":5,"fix":{"range":[14831,14835],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":447,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":447,"endColumn":5,"fix":{"range":[14859,14863],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":448,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":448,"endColumn":9,"fix":{"range":[14890,14898],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":449,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":449,"endColumn":13,"fix":{"range":[14904,14916],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":450,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":450,"endColumn":17,"fix":{"range":[14952,14968],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":451,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":451,"endColumn":17,"fix":{"range":[15008,15024],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":452,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":452,"endColumn":13,"fix":{"range":[15038,15050],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":453,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":453,"endColumn":13,"fix":{"range":[15052,15064],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":454,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":454,"endColumn":13,"fix":{"range":[15065,15077],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":455,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":455,"endColumn":17,"fix":{"range":[15099,15115],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":456,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":456,"endColumn":17,"fix":{"range":[15146,15162],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":457,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":457,"endColumn":17,"fix":{"range":[15244,15260],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":458,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":458,"endColumn":13,"fix":{"range":[15271,15283],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":459,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":459,"endColumn":13,"fix":{"range":[15286,15298],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":460,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":460,"endColumn":13,"fix":{"range":[15299,15311],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":461,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":461,"endColumn":13,"fix":{"range":[15353,15365],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":462,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":462,"endColumn":13,"fix":{"range":[15366,15378],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":463,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":463,"endColumn":13,"fix":{"range":[15388,15400],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":464,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":464,"endColumn":13,"fix":{"range":[15420,15432],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":465,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":465,"endColumn":17,"fix":{"range":[15469,15485],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":466,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":466,"endColumn":21,"fix":{"range":[15491,15511],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":467,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":467,"endColumn":21,"fix":{"range":[15566,15586],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":468,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":468,"endColumn":17,"fix":{"range":[15608,15624],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":469,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":469,"endColumn":21,"fix":{"range":[15642,15662],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":470,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":470,"endColumn":21,"fix":{"range":[15716,15736],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":471,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":471,"endColumn":17,"fix":{"range":[15798,15814],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":472,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":472,"endColumn":13,"fix":{"range":[15816,15828],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":473,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":473,"endColumn":13,"fix":{"range":[15830,15842],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":474,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":474,"endColumn":13,"fix":{"range":[15843,15855],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":475,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":475,"endColumn":13,"fix":{"range":[15867,15879],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":476,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":476,"endColumn":13,"fix":{"range":[15959,15971],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":477,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":477,"endColumn":13,"fix":{"range":[15972,15984],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":478,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":478,"endColumn":13,"fix":{"range":[16032,16044],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":479,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":479,"endColumn":13,"fix":{"range":[16060,16072],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":480,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":480,"endColumn":9,"fix":{"range":[16073,16081],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":481,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":481,"endColumn":13,"fix":{"range":[16099,16111],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":482,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":482,"endColumn":13,"fix":{"range":[16159,16171],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":483,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":483,"endColumn":9,"fix":{"range":[16216,16224],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":484,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":484,"endColumn":5,"fix":{"range":[16226,16230],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":485,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":485,"endColumn":5,"fix":{"range":[16232,16236],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":486,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":486,"endColumn":5,"fix":{"range":[16237,16241],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":489,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":489,"endColumn":5,"fix":{"range":[16265,16269],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":490,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":490,"endColumn":9,"fix":{"range":[16298,16306],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":491,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":491,"endColumn":13,"fix":{"range":[16312,16324],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":492,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":492,"endColumn":17,"fix":{"range":[16348,16364],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":493,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":493,"endColumn":17,"fix":{"range":[16409,16425],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":494,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":494,"endColumn":17,"fix":{"range":[16463,16479],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":495,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":495,"endColumn":17,"fix":{"range":[16515,16531],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":496,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":496,"endColumn":13,"fix":{"range":[16542,16554],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":497,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":497,"endColumn":13,"fix":{"range":[16557,16569],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":498,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":498,"endColumn":13,"fix":{"range":[16570,16582],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":499,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":499,"endColumn":17,"fix":{"range":[16603,16619],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":500,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":500,"endColumn":17,"fix":{"range":[16642,16658],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":501,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":501,"endColumn":17,"fix":{"range":[16674,16690],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":502,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":502,"endColumn":17,"fix":{"range":[16711,16727],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":503,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":503,"endColumn":13,"fix":{"range":[16736,16748],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":504,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":504,"endColumn":13,"fix":{"range":[16751,16763],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":505,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":505,"endColumn":13,"fix":{"range":[16764,16776],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":506,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":506,"endColumn":13,"fix":{"range":[16796,16808],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":507,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":507,"endColumn":17,"fix":{"range":[16850,16866],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":508,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":508,"endColumn":17,"fix":{"range":[16901,16917],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":509,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":509,"endColumn":21,"fix":{"range":[16965,16985],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":510,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":510,"endColumn":21,"fix":{"range":[17018,17038],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 12 spaces but found 24.","line":511,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":511,"endColumn":25,"fix":{"range":[17074,17098],"text":"            "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":512,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":512,"endColumn":21,"fix":{"range":[17161,17181],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":513,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":513,"endColumn":17,"fix":{"range":[17183,17199],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":514,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":514,"endColumn":13,"fix":{"range":[17201,17213],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":515,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":515,"endColumn":13,"fix":{"range":[17215,17227],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":516,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":516,"endColumn":13,"fix":{"range":[17228,17240],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":517,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":517,"endColumn":13,"fix":{"range":[17257,17269],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":518,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":518,"endColumn":17,"fix":{"range":[17326,17342],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":519,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":519,"endColumn":13,"fix":{"range":[17404,17416],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":520,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":520,"endColumn":13,"fix":{"range":[17418,17430],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":521,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":521,"endColumn":13,"fix":{"range":[17431,17443],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":522,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":522,"endColumn":13,"fix":{"range":[17453,17465],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":523,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":523,"endColumn":17,"fix":{"range":[17499,17515],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":524,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":524,"endColumn":13,"fix":{"range":[17573,17585],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":525,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":525,"endColumn":13,"fix":{"range":[17587,17599],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":526,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":526,"endColumn":13,"fix":{"range":[17600,17612],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":527,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":527,"endColumn":13,"fix":{"range":[17622,17634],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":528,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":528,"endColumn":13,"fix":{"range":[17668,17680],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":529,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":529,"endColumn":17,"fix":{"range":[17710,17726],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":530,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":530,"endColumn":13,"fix":{"range":[17781,17793],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":531,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":531,"endColumn":13,"fix":{"range":[17795,17807],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":532,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":532,"endColumn":13,"fix":{"range":[17808,17820],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":533,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":533,"endColumn":13,"fix":{"range":[17830,17842],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":534,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":534,"endColumn":17,"fix":{"range":[17893,17909],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":535,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":535,"endColumn":13,"fix":{"range":[17968,17980],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":536,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":536,"endColumn":13,"fix":{"range":[17982,17994],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":537,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":537,"endColumn":13,"fix":{"range":[17995,18007],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":538,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":538,"endColumn":13,"fix":{"range":[18015,18027],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":539,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":539,"endColumn":13,"fix":{"range":[18079,18091],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":540,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":540,"endColumn":13,"fix":{"range":[18174,18186],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":541,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":541,"endColumn":13,"fix":{"range":[18187,18199],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":542,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":542,"endColumn":13,"fix":{"range":[18249,18261],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":543,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":543,"endColumn":13,"fix":{"range":[18279,18291],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":544,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":544,"endColumn":9,"fix":{"range":[18292,18300],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":545,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":545,"endColumn":13,"fix":{"range":[18318,18330],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":546,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":546,"endColumn":13,"fix":{"range":[18378,18390],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":547,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":547,"endColumn":9,"fix":{"range":[18435,18443],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":548,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":548,"endColumn":5,"fix":{"range":[18445,18449],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":549,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":549,"endColumn":5,"fix":{"range":[18451,18455],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":550,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":550,"endColumn":5,"fix":{"range":[18456,18460],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":553,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":553,"endColumn":5,"fix":{"range":[18484,18488],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":554,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":554,"endColumn":9,"fix":{"range":[18529,18537],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":555,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":555,"endColumn":13,"fix":{"range":[18543,18555],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":556,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":556,"endColumn":17,"fix":{"range":[18580,18596],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":557,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":557,"endColumn":17,"fix":{"range":[18639,18655],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":558,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":558,"endColumn":17,"fix":{"range":[18705,18721],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":559,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":559,"endColumn":13,"fix":{"range":[18732,18744],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":560,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":560,"endColumn":13,"fix":{"range":[18747,18759],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":561,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":561,"endColumn":13,"fix":{"range":[18760,18772],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":562,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":562,"endColumn":13,"fix":{"range":[18782,18794],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":563,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":563,"endColumn":13,"fix":{"range":[18879,18891],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":564,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":564,"endColumn":13,"fix":{"range":[18892,18904],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":565,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":565,"endColumn":17,"fix":{"range":[18923,18939],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":566,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":566,"endColumn":13,"fix":{"range":[18967,18979],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":567,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":567,"endColumn":13,"fix":{"range":[18981,18993],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":568,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":568,"endColumn":13,"fix":{"range":[18994,19006],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":569,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":569,"endColumn":13,"fix":{"range":[19017,19029],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":570,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":570,"endColumn":17,"fix":{"range":[19067,19083],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":571,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":571,"endColumn":13,"fix":{"range":[19135,19147],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":572,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":572,"endColumn":13,"fix":{"range":[19149,19161],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":573,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":573,"endColumn":13,"fix":{"range":[19162,19174],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":574,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":574,"endColumn":13,"fix":{"range":[19184,19196],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":575,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":575,"endColumn":17,"fix":{"range":[19233,19249],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":576,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":576,"endColumn":13,"fix":{"range":[19292,19304],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":577,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":577,"endColumn":13,"fix":{"range":[19306,19318],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":578,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":578,"endColumn":13,"fix":{"range":[19319,19331],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":579,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":579,"endColumn":13,"fix":{"range":[19341,19353],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":580,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":580,"endColumn":17,"fix":{"range":[19387,19403],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":581,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":581,"endColumn":13,"fix":{"range":[19445,19457],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":582,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":582,"endColumn":13,"fix":{"range":[19459,19471],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":583,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":583,"endColumn":13,"fix":{"range":[19472,19484],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":584,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":584,"endColumn":13,"fix":{"range":[19504,19516],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":585,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":585,"endColumn":17,"fix":{"range":[19590,19606],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":586,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":586,"endColumn":21,"fix":{"range":[19681,19701],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":587,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":587,"endColumn":17,"fix":{"range":[19735,19751],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":588,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":588,"endColumn":13,"fix":{"range":[19753,19765],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":589,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":589,"endColumn":13,"fix":{"range":[19767,19779],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":590,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":590,"endColumn":13,"fix":{"range":[19780,19792],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":591,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":591,"endColumn":13,"fix":{"range":[19809,19821],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":592,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":592,"endColumn":17,"fix":{"range":[19889,19905],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":593,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":593,"endColumn":13,"fix":{"range":[19964,19976],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":594,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":594,"endColumn":13,"fix":{"range":[19978,19990],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":595,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":595,"endColumn":13,"fix":{"range":[19991,20003],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":596,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":596,"endColumn":13,"fix":{"range":[20013,20025],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":597,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":597,"endColumn":17,"fix":{"range":[20054,20070],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":598,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":598,"endColumn":17,"fix":{"range":[20090,20106],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":599,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":599,"endColumn":21,"fix":{"range":[20158,20178],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":600,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":600,"endColumn":17,"fix":{"range":[20206,20222],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":601,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":601,"endColumn":13,"fix":{"range":[20224,20236],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":602,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":602,"endColumn":13,"fix":{"range":[20238,20250],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":603,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":603,"endColumn":13,"fix":{"range":[20251,20263],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":604,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":604,"endColumn":13,"fix":{"range":[20313,20325],"text":"      "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":605,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":605,"endColumn":13,"fix":{"range":[20338,20350],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":606,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":606,"endColumn":9,"fix":{"range":[20351,20359],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":607,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":607,"endColumn":13,"fix":{"range":[20377,20389],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":608,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":608,"endColumn":13,"fix":{"range":[20437,20449],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":609,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":609,"endColumn":9,"fix":{"range":[20494,20502],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":610,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":610,"endColumn":5,"fix":{"range":[20504,20508],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":611,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":611,"endColumn":5,"fix":{"range":[20510,20514],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":612,"column":1,"nodeType":"Block","messageId":"wrongIndentation","endLine":612,"endColumn":5,"fix":{"range":[20515,20519],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":615,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":615,"endColumn":5,"fix":{"range":[20547,20551],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":616,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":616,"endColumn":9,"fix":{"range":[20571,20579],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":617,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":617,"endColumn":13,"fix":{"range":[20595,20607],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":618,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":618,"endColumn":17,"fix":{"range":[20616,20632],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":619,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":619,"endColumn":17,"fix":{"range":[20655,20671],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":620,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":620,"endColumn":13,"fix":{"range":[20702,20714],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":621,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":621,"endColumn":13,"fix":{"range":[20717,20729],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":622,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":622,"endColumn":17,"fix":{"range":[20742,20758],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":623,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":623,"endColumn":13,"fix":{"range":[20789,20801],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":624,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":624,"endColumn":13,"fix":{"range":[20804,20816],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":625,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":625,"endColumn":17,"fix":{"range":[20827,20843],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":626,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":626,"endColumn":17,"fix":{"range":[20877,20893],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":627,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":627,"endColumn":13,"fix":{"range":[20925,20937],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":628,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":628,"endColumn":13,"fix":{"range":[20940,20952],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":629,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":629,"endColumn":9,"fix":{"range":[20972,20980],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":630,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":630,"endColumn":9,"fix":{"range":[20983,20991],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":631,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":631,"endColumn":9,"fix":{"range":[20992,21000],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":632,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":632,"endColumn":9,"fix":{"range":[21022,21030],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":633,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":633,"endColumn":13,"fix":{"range":[21072,21084],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":634,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":634,"endColumn":13,"fix":{"range":[21110,21122],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":635,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":635,"endColumn":17,"fix":{"range":[21170,21186],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":636,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":636,"endColumn":17,"fix":{"range":[21219,21235],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":637,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":637,"endColumn":21,"fix":{"range":[21246,21266],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":638,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":638,"endColumn":17,"fix":{"range":[21341,21357],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":639,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":639,"endColumn":13,"fix":{"range":[21359,21371],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":640,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":640,"endColumn":13,"fix":{"range":[21373,21385],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":641,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":641,"endColumn":17,"fix":{"range":[21408,21424],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":642,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":642,"endColumn":17,"fix":{"range":[21448,21464],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":643,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":643,"endColumn":13,"fix":{"range":[21491,21503],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":644,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":644,"endColumn":9,"fix":{"range":[21506,21514],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":645,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":645,"endColumn":9,"fix":{"range":[21516,21524],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":646,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":646,"endColumn":9,"fix":{"range":[21525,21533],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":647,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":647,"endColumn":5,"fix":{"range":[21547,21551],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":648,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":648,"endColumn":5,"fix":{"range":[21553,21557],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":649,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":649,"endColumn":5,"fix":{"range":[21558,21562],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":650,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":650,"endColumn":5,"fix":{"range":[21570,21574],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":651,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":651,"endColumn":5,"fix":{"range":[21575,21579],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":652,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":652,"endColumn":9,"fix":{"range":[21622,21630],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":653,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":653,"endColumn":13,"fix":{"range":[21658,21670],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":654,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":654,"endColumn":9,"fix":{"range":[21688,21696],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":655,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":655,"endColumn":9,"fix":{"range":[21698,21706],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":656,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":656,"endColumn":9,"fix":{"range":[21707,21715],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":657,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":657,"endColumn":13,"fix":{"range":[21733,21745],"text":"      "}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":657,"column":50,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":657,"endColumn":69,"fix":{"range":[21782,21801],"text":"{return 'indexedDB';}"}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":658,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":658,"endColumn":13,"fix":{"range":[21802,21814],"text":"      "}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":658,"column":53,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":658,"endColumn":75,"fix":{"range":[21854,21876],"text":"{return 'localStorage';}"}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":659,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":659,"endColumn":9,"fix":{"range":[21877,21885],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":660,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":660,"endColumn":13,"fix":{"range":[21894,21906],"text":"      "}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":660,"column":55,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":660,"endColumn":79,"fix":{"range":[21948,21972],"text":"{return 'sessionStorage';}"}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":661,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":661,"endColumn":13,"fix":{"range":[21973,21985],"text":"      "}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":661,"column":53,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":661,"endColumn":75,"fix":{"range":[22025,22047],"text":"{return 'localStorage';}"}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":662,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":662,"endColumn":9,"fix":{"range":[22048,22056],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":663,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":663,"endColumn":9,"fix":{"range":[22058,22066],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":664,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":664,"endColumn":9,"fix":{"range":[22067,22075],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":665,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":665,"endColumn":5,"fix":{"range":[22092,22096],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":666,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":666,"endColumn":5,"fix":{"range":[22098,22102],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":667,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":667,"endColumn":5,"fix":{"range":[22103,22107],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":668,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":668,"endColumn":9,"fix":{"range":[22143,22151],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":669,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":669,"endColumn":13,"fix":{"range":[22179,22191],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":670,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":670,"endColumn":9,"fix":{"range":[22211,22219],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":671,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":671,"endColumn":9,"fix":{"range":[22221,22229],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":672,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":672,"endColumn":9,"fix":{"range":[22230,22238],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":673,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":673,"endColumn":13,"fix":{"range":[22303,22315],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":674,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":674,"endColumn":5,"fix":{"range":[22382,22386],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":675,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":675,"endColumn":5,"fix":{"range":[22388,22392],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":676,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":676,"endColumn":5,"fix":{"range":[22393,22397],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":677,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":677,"endColumn":9,"fix":{"range":[22431,22439],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":678,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":678,"endColumn":13,"fix":{"range":[22487,22499],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":679,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":679,"endColumn":13,"fix":{"range":[22511,22523],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":680,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":680,"endColumn":13,"fix":{"range":[22572,22584],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":681,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":681,"endColumn":9,"fix":{"range":[22613,22621],"text":"    "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":682,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":682,"endColumn":9,"fix":{"range":[22623,22631],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":683,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":683,"endColumn":9,"fix":{"range":[22632,22640],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":684,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":684,"endColumn":13,"fix":{"range":[22662,22674],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":685,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":685,"endColumn":13,"fix":{"range":[22680,22692],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":686,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":686,"endColumn":13,"fix":{"range":[22715,22727],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":687,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":687,"endColumn":9,"fix":{"range":[22735,22743],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":688,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":688,"endColumn":5,"fix":{"range":[22747,22751],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":689,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":689,"endColumn":5,"fix":{"range":[22753,22757],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":690,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":690,"endColumn":5,"fix":{"range":[22758,22762],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":691,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":691,"endColumn":9,"fix":{"range":[22789,22797],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":692,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":692,"endColumn":9,"fix":{"range":[22834,22842],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":693,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":693,"endColumn":5,"fix":{"range":[22893,22897],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":694,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":694,"endColumn":5,"fix":{"range":[22899,22903],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":695,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":695,"endColumn":5,"fix":{"range":[22904,22908],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":696,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":696,"endColumn":9,"fix":{"range":[22947,22955],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":697,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":697,"endColumn":13,"fix":{"range":[22977,22989],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":698,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":698,"endColumn":13,"fix":{"range":[22994,23006],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":699,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":699,"endColumn":13,"fix":{"range":[23012,23024],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":700,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":700,"endColumn":13,"fix":{"range":[23035,23047],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":701,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":701,"endColumn":9,"fix":{"range":[23069,23077],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":702,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":702,"endColumn":5,"fix":{"range":[23081,23085],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":703,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":703,"endColumn":5,"fix":{"range":[23087,23091],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":704,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":704,"endColumn":5,"fix":{"range":[23092,23096],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":705,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":705,"endColumn":9,"fix":{"range":[23117,23125],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":706,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":706,"endColumn":13,"fix":{"range":[23145,23157],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":707,"column":1,"nodeType":"Keyword","messageId":"wrongIndentation","endLine":707,"endColumn":17,"fix":{"range":[23190,23206],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 10 spaces but found 20.","line":708,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":708,"endColumn":21,"fix":{"range":[23235,23255],"text":"          "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 8 spaces but found 16.","line":709,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":709,"endColumn":17,"fix":{"range":[23303,23319],"text":"        "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 6 spaces but found 12.","line":710,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":710,"endColumn":13,"fix":{"range":[23323,23335],"text":"      "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 4 spaces but found 8.","line":711,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":711,"endColumn":9,"fix":{"range":[23337,23345],"text":"    "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":712,"column":1,"nodeType":"Punctuator","messageId":"wrongIndentation","endLine":712,"endColumn":5,"fix":{"range":[23375,23379],"text":"  "}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":713,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":713,"endColumn":5,"fix":{"range":[23381,23385],"text":""}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":714,"column":1,"nodeType":"Line","messageId":"wrongIndentation","endLine":714,"endColumn":5,"fix":{"range":[23386,23390],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":715,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":715,"endColumn":5,"fix":{"range":[23411,23415],"text":"  "}},{"ruleId":"no-unused-vars","severity":2,"message":"'key' is defined but never used. Allowed unused args must match /^_/u.","line":715,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":715,"endColumn":27},{"ruleId":"no-unused-vars","severity":2,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":715,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":715,"endColumn":33},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":716,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":716,"endColumn":5,"fix":{"range":[23462,23466],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":717,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":717,"endColumn":5,"fix":{"range":[23507,23511],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":718,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":718,"endColumn":5,"fix":{"range":[23552,23556],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":719,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":719,"endColumn":5,"fix":{"range":[23598,23602],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":720,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":720,"endColumn":5,"fix":{"range":[23646,23650],"text":"  "}},{"ruleId":"no-unused-vars","severity":2,"message":"'key' is defined but never used. Allowed unused args must match /^_/u.","line":720,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":720,"endColumn":27},{"ruleId":"no-unused-vars","severity":2,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":720,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":720,"endColumn":33},{"ruleId":"no-unused-vars","severity":2,"message":"'storageType' is defined but never used. Allowed unused args must match /^_/u.","line":720,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":720,"endColumn":46},{"ruleId":"no-unused-vars","severity":2,"message":"'options' is defined but never used. Allowed unused args must match /^_/u.","line":720,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":720,"endColumn":55},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":721,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":721,"endColumn":5,"fix":{"range":[23719,23723],"text":"  "}},{"ruleId":"no-unused-vars","severity":2,"message":"'key' is defined but never used. Allowed unused args must match /^_/u.","line":721,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":721,"endColumn":30},{"ruleId":"no-unused-vars","severity":2,"message":"'storageType' is defined but never used. Allowed unused args must match /^_/u.","line":721,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":721,"endColumn":43},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":722,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":722,"endColumn":5,"fix":{"range":[23780,23784],"text":"  "}},{"ruleId":"no-unused-vars","severity":2,"message":"'key' is defined but never used. Allowed unused args must match /^_/u.","line":722,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":722,"endColumn":28},{"ruleId":"no-unused-vars","severity":2,"message":"'storageType' is defined but never used. Allowed unused args must match /^_/u.","line":722,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":722,"endColumn":41},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":723,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":723,"endColumn":5,"fix":{"range":[23839,23843],"text":"  "}},{"ruleId":"no-unused-vars","severity":2,"message":"'type' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":723,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":723,"endColumn":39},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":724,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":724,"endColumn":5,"fix":{"range":[23907,23911],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":725,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":725,"endColumn":5,"fix":{"range":[23953,23957],"text":"  "}},{"ruleId":"no-unused-vars","severity":2,"message":"'key' is defined but never used. Allowed unused args must match /^_/u.","line":725,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":725,"endColumn":33},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":726,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":726,"endColumn":5,"fix":{"range":[24004,24008],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":727,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":727,"endColumn":5,"fix":{"range":[24048,24052],"text":"  "}},{"ruleId":"no-unused-vars","severity":2,"message":"'item' is defined but never used. Allowed unused args must match /^_/u.","line":727,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":727,"endColumn":24},{"ruleId":"no-unused-vars","severity":2,"message":"'options' is defined but never used. Allowed unused args must match /^_/u.","line":727,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":727,"endColumn":33},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":728,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":728,"endColumn":5,"fix":{"range":[24112,24116],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":729,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":729,"endColumn":5,"fix":{"range":[24159,24163],"text":"  "}},{"ruleId":"no-unused-vars","severity":2,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":729,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":729,"endColumn":35},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":730,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":730,"endColumn":5,"fix":{"range":[24212,24216],"text":"  "}},{"ruleId":"no-unused-vars","severity":2,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":730,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":730,"endColumn":34},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":731,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":731,"endColumn":5,"fix":{"range":[24264,24268],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":736,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":736,"endColumn":5,"fix":{"range":[24380,24384],"text":"  "}},{"ruleId":"indent","severity":2,"message":"Expected indentation of 2 spaces but found 4.","line":738,"column":1,"nodeType":"Identifier","messageId":"wrongIndentation","endLine":738,"endColumn":5,"fix":{"range":[24461,24465],"text":"  "}},{"ruleId":"eol-last","severity":2,"message":"Newline required at end of file but not found.","line":739,"column":2,"nodeType":"Program","messageId":"missing","fix":{"range":[24506,24506],"text":"\n"}}],"suppressedMessages":[],"errorCount":725,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":709,"fixableWarningCount":0,"source":"/**\n * 数据存储和持久化管理器\n * 负责用户数据的存储、检索、持久化和数据完整性保证\n */\nclass StorageManager {\n    constructor(config = {}) {\n        this.config = {\n            // 存储配置\n            enableLocalStorage: config.enableLocalStorage !== false,\n            enableSessionStorage: config.enableSessionStorage !== false,\n            enableIndexedDB: config.enableIndexedDB !== false,\n            enableCloudSync: config.enableCloudSync || false,\n            \n            // 数据完整性配置\n            enableDataValidation: config.enableDataValidation !== false,\n            enableBackup: config.enableBackup !== false,\n            enableEncryption: config.enableEncryption !== false,\n            \n            // 性能配置\n            cacheSize: config.cacheSize || 100,\n            syncInterval: config.syncInterval || 30000, // 30秒\n            compressionEnabled: config.compressionEnabled || false,\n            \n            // 错误处理配置\n            maxRetries: config.maxRetries || 3,\n            retryDelay: config.retryDelay || 1000,\n            fallbackStorage: config.fallbackStorage || 'memory',\n            \n            ...config\n        };\n        \n        this.cache = new Map();\n        this.pendingOperations = new Map();\n        this.syncQueue = [];\n        this.isInitialized = false;\n        this.storageAvailable = {};\n        this.encryptionKey = null;\n        \n        // 绑定方法\n        this.init = this.init.bind(this);\n        this.store = this.store.bind(this);\n        this.retrieve = this.retrieve.bind(this);\n        this.remove = this.remove.bind(this);\n        this.clear = this.clear.bind(this);\n        this.sync = this.sync.bind(this);\n        this.backup = this.backup.bind(this);\n        this.restore = this.restore.bind(this);\n    }\n    \n    /**\n     * 初始化存储管理器\n     */\n    async init() {\n        try {\n            console.log('StorageManager: 开始初始化...');\n            \n            // 检查存储可用性\n            await this.checkStorageAvailability();\n            \n            // 初始化加密\n            if (this.config.enableEncryption) {\n                await this.initEncryption();\n            }\n            \n            // 初始化IndexedDB\n            if (this.config.enableIndexedDB && this.storageAvailable.indexedDB) {\n                await this.initIndexedDB();\n            }\n            \n            // 启动同步服务\n            if (this.config.enableCloudSync) {\n                this.startSyncService();\n            }\n            \n            // 恢复缓存数据\n            await this.loadCacheFromStorage();\n            \n            this.isInitialized = true;\n            console.log('StorageManager: 初始化完成');\n            \n            return {\n                success: true,\n                storageAvailable: this.storageAvailable,\n                config: this.config\n            };\n        } catch (error) {\n            console.error('StorageManager: 初始化失败', error);\n            throw new Error(`存储管理器初始化失败: ${error.message}`);\n        }\n    }\n    \n    /**\n     * 检查存储可用性\n     */\n    async checkStorageAvailability() {\n        // 检查localStorage\n        try {\n            const testKey = '__storage_test__';\n            localStorage.setItem(testKey, 'test');\n            localStorage.removeItem(testKey);\n            this.storageAvailable.localStorage = true;\n        } catch (e) {\n            this.storageAvailable.localStorage = false;\n            console.warn('localStorage 不可用:', e.message);\n        }\n        \n        // 检查sessionStorage\n        try {\n            const testKey = '__session_test__';\n            sessionStorage.setItem(testKey, 'test');\n            sessionStorage.removeItem(testKey);\n            this.storageAvailable.sessionStorage = true;\n        } catch (e) {\n            this.storageAvailable.sessionStorage = false;\n            console.warn('sessionStorage 不可用:', e.message);\n        }\n        \n        // 检查IndexedDB\n        try {\n            this.storageAvailable.indexedDB = 'indexedDB' in window;\n        } catch (e) {\n            this.storageAvailable.indexedDB = false;\n            console.warn('IndexedDB 不可用:', e.message);\n        }\n    }\n    \n    /**\n     * 初始化加密\n     */\n    async initEncryption() {\n        try {\n            if (window.crypto && window.crypto.subtle) {\n                // 生成或获取加密密钥\n                const keyData = localStorage.getItem('__encryption_key__');\n                if (keyData) {\n                    this.encryptionKey = await window.crypto.subtle.importKey(\n                        'raw',\n                        new Uint8Array(JSON.parse(keyData)),\n                        { name: 'AES-GCM' },\n                        false,\n                        ['encrypt', 'decrypt']\n                    );\n                } else {\n                    this.encryptionKey = await window.crypto.subtle.generateKey(\n                        { name: 'AES-GCM', length: 256 },\n                        true,\n                        ['encrypt', 'decrypt']\n                    );\n                    \n                    // 导出并保存密钥\n                    const exportedKey = await window.crypto.subtle.exportKey('raw', this.encryptionKey);\n                    localStorage.setItem('__encryption_key__', JSON.stringify(Array.from(new Uint8Array(exportedKey))));\n                }\n                console.log('StorageManager: 加密初始化完成');\n            } else {\n                console.warn('StorageManager: Web Crypto API 不可用，禁用加密');\n                this.config.enableEncryption = false;\n            }\n        } catch (error) {\n            console.error('StorageManager: 加密初始化失败', error);\n            this.config.enableEncryption = false;\n        }\n    }\n    \n    /**\n     * 初始化IndexedDB\n     */\n    async initIndexedDB() {\n        return new Promise((resolve, reject) => {\n            const request = indexedDB.open('AuthStorageDB', 1);\n            \n            request.onerror = () => {\n                console.error('StorageManager: IndexedDB 打开失败');\n                this.storageAvailable.indexedDB = false;\n                reject(request.error);\n            };\n            \n            request.onsuccess = () => {\n                this.indexedDB = request.result;\n                console.log('StorageManager: IndexedDB 初始化完成');\n                resolve();\n            };\n            \n            request.onupgradeneeded = (event) => {\n                const db = event.target.result;\n                \n                // 创建用户数据存储\n                if (!db.objectStoreNames.contains('users')) {\n                    const userStore = db.createObjectStore('users', { keyPath: 'id' });\n                    userStore.createIndex('username', 'username', { unique: true });\n                    userStore.createIndex('email', 'email', { unique: true });\n                }\n                \n                // 创建会话数据存储\n                if (!db.objectStoreNames.contains('sessions')) {\n                    db.createObjectStore('sessions', { keyPath: 'id' });\n                }\n                \n                // 创建备份数据存储\n                if (!db.objectStoreNames.contains('backups')) {\n                    db.createObjectStore('backups', { keyPath: 'timestamp' });\n                }\n            };\n        });\n    }\n    \n    /**\n     * 存储数据\n     */\n    async store(key, data, options = {}) {\n        try {\n            if (!this.isInitialized) {\n                await this.init();\n            }\n            \n            const storeOptions = {\n                persistent: options.persistent !== false,\n                encrypted: options.encrypted || this.config.enableEncryption,\n                backup: options.backup !== false,\n                validate: options.validate !== false,\n                storageType: options.storageType || 'auto',\n                ...options\n            };\n            \n            // 数据验证\n            if (storeOptions.validate && this.config.enableDataValidation) {\n                await this.validateData(key, data);\n            }\n            \n            // 数据加密\n            let processedData = data;\n            if (storeOptions.encrypted && this.encryptionKey) {\n                processedData = await this.encryptData(data);\n            }\n            \n            // 数据压缩\n            if (this.config.compressionEnabled) {\n                processedData = await this.compressData(processedData);\n            }\n            \n            // 选择存储方式\n            const storageType = this.selectStorageType(storeOptions.storageType, storeOptions.persistent);\n            \n            // 执行存储\n            const result = await this.executeStore(key, processedData, storageType, storeOptions);\n            \n            // 更新缓存\n            this.updateCache(key, data, storeOptions);\n            \n            // 创建备份\n            if (storeOptions.backup && this.config.enableBackup) {\n                await this.createBackup(key, data);\n            }\n            \n            // 添加到同步队列\n            if (this.config.enableCloudSync) {\n                this.addToSyncQueue(key, data, 'store');\n            }\n            \n            console.log(`StorageManager: 数据存储成功 - ${key}`);\n            return result;\n            \n        } catch (error) {\n            console.error(`StorageManager: 数据存储失败 - ${key}`, error);\n            throw new Error(`数据存储失败: ${error.message}`);\n        }\n    }\n    \n    /**\n     * 检索数据\n     */\n    async retrieve(key, options = {}) {\n        try {\n            if (!this.isInitialized) {\n                await this.init();\n            }\n            \n            const retrieveOptions = {\n                useCache: options.useCache !== false,\n                decrypt: options.decrypt !== false,\n                fallback: options.fallback !== false,\n                storageType: options.storageType || 'auto',\n                ...options\n            };\n            \n            // 检查缓存\n            if (retrieveOptions.useCache && this.cache.has(key)) {\n                const cachedData = this.cache.get(key);\n                if (this.isCacheValid(cachedData)) {\n                    console.log(`StorageManager: 从缓存获取数据 - ${key}`);\n                    return cachedData.data;\n                }\n            }\n            \n            // 从存储中检索\n            let data = null;\n            const storageTypes = this.getStorageTypePriority(retrieveOptions.storageType);\n            \n            for (const storageType of storageTypes) {\n                try {\n                    data = await this.executeRetrieve(key, storageType);\n                    if (data !== null) {\n                        break;\n                    }\n                } catch (error) {\n                    console.warn(`StorageManager: 从 ${storageType} 检索失败`, error);\n                    continue;\n                }\n            }\n            \n            if (data === null) {\n                if (retrieveOptions.fallback) {\n                    data = await this.retrieveFromBackup(key);\n                }\n                \n                if (data === null) {\n                    console.log(`StorageManager: 数据不存在 - ${key}`);\n                    return null;\n                }\n            }\n            \n            // 数据解压缩\n            if (this.config.compressionEnabled) {\n                data = await this.decompressData(data);\n            }\n            \n            // 数据解密\n            if (retrieveOptions.decrypt && this.encryptionKey) {\n                data = await this.decryptData(data);\n            }\n            \n            // 更新缓存\n            this.updateCache(key, data, retrieveOptions);\n            \n            console.log(`StorageManager: 数据检索成功 - ${key}`);\n            return data;\n            \n        } catch (error) {\n            console.error(`StorageManager: 数据检索失败 - ${key}`, error);\n            throw new Error(`数据检索失败: ${error.message}`);\n        }\n    }\n    \n    /**\n     * 删除数据\n     */\n    async remove(key, options = {}) {\n        try {\n            if (!this.isInitialized) {\n                await this.init();\n            }\n            \n            const removeOptions = {\n                removeFromAll: options.removeFromAll !== false,\n                createBackup: options.createBackup !== false,\n                ...options\n            };\n            \n            // 创建删除前备份\n            if (removeOptions.createBackup && this.config.enableBackup) {\n                const data = await this.retrieve(key, { useCache: false });\n                if (data) {\n                    await this.createBackup(key, data, 'before_delete');\n                }\n            }\n            \n            // 从所有存储中删除\n            if (removeOptions.removeFromAll) {\n                const storageTypes = ['localStorage', 'sessionStorage', 'indexedDB'];\n                for (const storageType of storageTypes) {\n                    try {\n                        await this.executeRemove(key, storageType);\n                    } catch (error) {\n                        console.warn(`StorageManager: 从 ${storageType} 删除失败`, error);\n                    }\n                }\n            } else {\n                await this.executeRemove(key, removeOptions.storageType || 'auto');\n            }\n            \n            // 从缓存中删除\n            this.cache.delete(key);\n            \n            // 添加到同步队列\n            if (this.config.enableCloudSync) {\n                this.addToSyncQueue(key, null, 'remove');\n            }\n            \n            console.log(`StorageManager: 数据删除成功 - ${key}`);\n            return true;\n            \n        } catch (error) {\n            console.error(`StorageManager: 数据删除失败 - ${key}`, error);\n            throw new Error(`数据删除失败: ${error.message}`);\n        }\n    }\n    \n    /**\n     * 清空存储\n     */\n    async clear(options = {}) {\n        try {\n            const clearOptions = {\n                clearAll: options.clearAll !== false,\n                createBackup: options.createBackup !== false,\n                ...options\n            };\n            \n            // 创建全量备份\n            if (clearOptions.createBackup && this.config.enableBackup) {\n                await this.createFullBackup();\n            }\n            \n            // 清空各种存储\n            if (clearOptions.clearAll) {\n                if (this.storageAvailable.localStorage) {\n                    localStorage.clear();\n                }\n                \n                if (this.storageAvailable.sessionStorage) {\n                    sessionStorage.clear();\n                }\n                \n                if (this.storageAvailable.indexedDB && this.indexedDB) {\n                    await this.clearIndexedDB();\n                }\n            }\n            \n            // 清空缓存\n            this.cache.clear();\n            \n            // 清空同步队列\n            this.syncQueue = [];\n            \n            console.log('StorageManager: 存储清空完成');\n            return true;\n            \n        } catch (error) {\n            console.error('StorageManager: 存储清空失败', error);\n            throw new Error(`存储清空失败: ${error.message}`);\n        }\n    }\n    \n    /**\n     * 数据同步\n     */\n    async sync(options = {}) {\n        try {\n            if (!this.config.enableCloudSync) {\n                console.warn('StorageManager: 云同步未启用');\n                return false;\n            }\n            \n            const syncOptions = {\n                force: options.force || false,\n                direction: options.direction || 'bidirectional', // 'up', 'down', 'bidirectional'\n                ...options\n            };\n            \n            console.log('StorageManager: 开始数据同步...');\n            \n            // 处理同步队列\n            const results = [];\n            for (const item of this.syncQueue) {\n                try {\n                    const result = await this.syncItem(item, syncOptions);\n                    results.push(result);\n                } catch (error) {\n                    console.error('StorageManager: 同步项目失败', item, error);\n                    results.push({ success: false, error: error.message, item });\n                }\n            }\n            \n            // 清空已同步的项目\n            this.syncQueue = this.syncQueue.filter((_, index) => !results[index]?.success);\n            \n            console.log('StorageManager: 数据同步完成', results);\n            return results;\n            \n        } catch (error) {\n            console.error('StorageManager: 数据同步失败', error);\n            throw new Error(`数据同步失败: ${error.message}`);\n        }\n    }\n    \n    /**\n     * 创建备份\n     */\n    async backup(options = {}) {\n        try {\n            const backupOptions = {\n                includeCache: options.includeCache || false,\n                compress: options.compress !== false,\n                encrypt: options.encrypt !== false,\n                ...options\n            };\n            \n            const backupData = {\n                timestamp: Date.now(),\n                version: '1.0',\n                config: this.config,\n                data: {}\n            };\n            \n            // 备份localStorage数据\n            if (this.storageAvailable.localStorage) {\n                backupData.data.localStorage = {};\n                for (let i = 0; i < localStorage.length; i++) {\n                    const key = localStorage.key(i);\n                    if (key && !key.startsWith('__')) {\n                        backupData.data.localStorage[key] = localStorage.getItem(key);\n                    }\n                }\n            }\n            \n            // 备份IndexedDB数据\n            if (this.storageAvailable.indexedDB && this.indexedDB) {\n                backupData.data.indexedDB = await this.exportIndexedDBData();\n            }\n            \n            // 备份缓存数据\n            if (backupOptions.includeCache) {\n                backupData.data.cache = Array.from(this.cache.entries());\n            }\n            \n            // 压缩备份数据\n            let processedBackup = backupData;\n            if (backupOptions.compress) {\n                processedBackup = await this.compressData(backupData);\n            }\n            \n            // 加密备份数据\n            if (backupOptions.encrypt && this.encryptionKey) {\n                processedBackup = await this.encryptData(processedBackup);\n            }\n            \n            // 保存备份\n            const backupKey = `backup_${backupData.timestamp}`;\n            await this.store(backupKey, processedBackup, { persistent: true, backup: false });\n            \n            console.log('StorageManager: 备份创建完成', backupKey);\n            return backupKey;\n            \n        } catch (error) {\n            console.error('StorageManager: 备份创建失败', error);\n            throw new Error(`备份创建失败: ${error.message}`);\n        }\n    }\n    \n    /**\n     * 恢复备份\n     */\n    async restore(backupKey, options = {}) {\n        try {\n            const restoreOptions = {\n                clearBefore: options.clearBefore || false,\n                validateBackup: options.validateBackup !== false,\n                ...options\n            };\n            \n            // 获取备份数据\n            let backupData = await this.retrieve(backupKey, { useCache: false, decrypt: true });\n            \n            if (!backupData) {\n                throw new Error('备份数据不存在');\n            }\n            \n            // 解压缩备份数据\n            if (this.config.compressionEnabled) {\n                backupData = await this.decompressData(backupData);\n            }\n            \n            // 验证备份数据\n            if (restoreOptions.validateBackup) {\n                await this.validateBackupData(backupData);\n            }\n            \n            // 清空现有数据\n            if (restoreOptions.clearBefore) {\n                await this.clear({ createBackup: true });\n            }\n            \n            // 恢复localStorage数据\n            if (backupData.data.localStorage && this.storageAvailable.localStorage) {\n                for (const [key, value] of Object.entries(backupData.data.localStorage)) {\n                    localStorage.setItem(key, value);\n                }\n            }\n            \n            // 恢复IndexedDB数据\n            if (backupData.data.indexedDB && this.storageAvailable.indexedDB) {\n                await this.importIndexedDBData(backupData.data.indexedDB);\n            }\n            \n            // 恢复缓存数据\n            if (backupData.data.cache) {\n                this.cache.clear();\n                for (const [key, value] of backupData.data.cache) {\n                    this.cache.set(key, value);\n                }\n            }\n            \n            console.log('StorageManager: 备份恢复完成', backupKey);\n            return true;\n            \n        } catch (error) {\n            console.error('StorageManager: 备份恢复失败', error);\n            throw new Error(`备份恢复失败: ${error.message}`);\n        }\n    }\n    \n    /**\n     * 获取存储统计信息\n     */\n    getStorageStats() {\n        const stats = {\n            cache: {\n                size: this.cache.size,\n                maxSize: this.config.cacheSize\n            },\n            syncQueue: {\n                pending: this.syncQueue.length\n            },\n            storage: {\n                available: this.storageAvailable,\n                initialized: this.isInitialized\n            },\n            config: this.config\n        };\n        \n        // 计算localStorage使用情况\n        if (this.storageAvailable.localStorage) {\n            let localStorageSize = 0;\n            for (let i = 0; i < localStorage.length; i++) {\n                const key = localStorage.key(i);\n                if (key) {\n                    localStorageSize += key.length + (localStorage.getItem(key) || '').length;\n                }\n            }\n            stats.localStorage = {\n                used: localStorageSize,\n                items: localStorage.length\n            };\n        }\n        \n        return stats;\n    }\n    \n    // 辅助方法\n    \n    selectStorageType(requested, persistent) {\n        if (requested !== 'auto') {\n            return requested;\n        }\n        \n        if (persistent) {\n            if (this.storageAvailable.indexedDB) return 'indexedDB';\n            if (this.storageAvailable.localStorage) return 'localStorage';\n        } else {\n            if (this.storageAvailable.sessionStorage) return 'sessionStorage';\n            if (this.storageAvailable.localStorage) return 'localStorage';\n        }\n        \n        return 'memory';\n    }\n    \n    getStorageTypePriority(requested) {\n        if (requested !== 'auto') {\n            return [requested];\n        }\n        \n        return ['indexedDB', 'localStorage', 'sessionStorage', 'memory']\n            .filter(type => this.storageAvailable[type] || type === 'memory');\n    }\n    \n    updateCache(key, data, options) {\n        if (this.cache.size >= this.config.cacheSize) {\n            // 删除最旧的缓存项\n            const firstKey = this.cache.keys().next().value;\n            this.cache.delete(firstKey);\n        }\n        \n        this.cache.set(key, {\n            data,\n            timestamp: Date.now(),\n            options\n        });\n    }\n    \n    isCacheValid(cachedData) {\n        const maxAge = 5 * 60 * 1000; // 5分钟\n        return Date.now() - cachedData.timestamp < maxAge;\n    }\n    \n    addToSyncQueue(key, data, operation) {\n        this.syncQueue.push({\n            key,\n            data,\n            operation,\n            timestamp: Date.now()\n        });\n    }\n    \n    startSyncService() {\n        setInterval(() => {\n            if (this.syncQueue.length > 0) {\n                this.sync().catch(error => {\n                    console.error('StorageManager: 自动同步失败', error);\n                });\n            }\n        }, this.config.syncInterval);\n    }\n    \n    // 占位方法 - 需要根据具体需求实现\n    async validateData(key, data) { return true; }\n    async encryptData(data) { return data; }\n    async decryptData(data) { return data; }\n    async compressData(data) { return data; }\n    async decompressData(data) { return data; }\n    async executeStore(key, data, storageType, options) { return true; }\n    async executeRetrieve(key, storageType) { return null; }\n    async executeRemove(key, storageType) { return true; }\n    async createBackup(key, data, type = 'normal') { return true; }\n    async createFullBackup() { return true; }\n    async retrieveFromBackup(key) { return null; }\n    async clearIndexedDB() { return true; }\n    async syncItem(item, options) { return { success: true }; }\n    async exportIndexedDBData() { return {}; }\n    async importIndexedDBData(data) { return true; }\n    async validateBackupData(data) { return true; }\n    async loadCacheFromStorage() { return true; }\n}\n\n// 导出模块\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = StorageManager;\n} else if (typeof window !== 'undefined') {\n    window.StorageManager = StorageManager;\n}","usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\auth\\ui-interaction.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\cart.js","messages":[{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":31,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":31,"endColumn":5,"fix":{"range":[954,958],"text":""}}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":1,"fixableWarningCount":0,"source":"// 购物车功能模块 - 增强版本地存储持久化\n\n/**\n * 购物车数据管理器 - 负责数据存储和业务逻辑\n * 分离数据管理和UI更新逻辑，提高代码可维护性\n */\nclass CartDataManager {\n  constructor(dependencies = {}) {\n    this.storage = dependencies.storage || window.diContainer?.get('storage');\n    this.config = dependencies.config || window.config?.getModule('cart') || window.CONSTANTS?.CART || {};\n    this.utils = dependencies.utils || window.utils;\n\n    this.items = [];\n    this.storageKey = this.config.storageKey || 'nexusShopCart';\n    this.version = this.config.version || '1.0';\n    this.maxItems = this.config.maxItems || window.MAGIC_NUMBERS?.LIMITS?.MAX_CART_ITEMS || 100;\n    this.autoSaveInterval = this.config.autoSaveInterval || window.MAGIC_NUMBERS?.TIMEOUTS?.SAVE_DELAY || 30000;\n\n    this.loadCart();\n    this.setupAutoSave();\n  }\n\n  /**\n   * 添加商品到购物车数据\n   */\n  addItem(product, quantity = 1) {\n    // 输入验证\n    if (!product || typeof product !== 'object' || !product.id) {\n      return this.items;\n    }\n    \n    const existingItem = this.items.find(item => item.id === product.id);\n\n    if (existingItem) {\n      existingItem.quantity += quantity;\n    } else {\n      // 确保价格是数字类型\n      const price = typeof product.price === 'string' ? parseFloat(product.price) : product.price;\n      this.items.push({\n        id: product.id,\n        name: product.name,\n        price: isNaN(price) ? 0 : price,\n        image: product.image,\n        quantity: quantity\n      });\n    }\n\n    this.saveCart();\n    return this.items;\n  }\n\n  /**\n   * 从购物车移除商品\n   */\n  removeItem(productId) {\n    this.items = this.items.filter(item => item.id !== productId);\n    this.saveCart();\n    return this.items;\n  }\n\n  /**\n   * 更新商品数量\n   */\n  updateQuantity(productId, quantity) {\n    const item = this.items.find(cartItem => cartItem.id === productId);\n    if (item) {\n      if (quantity <= 0) {\n        return this.removeItem(productId);\n      }\n      item.quantity = quantity;\n      this.saveCart();\n      return this.items;\n\n    }\n    return this.items;\n  }\n\n  /**\n   * 清空购物车\n   */\n  clearCart() {\n    this.items = [];\n    // 清空购物车时移除localStorage中的数据\n    if (this.storage?.local?.removeItem) {\n      this.storage.local.removeItem(this.storageKey);\n    } else {\n      localStorage.removeItem(this.storageKey);\n    }\n    return this.items;\n  }\n\n  /**\n   * 获取购物车总金额\n   */\n  getTotal() {\n    return this.items.reduce((total, item) => total + (item.price * item.quantity), 0);\n  }\n\n  /**\n   * 获取购物车商品总数量\n   */\n  getTotalItems() {\n    return this.items.reduce((total, item) => total + item.quantity, 0);\n  }\n\n  /**\n   * 获取购物车商品列表\n   */\n  getItems() {\n    return [...this.items]; // 返回副本，防止外部修改\n  }\n\n  /**\n   * 从本地存储加载购物车数据\n   */\n  loadCart() {\n    try {\n      const storedData = this.storage?.local?.getItem(this.storageKey) || localStorage.getItem(this.storageKey);\n      if (!storedData) {\n        this.items = [];\n        return;\n      }\n\n      const data = JSON.parse(storedData);\n\n      // 数据验证\n      if (!Array.isArray(data)) {\n        if (window.errorUtils) {\n          window.errorUtils.handleError({\n            type: 'warning',\n            operation: '购物车数据验证',\n            message: '购物车数据格式错误，重置购物车',\n            error: new Error('购物车数据格式错误'),\n            context: { component: 'CartDataManager', severity: 'medium', category: 'validation' }\n          });\n        } else {\n          console.warn('购物车数据格式错误，重置购物车');\n        }\n        this.items = [];\n        return;\n      }\n\n      // 验证每个商品项的结构\n      this.items = data.filter(item => {\n        return item &&\n                    typeof item.id === 'string' &&\n                    typeof item.name === 'string' &&\n                    typeof item.price === 'number' &&\n                    typeof item.quantity === 'number' &&\n                    item.quantity > 0;\n      });\n\n    } catch (error) {\n      if (window.errorUtils) {\n        window.errorUtils.handleError({\n          type: 'error',\n          operation: '加载购物车数据',\n          message: '购物车数据加载失败，已重置为空购物车',\n          error: error,\n          context: { component: 'CartDataManager', severity: 'high', category: 'storage' }\n        });\n      } else {\n        console.error('加载购物车数据失败:', error);\n      }\n\n      // 使用全局错误处理器\n      if (window.errorHandler) {\n        window.errorHandler.handleStorageError(error, '加载购物车数据');\n      }\n\n      // 清除损坏的数据\n      if (this.storage?.local?.removeItem) {\n        this.storage.local.removeItem(this.storageKey);\n      } else {\n        localStorage.removeItem(this.storageKey);\n      }\n      this.items = [];\n    }\n  }\n\n  /**\n   * 保存购物车到本地存储\n   */\n  saveCart() {\n    try {\n      const cartData = {\n        version: this.version,\n        timestamp: Date.now(),\n        items: this.items,\n        metadata: {\n          totalItems: this.getTotalItems(),\n          totalAmount: this.getTotal(),\n          lastUpdated: new Date().toISOString()\n        }\n      };\n\n      if (this.storage?.setItem) {\n        this.storage.setItem(this.storageKey, JSON.stringify(cartData));\n      } else if (this.storage?.local?.setItem) {\n        this.storage.local.setItem(this.storageKey, JSON.stringify(cartData));\n      } else {\n        localStorage.setItem(this.storageKey, JSON.stringify(cartData));\n      }\n\n      // 触发自定义事件通知其他组件\n      window.dispatchEvent(new CustomEvent('cartUpdated', {\n        detail: {\n          items: this.items,\n          totalItems: this.getTotalItems(),\n          totalAmount: this.getTotal()\n        }\n      }));\n\n      return true;\n    } catch (error) {\n      if (window.errorUtils) {\n        window.errorUtils.handleError({\n          type: 'error',\n          operation: '保存购物车数据',\n          message: '购物车数据保存失败，请稍后重试',\n          error: error,\n          context: { component: 'CartDataManager', severity: 'high', category: 'storage' }\n        });\n      } else {\n        console.error('保存购物车数据失败:', error);\n      }\n\n      // 使用全局错误处理器\n      if (window.errorHandler) {\n        window.errorHandler.handleStorageError(error, '保存购物车数据');\n      }\n\n      // 如果是存储配额问题，尝试清理旧数据\n      if (error.name === 'QuotaExceededError') {\n        this.handleStorageQuotaExceeded();\n      }\n\n      return false;\n    }\n  }\n\n  /**\n   * 处理存储配额超限情况\n   */\n  handleStorageQuotaExceeded() {\n    if (window.errorUtils) {\n      window.errorUtils.handleError({\n        type: 'warning',\n        operation: '存储配额管理',\n        message: '本地存储配额已满，正在尝试清理数据',\n        error: new Error('本地存储配额已满'),\n        context: { component: 'CartDataManager', severity: 'medium', category: 'storage' }\n      });\n    } else {\n      console.warn('本地存储配额已满，尝试清理数据');\n    }\n\n    try {\n      // 保留最近的100个商品记录\n      if (this.items.length > 100) {\n        this.items = this.items.slice(-100);\n        this.saveCart();\n        if (this.utils?.showNotification) {\n          this.utils.showNotification('购物车数据已优化，保留最近100件商品', 'info');\n        } else {\n          if (window.errorUtils) {\n            window.errorUtils.handleError({\n              type: 'info',\n              operation: '购物车数据优化',\n              message: '购物车数据已优化，保留最近100件商品',\n              context: { component: 'CartDataManager', severity: 'low', category: 'info' }\n            });\n          } else {\n            console.info('购物车数据已优化，保留最近100件商品');\n          }\n        }\n      } else {\n        // 如果商品数量不多但仍然出错，可能是浏览器存储空间不足\n        if (this.utils?.showNotification) {\n          this.utils.showNotification('浏览器存储空间不足，请清理浏览器数据', 'error');\n        } else {\n          if (window.errorUtils) {\n            window.errorUtils.handleError({\n              type: 'error',\n              operation: '存储空间检查',\n              message: '浏览器存储空间不足，请清理浏览器数据',\n              error: new Error('浏览器存储空间不足'),\n              context: { component: 'CartDataManager', severity: 'high', category: 'storage' }\n            });\n          } else {\n            console.error('浏览器存储空间不足，请清理浏览器数据');\n          }\n        }\n      }\n    } catch (error) {\n      if (window.errorUtils) {\n        window.errorUtils.handleError({\n          type: 'error',\n          operation: '处理存储配额',\n          message: '存储空间优化失败',\n          error: error,\n          context: { component: 'CartDataManager', severity: 'medium', category: 'storage' }\n        });\n      } else {\n        console.error('处理存储配额失败:', error);\n      }\n    }\n  }\n\n  /**\n   * 设置自动保存机制\n   */\n  setupAutoSave() {\n    setInterval(() => {\n      this.saveCart();\n    }, this.autoSaveInterval);\n  }\n\n  // 这些方法在ShoppingCart类中已经实现，这里删除重复定义\n}\n\n/**\n * ShoppingCart UI管理器类\n * 负责购物车的UI更新和用户交互\n */\nclass ShoppingCart {\n  constructor(dataManager = null) {\n    this.dataManager = dataManager || new CartDataManager();\n    this.domUtils = window.domUtils || null;\n    this.utils = window.utils || null;\n  }\n\n  /**\n   * 初始化购物车UI\n   */\n  init() {\n    // 监听存储变化\n    window.addEventListener('storage', (e) => {\n      if (e.key === this.dataManager.storageKey) {\n        this.dataManager.loadCart();\n        this.updateCartDisplay();\n      }\n    });\n\n    // 页面卸载时保存数据\n    window.addEventListener('beforeunload', () => {\n      this.dataManager.saveCart();\n    });\n\n    // 初始化显示\n    this.updateCartDisplay();\n\n    // 设置自动保存\n    this.setupAutoSave();\n  }\n\n  /**\n   * 设置自动保存机制\n   */\n  setupAutoSave() {\n    setInterval(() => {\n      this.dataManager.saveCart();\n    }, 30000);\n  }\n\n  /**\n   * 添加商品到购物车\n   */\n  addProduct(product) {\n    const result = this.dataManager.addItem(product);\n    this.updateCartDisplay();\n    if (this.utils?.showNotification) {\n      this.utils.showNotification(`${product.name} 已添加到购物车`, 'success');\n    }\n    return result;\n  }\n\n  /**\n   * 从购物车移除商品\n   */\n  removeProduct(productId) {\n    const result = this.dataManager.removeItem(productId);\n    this.updateCartDisplay();\n    if (this.utils?.showNotification) {\n      this.utils.showNotification('商品已从购物车移除', 'info');\n    }\n    return result;\n  }\n\n  /**\n   * 更新商品数量\n   */\n  updateProductQuantity(productId, quantity) {\n    const result = this.dataManager.updateQuantity(productId, quantity);\n    this.updateCartDisplay();\n    return result;\n  }\n\n  /**\n   * 清空购物车\n   */\n  clearCart() {\n    this.dataManager.clearCart();\n    this.updateCartDisplay();\n    if (this.utils?.showNotification) {\n      this.utils.showNotification('购物车已清空', 'info');\n    }\n  }\n\n  /**\n   * 更新购物车显示\n   */\n  updateCartDisplay() {\n    this.updateCartCount();\n    this.updateCartTotal();\n    this.renderCartItems();\n  }\n\n  /**\n   * 更新购物车数量显示\n   */\n  updateCartCount() {\n    const countElements = document.querySelectorAll('.cart-count, #cart-count');\n    const totalItems = this.dataManager.getTotalItems();\n\n    countElements.forEach(element => {\n      if (element) {\n        element.textContent = totalItems;\n        element.style.display = totalItems > 0 ? 'inline' : 'none';\n      }\n    });\n  }\n\n  /**\n   * 更新购物车总价显示\n   */\n  updateCartTotal() {\n    const totalElements = document.querySelectorAll('.cart-total, #cart-total');\n    const total = this.dataManager.getTotal();\n\n    totalElements.forEach(element => {\n      if (element) {\n        element.textContent = `¥${total.toFixed(2)}`;\n      }\n    });\n  }\n\n  /**\n   * 渲染购物车商品列表\n   */\n  renderCartItems() {\n    const cartContainer = document.querySelector('#cart-items, .cart-items');\n    if (!cartContainer) {return;}\n\n    const items = this.dataManager.getItems();\n\n    if (items.length === 0) {\n      cartContainer.innerHTML = '<p class=\"empty-cart\">购物车为空</p>';\n      return;\n    }\n\n    cartContainer.innerHTML = items.map(item => `\n      <div class=\"cart-item\" data-product-id=\"${item.id}\">\n        <img src=\"${item.image}\" alt=\"${item.name}\" class=\"cart-item-image\">\n        <div class=\"cart-item-details\">\n          <h4>${item.name}</h4>\n          <p class=\"cart-item-price\">¥${item.price.toFixed(2)}</p>\n          <div class=\"cart-item-quantity\">\n            <button class=\"quantity-btn minus\" onclick=\"cart.updateProductQuantity('${item.id}', ${item.quantity - 1})\">-</button>\n            <span class=\"quantity\">${item.quantity}</span>\n            <button class=\"quantity-btn plus\" onclick=\"cart.updateProductQuantity('${item.id}', ${item.quantity + 1})\">+</button>\n          </div>\n        </div>\n        <button class=\"remove-item\" onclick=\"cart.removeProduct('${item.id}')\">\n          <i class=\"fas fa-trash\"></i>\n        </button>\n      </div>\n    `).join('');\n  }\n\n  // 代理方法，直接调用数据管理器的方法\n  getItems() {\n    return this.dataManager.getItems();\n  }\n\n  getTotal() {\n    return this.dataManager.getTotal();\n  }\n\n  getTotalItems() {\n    return this.dataManager.getTotalItems();\n  }\n\n  // 兼容旧接口 - 这些方法在CartDataManager中已定义，这里只是代理\n  addItem(product, quantity = 1) {\n    return this.dataManager.addItem(product, quantity);\n  }\n\n  removeItem(productId) {\n    return this.dataManager.removeItem(productId);\n  }\n\n  updateQuantity(productId, quantity) {\n    return this.dataManager.updateQuantity(productId, quantity);\n  }\n\n  /**\n   * 别名方法 - 为了兼容测试\n   */\n  clear() {\n    return this.clearCart();\n  }\n\n  updateUI() {\n    return this.updateCartDisplay();\n  }\n\n  /**\n   * 从存储加载购物车数据 - 兼容测试\n   */\n  loadFromStorage() {\n    return this.dataManager.loadCart();\n  }\n\n  /**\n   * 获取购物车商品数组 - 兼容测试\n   */\n  get items() {\n    return this.dataManager.getItems();\n  }\n\n  /**\n   * 获取商品总数量 - 兼容测试\n   */\n  getItemCount() {\n    return this.dataManager.getTotalItems();\n  }\n\n  /**\n   * 获取唯一商品数量 - 兼容测试\n   */\n  getUniqueItemCount() {\n    return this.dataManager.getItems().length;\n  }\n}\n\n// 创建全局购物车实例\n// 使用依赖注入容器创建购物车实例\nif (typeof window !== 'undefined') {\n  // 等待依赖注入容器初始化\n  if (window.diContainer) {\n    window.cart = new ShoppingCart();\n    window.diContainer.register('cart', window.cart);\n  } else {\n    // 如果依赖注入容器未初始化，延迟创建\n    document.addEventListener('DOMContentLoaded', () => {\n      window.cart = new ShoppingCart();\n      if (window.diContainer) {\n        window.diContainer.register('cart', window.cart);\n      }\n    });\n  }\n}\n\n// 导出类和实例\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = { CartDataManager, ShoppingCart };\n} else {\n  window.CartDataManager = CartDataManager;\n  window.ShoppingCart = ShoppingCart;\n}\n","usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\click-effects.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\code-analyzer.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\constants.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\dependency-injection.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\di-container.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\error-handler.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\error-utils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\image-optimization.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\input-validator.js","messages":[{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":5,"column":3,"nodeType":"Program","messageId":"trailingSpace","endLine":5,"endColumn":4,"fix":{"range":[63,64],"text":""}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":274,"column":31,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":274,"endColumn":42,"fix":{"range":[6855,6866],"text":"{score += 1;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":275,"column":32,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":275,"endColumn":43,"fix":{"range":[6898,6909],"text":"{score += 1;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":276,"column":32,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":276,"endColumn":43,"fix":{"range":[6941,6952],"text":"{score += 1;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":279,"column":33,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":279,"endColumn":44,"fix":{"range":[7000,7011],"text":"{score += 1;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":280,"column":33,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":280,"endColumn":44,"fix":{"range":[7044,7055],"text":"{score += 1;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":281,"column":30,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":281,"endColumn":41,"fix":{"range":[7085,7096],"text":"{score += 1;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":282,"column":40,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":282,"endColumn":51,"fix":{"range":[7136,7147],"text":"{score += 1;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":285,"column":53,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":285,"endColumn":64,"fix":{"range":[7214,7225],"text":"{score += 1;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":286,"column":61,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":286,"endColumn":72,"fix":{"range":[7286,7297],"text":"{score += 1;}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":289,"column":20,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":289,"endColumn":34,"fix":{"range":[7332,7346],"text":"{return 'weak';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":290,"column":20,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":290,"endColumn":36,"fix":{"range":[7366,7382],"text":"{return 'medium';}"}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":291,"column":20,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":291,"endColumn":36,"fix":{"range":[7402,7418],"text":"{return 'strong';}"}},{"ruleId":"eol-last","severity":2,"message":"Newline required at end of file but not found.","line":355,"column":2,"nodeType":"Program","messageId":"missing","fix":{"range":[9145,9145],"text":"\n"}}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":14,"fixableWarningCount":0,"source":"/**\n * 输入数据验证模块\n * 提供用户注册表单的客户端验证功能\n * 支持用户名、邮箱、密码的实时验证和批量验证\n * \n * @author AI Assistant\n * @version 1.0.0\n * @since 2025-01-12\n */\n\nclass InputValidator {\n  constructor() {\n    this.validationRules = {\n      username: {\n        minLength: 3,\n        maxLength: 20,\n        pattern: /^[a-zA-Z0-9_-]+$/,\n        reserved: ['admin', 'root', 'user', 'test', 'guest', 'system']\n      },\n      email: {\n        pattern: /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/,\n        maxLength: 254\n      },\n      password: {\n        minLength: 8,\n        maxLength: 128,\n        requireUppercase: true,\n        requireLowercase: true,\n        requireNumbers: true,\n        requireSpecialChars: true,\n        specialChars: '!@#$%^&*()_+-=[]{}|;:,.<>?',\n        commonPasswords: [\n          'password', '123456', '123456789', 'qwerty', 'abc123',\n          'password123', 'admin', 'letmein', 'welcome', 'monkey'\n        ]\n      }\n    };\n\n    this.errorMessages = {\n      username: {\n        required: '用户名不能为空',\n        minLength: '用户名至少需要3个字符',\n        maxLength: '用户名不能超过20个字符',\n        pattern: '用户名只能包含字母、数字、下划线和连字符',\n        reserved: '该用户名为系统保留，请选择其他用户名'\n      },\n      email: {\n        required: '邮箱地址不能为空',\n        pattern: '请输入有效的邮箱地址',\n        maxLength: '邮箱地址过长'\n      },\n      password: {\n        required: '密码不能为空',\n        minLength: '密码至少需要8个字符',\n        maxLength: '密码不能超过128个字符',\n        requireUppercase: '密码必须包含至少一个大写字母',\n        requireLowercase: '密码必须包含至少一个小写字母',\n        requireNumbers: '密码必须包含至少一个数字',\n        requireSpecialChars: '密码必须包含至少一个特殊字符',\n        commonPassword: '密码过于简单，请选择更安全的密码'\n      },\n      confirmPassword: {\n        required: '请确认密码',\n        mismatch: '两次输入的密码不一致'\n      }\n    };\n  }\n\n  /**\n   * 验证用户名\n   * @param {string} username - 用户名\n   * @returns {Object} 验证结果 {isValid: boolean, errors: string[]}\n   */\n  validateUsername(username) {\n    const errors = [];\n    const rules = this.validationRules.username;\n    const messages = this.errorMessages.username;\n\n    // 必填检查\n    if (!username || username.trim() === '') {\n      errors.push(messages.required);\n      return { isValid: false, errors };\n    }\n\n    username = username.trim();\n\n    // 长度检查\n    if (username.length < rules.minLength) {\n      errors.push(messages.minLength);\n    }\n    if (username.length > rules.maxLength) {\n      errors.push(messages.maxLength);\n    }\n\n    // 格式检查\n    if (!rules.pattern.test(username)) {\n      errors.push(messages.pattern);\n    }\n\n    // 保留字检查\n    if (rules.reserved.includes(username.toLowerCase())) {\n      errors.push(messages.reserved);\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      sanitized: username\n    };\n  }\n\n  /**\n   * 验证邮箱地址\n   * @param {string} email - 邮箱地址\n   * @returns {Object} 验证结果 {isValid: boolean, errors: string[]}\n   */\n  validateEmail(email) {\n    const errors = [];\n    const rules = this.validationRules.email;\n    const messages = this.errorMessages.email;\n\n    // 必填检查\n    if (!email || email.trim() === '') {\n      errors.push(messages.required);\n      return { isValid: false, errors };\n    }\n\n    email = email.trim().toLowerCase();\n\n    // 长度检查\n    if (email.length > rules.maxLength) {\n      errors.push(messages.maxLength);\n    }\n\n    // 格式检查\n    if (!rules.pattern.test(email)) {\n      errors.push(messages.pattern);\n    }\n\n    // 额外的邮箱格式检查\n    if (email.includes('..') || email.startsWith('.') || email.endsWith('.')) {\n      errors.push(messages.pattern);\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      sanitized: email\n    };\n  }\n\n  /**\n   * 验证密码强度\n   * @param {string} password - 密码\n   * @returns {Object} 验证结果 {isValid: boolean, errors: string[], strength: string}\n   */\n  validatePassword(password) {\n    const errors = [];\n    const rules = this.validationRules.password;\n    const messages = this.errorMessages.password;\n\n    // 必填检查\n    if (!password) {\n      errors.push(messages.required);\n      return { isValid: false, errors, strength: 'none' };\n    }\n\n    // 长度检查\n    if (password.length < rules.minLength) {\n      errors.push(messages.minLength);\n    }\n    if (password.length > rules.maxLength) {\n      errors.push(messages.maxLength);\n    }\n\n    // 字符类型检查\n    if (rules.requireUppercase && !/[A-Z]/.test(password)) {\n      errors.push(messages.requireUppercase);\n    }\n    if (rules.requireLowercase && !/[a-z]/.test(password)) {\n      errors.push(messages.requireLowercase);\n    }\n    if (rules.requireNumbers && !/\\d/.test(password)) {\n      errors.push(messages.requireNumbers);\n    }\n    if (rules.requireSpecialChars && !new RegExp(`[${this.escapeRegex(rules.specialChars)}]`).test(password)) {\n      errors.push(messages.requireSpecialChars);\n    }\n\n    // 常见密码检查\n    if (rules.commonPasswords.includes(password.toLowerCase())) {\n      errors.push(messages.commonPassword);\n    }\n\n    // 计算密码强度\n    const strength = this.calculatePasswordStrength(password);\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      strength\n    };\n  }\n\n  /**\n   * 验证确认密码\n   * @param {string} password - 原密码\n   * @param {string} confirmPassword - 确认密码\n   * @returns {Object} 验证结果 {isValid: boolean, errors: string[]}\n   */\n  validateConfirmPassword(password, confirmPassword) {\n    const errors = [];\n    const messages = this.errorMessages.confirmPassword;\n\n    // 必填检查\n    if (!confirmPassword) {\n      errors.push(messages.required);\n      return { isValid: false, errors };\n    }\n\n    // 一致性检查\n    if (password !== confirmPassword) {\n      errors.push(messages.mismatch);\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors\n    };\n  }\n\n  /**\n   * 批量验证所有字段\n   * @param {Object} formData - 表单数据\n   * @param {string} formData.username - 用户名\n   * @param {string} formData.email - 邮箱\n   * @param {string} formData.password - 密码\n   * @param {string} formData.confirmPassword - 确认密码\n   * @returns {Object} 验证结果\n   */\n  validateAll(formData) {\n    const results = {\n      username: this.validateUsername(formData.username),\n      email: this.validateEmail(formData.email),\n      password: this.validatePassword(formData.password),\n      confirmPassword: this.validateConfirmPassword(formData.password, formData.confirmPassword)\n    };\n\n    const isValid = Object.values(results).every(result => result.isValid);\n    const allErrors = Object.values(results).flatMap(result => result.errors);\n\n    return {\n      isValid,\n      errors: allErrors,\n      fieldResults: results,\n      sanitizedData: {\n        username: results.username.sanitized,\n        email: results.email.sanitized,\n        password: formData.password // 密码不进行清理，保持原样\n      }\n    };\n  }\n\n  /**\n   * 计算密码强度\n   * @private\n   * @param {string} password - 密码\n   * @returns {string} 强度等级 ('weak'|'medium'|'strong'|'very-strong')\n   */\n  calculatePasswordStrength(password) {\n    let score = 0;\n\n    // 长度评分\n    if (password.length >= 8) score += 1;\n    if (password.length >= 12) score += 1;\n    if (password.length >= 16) score += 1;\n\n    // 字符类型评分\n    if (/[a-z]/.test(password)) score += 1;\n    if (/[A-Z]/.test(password)) score += 1;\n    if (/\\d/.test(password)) score += 1;\n    if (/[^a-zA-Z0-9]/.test(password)) score += 1;\n\n    // 复杂度评分\n    if (/[a-z].*[A-Z]|[A-Z].*[a-z]/.test(password)) score += 1;\n    if (/\\d.*[^a-zA-Z0-9]|[^a-zA-Z0-9].*\\d/.test(password)) score += 1;\n\n    // 返回强度等级\n    if (score < 3) return 'weak';\n    if (score < 5) return 'medium';\n    if (score < 7) return 'strong';\n    return 'very-strong';\n  }\n\n  /**\n   * 转义正则表达式特殊字符\n   * @private\n   * @param {string} string - 需要转义的字符串\n   * @returns {string} 转义后的字符串\n   */\n  escapeRegex(string) {\n    return string.replace(/[.*+?^${}()|[\\]\\\\-]/g, '\\\\$&');\n  }\n\n  /**\n   * 获取密码强度描述\n   * @param {string} strength - 强度等级\n   * @returns {Object} 强度描述 {text: string, color: string, percentage: number}\n   */\n  getPasswordStrengthDescription(strength) {\n    const descriptions = {\n      'none': { text: '无', color: '#ccc', percentage: 0 },\n      'weak': { text: '弱', color: '#ff4757', percentage: 25 },\n      'medium': { text: '中等', color: '#ffa502', percentage: 50 },\n      'strong': { text: '强', color: '#2ed573', percentage: 75 },\n      'very-strong': { text: '很强', color: '#1e90ff', percentage: 100 }\n    };\n\n    return descriptions[strength] || descriptions.none;\n  }\n\n  /**\n   * 实时验证字段\n   * @param {string} fieldName - 字段名称\n   * @param {string} value - 字段值\n   * @param {string} [compareValue] - 比较值（用于确认密码）\n   * @returns {Object} 验证结果\n   */\n  validateField(fieldName, value, compareValue = null) {\n    switch (fieldName) {\n    case 'username':\n      return this.validateUsername(value);\n    case 'email':\n      return this.validateEmail(value);\n    case 'password':\n      return this.validatePassword(value);\n    case 'confirmPassword':\n      return this.validateConfirmPassword(compareValue, value);\n    default:\n      return { isValid: true, errors: [] };\n    }\n  }\n}\n\n// 导出验证器类\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = InputValidator;\n} else if (typeof window !== 'undefined') {\n  window.InputValidator = InputValidator;\n}\n\n// 创建全局实例\nif (typeof window !== 'undefined') {\n  window.inputValidator = new InputValidator();\n}","usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\lazy-loader.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\order-ui.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\order.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\password-security.js","messages":[{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":50,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":50,"endColumn":5,"fix":{"range":[1053,1057],"text":""}},{"ruleId":"no-else-return","severity":2,"message":"Unnecessary 'else' after 'return'.","line":72,"column":12,"nodeType":"BlockStatement","messageId":"unexpected","endLine":75,"endColumn":6,"fix":{"range":[1467,1804],"text":"(length = this.config.salt.length) {\n    if (this.environment === 'browser') {\n      const saltArray = new Uint8Array(length);\n      window.crypto.getRandomValues(saltArray);\n      return this.arrayBufferToBase64(saltArray);\n    } \n      const salt = this.crypto.randomBytes(length);\n      return salt.toString('base64');\n    \n  }"}},{"ruleId":"no-else-return","severity":2,"message":"Unnecessary 'else' after 'return'.","line":95,"column":12,"nodeType":"BlockStatement","messageId":"unexpected","endLine":97,"endColumn":6,"fix":{"range":[1984,2372],"text":"(password, salt) {\n    if (!password || typeof password !== 'string') {\n      throw new Error('密码必须是非空字符串');\n    }\n\n    if (!salt || typeof salt !== 'string') {\n      throw new Error('盐值必须是非空字符串');\n    }\n\n    if (this.environment === 'browser') {\n      return await this.hashPasswordBrowser(password, salt);\n    } \n      return await this.hashPasswordNode(password, salt);\n    \n  }"}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":163,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":163,"endColumn":7,"fix":{"range":[3982,3988],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":212,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":212,"endColumn":5,"fix":{"range":[5208,5212],"text":""}},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":222,"column":22,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":222,"endColumn":34,"fix":{"range":[5403,5415],"text":"{return true;}"}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":223,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":223,"endColumn":5,"fix":{"range":[5416,5420],"text":""}},{"ruleId":"no-else-return","severity":2,"message":"Unnecessary 'else' after 'return'.","line":242,"column":12,"nodeType":"BlockStatement","messageId":"unexpected","endLine":245,"endColumn":6,"fix":{"range":[5761,6109],"text":"() {\n    const tokenLength = 32;\n    if (this.environment === 'browser') {\n      const tokenArray = new Uint8Array(tokenLength);\n      window.crypto.getRandomValues(tokenArray);\n      return this.arrayBufferToBase64(tokenArray);\n    } \n      const token = this.crypto.randomBytes(tokenLength);\n      return token.toString('base64');\n    \n  }"}},{"ruleId":"eol-last","severity":2,"message":"Newline required at end of file but not found.","line":297,"column":2,"nodeType":"Program","messageId":"missing","fix":{"range":[7386,7386],"text":"\n"}}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":9,"fixableWarningCount":0,"source":"/**\n * 密码安全处理模块\n * 提供密码哈希、盐值生成、安全存储等功能\n * 使用现代加密标准确保密码安全\n */\nclass PasswordSecurity {\n  constructor() {\n    // 配置参数\n    this.config = {\n      // PBKDF2 配置\n      pbkdf2: {\n        iterations: 100000, // OWASP 推荐最小值\n        keyLength: 64,      // 输出密钥长度（字节）\n        digest: 'sha512'    // 哈希算法\n      },\n      // 盐值配置\n      salt: {\n        length: 32          // 盐值长度（字节）\n      },\n      // 密码策略\n      policy: {\n        minLength: 8,\n        maxLength: 128,\n        requireUppercase: true,\n        requireLowercase: true,\n        requireNumbers: true,\n        requireSpecialChars: true\n      }\n    };\n\n    // 检查环境支持\n    this.checkEnvironmentSupport();\n  }\n\n  /**\n   * 检查环境是否支持所需的加密功能\n   */\n  checkEnvironmentSupport() {\n    // 优先检查 Node.js 环境（包括 Jest 测试环境）\n    if (typeof process !== 'undefined' && process.versions && process.versions.node) {\n      // Node.js 环境\n      try {\n        this.crypto = require('crypto');\n        this.environment = 'node';\n        return;\n      } catch (error) {\n        throw new Error('Node.js 环境缺少 crypto 模块');\n      }\n    }\n    \n    if (typeof window !== 'undefined') {\n      // 浏览器环境\n      if (!window.crypto || !window.crypto.subtle) {\n        throw new Error('当前浏览器不支持 Web Crypto API，无法进行安全的密码处理');\n      }\n      this.environment = 'browser';\n    } else {\n      throw new Error('不支持的运行环境');\n    }\n  }\n\n  /**\n   * 生成加密安全的随机盐值\n   * @param {number} length - 盐值长度（字节）\n   * @returns {Promise<string>} Base64 编码的盐值\n   */\n  async generateSalt(length = this.config.salt.length) {\n    if (this.environment === 'browser') {\n      const saltArray = new Uint8Array(length);\n      window.crypto.getRandomValues(saltArray);\n      return this.arrayBufferToBase64(saltArray);\n    } else {\n      const salt = this.crypto.randomBytes(length);\n      return salt.toString('base64');\n    }\n  }\n\n  /**\n   * 使用 PBKDF2 算法哈希密码\n   * @param {string} password - 原始密码\n   * @param {string} salt - Base64 编码的盐值\n   * @returns {Promise<string>} Base64 编码的哈希值\n   */\n  async hashPassword(password, salt) {\n    if (!password || typeof password !== 'string') {\n      throw new Error('密码必须是非空字符串');\n    }\n\n    if (!salt || typeof salt !== 'string') {\n      throw new Error('盐值必须是非空字符串');\n    }\n\n    if (this.environment === 'browser') {\n      return await this.hashPasswordBrowser(password, salt);\n    } else {\n      return await this.hashPasswordNode(password, salt);\n    }\n  }\n\n  /**\n   * 浏览器环境下的密码哈希\n   */\n  async hashPasswordBrowser(password, salt) {\n    const encoder = new TextEncoder();\n    const passwordBuffer = encoder.encode(password);\n    const saltBuffer = this.base64ToArrayBuffer(salt);\n\n    // 导入密码作为密钥材料\n    const keyMaterial = await window.crypto.subtle.importKey(\n      'raw',\n      passwordBuffer,\n      { name: 'PBKDF2' },\n      false,\n      ['deriveBits']\n    );\n\n    // 派生密钥\n    const derivedKey = await window.crypto.subtle.deriveBits(\n      {\n        name: 'PBKDF2',\n        salt: saltBuffer,\n        iterations: this.config.pbkdf2.iterations,\n        hash: this.config.pbkdf2.digest.toUpperCase()\n      },\n      keyMaterial,\n      this.config.pbkdf2.keyLength * 8 // 转换为位数\n    );\n\n    return this.arrayBufferToBase64(new Uint8Array(derivedKey));\n  }\n\n  /**\n   * Node.js 环境下的密码哈希\n   */\n  async hashPasswordNode(password, salt) {\n    return new Promise((resolve, reject) => {\n      this.crypto.pbkdf2(\n        password,\n        Buffer.from(salt, 'base64'),\n        this.config.pbkdf2.iterations,\n        this.config.pbkdf2.keyLength,\n        this.config.pbkdf2.digest,\n        (err, derivedKey) => {\n          if (err) {\n            reject(new Error(`密码哈希失败: ${err.message}`));\n          } else {\n            resolve(derivedKey.toString('base64'));\n          }\n        }\n      );\n    });\n  }\n\n  /**\n   * 创建完整的密码哈希（包含盐值生成）\n   * @param {string} password - 原始密码\n   * @returns {Promise<Object>} 包含哈希值和盐值的对象\n   */\n  async createPasswordHash(password) {\n    try {\n      const salt = await this.generateSalt();\n      const hash = await this.hashPassword(password, salt);\n      \n      return {\n        hash,\n        salt,\n        algorithm: 'PBKDF2',\n        iterations: this.config.pbkdf2.iterations,\n        keyLength: this.config.pbkdf2.keyLength,\n        digest: this.config.pbkdf2.digest,\n        timestamp: new Date().toISOString()\n      };\n    } catch (error) {\n      throw new Error(`创建密码哈希失败: ${error.message}`);\n    }\n  }\n\n  /**\n   * 验证密码\n   * @param {string} password - 待验证的密码\n   * @param {Object} storedHash - 存储的哈希信息\n   * @returns {Promise<boolean>} 验证结果\n   */\n  async verifyPassword(password, storedHash) {\n    try {\n      if (!storedHash || !storedHash.hash || !storedHash.salt) {\n        throw new Error('存储的哈希信息不完整');\n      }\n\n      const computedHash = await this.hashPassword(password, storedHash.salt);\n      return this.secureCompare(computedHash, storedHash.hash);\n    } catch (error) {\n      throw new Error(`密码验证失败: ${error.message}`);\n    }\n  }\n\n  /**\n   * 安全的字符串比较（防止时序攻击）\n   * @param {string} a - 字符串 A\n   * @param {string} b - 字符串 B\n   * @returns {boolean} 比较结果\n   */\n  secureCompare(a, b) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    let result = 0;\n    for (let i = 0; i < a.length; i++) {\n      result |= a.charCodeAt(i) ^ b.charCodeAt(i);\n    }\n    \n    return result === 0;\n  }\n\n  /**\n   * 检查密码是否需要重新哈希（算法升级）\n   * @param {Object} storedHash - 存储的哈希信息\n   * @returns {boolean} 是否需要重新哈希\n   */\n  needsRehash(storedHash) {\n    if (!storedHash) return true;\n    \n    return (\n      storedHash.algorithm !== 'PBKDF2' ||\n      storedHash.iterations < this.config.pbkdf2.iterations ||\n      storedHash.keyLength !== this.config.pbkdf2.keyLength ||\n      storedHash.digest !== this.config.pbkdf2.digest\n    );\n  }\n\n  /**\n   * 生成密码重置令牌\n   * @returns {Promise<string>} 安全的重置令牌\n   */\n  async generateResetToken() {\n    const tokenLength = 32;\n    if (this.environment === 'browser') {\n      const tokenArray = new Uint8Array(tokenLength);\n      window.crypto.getRandomValues(tokenArray);\n      return this.arrayBufferToBase64(tokenArray);\n    } else {\n      const token = this.crypto.randomBytes(tokenLength);\n      return token.toString('base64');\n    }\n  }\n\n  /**\n   * 工具方法：ArrayBuffer 转 Base64\n   */\n  arrayBufferToBase64(buffer) {\n    const bytes = new Uint8Array(buffer);\n    let binary = '';\n    for (let i = 0; i < bytes.byteLength; i++) {\n      binary += String.fromCharCode(bytes[i]);\n    }\n    return btoa(binary);\n  }\n\n  /**\n   * 工具方法：Base64 转 ArrayBuffer\n   */\n  base64ToArrayBuffer(base64) {\n    const binary = atob(base64);\n    const bytes = new Uint8Array(binary.length);\n    for (let i = 0; i < binary.length; i++) {\n      bytes[i] = binary.charCodeAt(i);\n    }\n    return bytes.buffer;\n  }\n\n  /**\n   * 获取密码安全配置信息\n   * @returns {Object} 配置信息（不包含敏感数据）\n   */\n  getSecurityInfo() {\n    return {\n      algorithm: 'PBKDF2',\n      iterations: this.config.pbkdf2.iterations,\n      keyLength: this.config.pbkdf2.keyLength,\n      digest: this.config.pbkdf2.digest,\n      saltLength: this.config.salt.length,\n      environment: this.environment,\n      supportedFeatures: {\n        webCrypto: this.environment === 'browser' && !!window.crypto?.subtle,\n        nodeCrypto: this.environment === 'node' && !!this.crypto\n      }\n    };\n  }\n}\n\n// 导出模块\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = PasswordSecurity;\n} else if (typeof window !== 'undefined') {\n  window.PasswordSecurity = PasswordSecurity;\n}","usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\payment-ui.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\payment.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\performance-dashboard.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\performance-monitor.js","messages":[{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":14,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":14,"endColumn":3,"fix":{"range":[272,274],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":31,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":31,"endColumn":3,"fix":{"range":[733,735],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":39,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":39,"endColumn":3,"fix":{"range":[941,943],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":609,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":609,"endColumn":5,"fix":{"range":[17805,17809],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":658,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":658,"endColumn":5,"fix":{"range":[19128,19132],"text":""}}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":5,"fixableWarningCount":0,"source":"/* global Utils */\r\n/**\r\n * 性能监控和错误追踪模块\r\n * 提供页面性能监控、错误收集、用户行为分析等功能\r\n */\r\n\r\n// 性能监控常量定义\r\nconst PERFORMANCE_CONSTANTS = {\r\n  // 默认配置\r\n  DEFAULT_SAMPLE_RATE: 1.0,\r\n  DEFAULT_MAX_ERRORS: 50,\r\n  DEFAULT_MAX_PERFORMANCE_ENTRIES: 100,\r\n  DEFAULT_REPORT_INTERVAL: 30000, // 30秒\r\n  \r\n  // 性能阈值\r\n  THRESHOLDS: {\r\n    LOAD_TIME_GOOD: 1000,    // 1秒\r\n    LOAD_TIME_FAIR: 2000,    // 2秒\r\n    LOAD_TIME_POOR: 3000,    // 3秒\r\n    LCP_GOOD: 2500,          // 2.5秒\r\n    FID_GOOD: 100,           // 100毫秒\r\n    CLS_GOOD: 0.1,           // 0.1\r\n    ERROR_SCORE_MULTIPLIER: 5,\r\n    MAX_ERROR_PENALTY: 30,\r\n    SLOW_RESOURCE_SCORE_MULTIPLIER: 3,\r\n    MAX_SLOW_RESOURCE_PENALTY: 20,\r\n    LCP_PENALTY: 15,\r\n    FID_PENALTY: 10,\r\n    CLS_PENALTY: 10\r\n  },\r\n  \r\n  // 用户行为追踪\r\n  BEHAVIOR: {\r\n    SCROLL_THROTTLE: 100,     // 滚动节流时间\r\n    MOUSEMOVE_THROTTLE: 500,  // 鼠标移动节流时间\r\n    STATS_UPDATE_INTERVAL: 10000, // 统计更新间隔\r\n    TEXT_TRUNCATE_LENGTH: 50  // 文本截断长度\r\n  },\r\n  \r\n  // 资源监控\r\n  RESOURCE: {\r\n    SLOW_RESOURCE_THRESHOLD: 1000, // 慢资源阈值\r\n    MAX_URL_LENGTH: 200            // URL最大长度\r\n  }\r\n};\r\nclass PerformanceMonitor {\r\n  /**\r\n     * 创建性能监控器实例\r\n     * @param {Object} options - 配置选项\r\n     * @param {boolean} options.enablePerformanceMonitoring - 是否启用性能监控\r\n     * @param {boolean} options.enableErrorTracking - 是否启用错误追踪\r\n     * @param {boolean} options.enableUserBehaviorTracking - 是否启用用户行为追踪\r\n     * @param {boolean} options.enableResourceMonitoring - 是否启用资源监控\r\n     * @param {number} options.sampleRate - 采样率\r\n     * @param {number} options.maxErrors - 最大错误数量\r\n     * @param {number} options.maxPerformanceEntries - 最大性能条目数量\r\n     * @param {number} options.reportInterval - 报告间隔（毫秒）\r\n     */\r\n  constructor(options = {}) {\r\n    // 使用统一配置模块\r\n    const defaultConfig = window.config?.getModule('performance') || window.CONSTANTS?.PERFORMANCE || {\r\n      enablePerformanceMonitoring: true,\r\n      enableErrorTracking: true,\r\n      enableUserBehaviorTracking: true,\r\n      enableResourceMonitoring: true,\r\n      sampleRate: PERFORMANCE_CONSTANTS.DEFAULT_SAMPLE_RATE,\r\n      maxErrors: PERFORMANCE_CONSTANTS.DEFAULT_MAX_ERRORS,\r\n      maxPerformanceEntries: PERFORMANCE_CONSTANTS.DEFAULT_MAX_PERFORMANCE_ENTRIES,\r\n      reportInterval: PERFORMANCE_CONSTANTS.DEFAULT_REPORT_INTERVAL\r\n    };\r\n\r\n    this.options = {\r\n      ...defaultConfig,\r\n      ...options\r\n    };\r\n\r\n    this.performanceData = {\r\n      pageLoad: {},\r\n      navigation: {},\r\n      resources: [],\r\n      userTiming: [],\r\n      vitals: {}\r\n    };\r\n\r\n    this.errors = [];\r\n    this.userBehavior = [];\r\n    this.behaviorStats = {\r\n      clicks: 0,\r\n      scrolls: 0,\r\n      keystrokes: 0,\r\n      mouseMovements: 0,\r\n      pageViews: 0,\r\n      timeOnPage: 0,\r\n      bounceRate: 0,\r\n      engagementScore: 0\r\n    };\r\n    this.sessionStartTime = Date.now();\r\n    this.lastActivityTime = Date.now();\r\n    this.isInitialized = false;\r\n    this.isDestroyed = false;\r\n    this.reportTimer = null;\r\n    this.slowResources = [];\r\n\r\n    this.init();\r\n  }\r\n\r\n  /**\r\n     * 初始化性能监控\r\n     */\r\n  init() {\r\n    if (this.isInitialized) {return;}\r\n\r\n    try {\r\n      if (this.options.enablePerformanceMonitoring) {\r\n        this.initPerformanceMonitoring();\r\n      }\r\n\r\n      if (this.options.enableErrorTracking) {\r\n        this.initErrorTracking();\r\n      }\r\n\r\n      if (this.options.enableUserBehaviorTracking) {\r\n        this.initUserBehaviorTracking();\r\n      }\r\n\r\n      if (this.options.enableResourceMonitoring) {\r\n        this.initResourceMonitoring();\r\n      }\r\n\r\n      this.initWebVitals();\r\n      this.startPeriodicReporting();\r\n\r\n      this.isInitialized = true;\r\n      console.log('PerformanceMonitor initialized successfully');\r\n    } catch (error) {\r\n      if (window.errorUtils) {\r\n        window.errorUtils.handleError(error, {\r\n          context: 'PerformanceMonitor initialization',\r\n          severity: 'high',\r\n          category: 'performance',\r\n          userMessage: '性能监控初始化失败'\r\n        });\r\n      } else {\r\n        console.error('Failed to initialize PerformanceMonitor:', error);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 初始化性能监控\r\n     */\r\n  initPerformanceMonitoring() {\r\n    // 监控页面加载性能\r\n    if (window.performance && window.performance.timing) {\r\n      window.addEventListener('load', () => {\r\n        setTimeout(() => {\r\n          this.collectPageLoadMetrics();\r\n        }, 0);\r\n      });\r\n    }\r\n\r\n    // 监控导航性能\r\n    if (window.performance && window.performance.getEntriesByType) {\r\n      this.collectNavigationMetrics();\r\n    }\r\n\r\n    // 使用 Performance Observer 监控性能条目\r\n    if (window.PerformanceObserver) {\r\n      this.initPerformanceObserver();\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 收集页面加载指标\r\n     * 包括页面加载时间、DOM解析时间、资源加载时间等关键性能指标\r\n     * @private\r\n     */\r\n  collectPageLoadMetrics() {\r\n    try {\r\n      // 验证性能API可用性\r\n      if (!window.performance || !window.performance.timing) {\r\n        console.warn('Performance timing API not available');\r\n        return;\r\n      }\r\n\r\n      const timing = window.performance.timing;\r\n      const navigation = window.performance.navigation;\r\n\r\n      // 验证timing对象的有效性\r\n      if (!timing.navigationStart || timing.navigationStart <= 0) {\r\n        console.warn('Invalid navigation start time');\r\n        return;\r\n      }\r\n\r\n      // 安全地计算时间差，确保不为负值\r\n      const safeDiff = (end, start) => {\r\n        if (!end || !start || end < start) {return 0;}\r\n        return Math.max(0, end - start);\r\n      };\r\n\r\n      this.performanceData.pageLoad = {\r\n        // DNS 查询时间\r\n        dnsLookup: safeDiff(timing.domainLookupEnd, timing.domainLookupStart),\r\n        // TCP 连接时间\r\n        tcpConnect: safeDiff(timing.connectEnd, timing.connectStart),\r\n        // SSL 握手时间\r\n        sslHandshake: timing.secureConnectionStart > 0 ?\r\n          safeDiff(timing.connectEnd, timing.secureConnectionStart) : 0,\r\n        // 请求响应时间\r\n        requestResponse: safeDiff(timing.responseEnd, timing.requestStart),\r\n        // DOM 解析时间\r\n        domParsing: safeDiff(timing.domContentLoadedEventStart, timing.responseEnd),\r\n        // 资源加载时间\r\n        resourceLoading: safeDiff(timing.loadEventStart, timing.domContentLoadedEventEnd),\r\n        // 总加载时间\r\n        totalLoadTime: safeDiff(timing.loadEventEnd, timing.navigationStart),\r\n        // 首次内容绘制时间\r\n        firstContentfulPaint: this.getFirstContentfulPaint(),\r\n        // 最大内容绘制时间\r\n        largestContentfulPaint: this.getLargestContentfulPaint(),\r\n        // 导航类型\r\n        navigationType: navigation ? navigation.type : 0,\r\n        // 重定向次数\r\n        redirectCount: navigation ? navigation.redirectCount : 0,\r\n        // 时间戳\r\n        timestamp: Date.now()\r\n      };\r\n\r\n      // 验证收集到的数据的合理性\r\n      this.validatePageLoadMetrics(this.performanceData.pageLoad);\r\n\r\n      this.logPerformanceData('Page Load Metrics', this.performanceData.pageLoad);\r\n    } catch (error) {\r\n      console.error('Error collecting page load metrics:', error);\r\n      this.logError({\r\n        type: 'performance',\r\n        message: 'Failed to collect page load metrics',\r\n        stack: error.stack,\r\n        timestamp: Date.now()\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 收集导航指标\r\n     */\r\n  collectNavigationMetrics() {\r\n    const entries = window.performance.getEntriesByType('navigation');\r\n    if (entries.length > 0) {\r\n      const nav = entries[0];\r\n      this.performanceData.navigation = {\r\n        dnsLookup: nav.domainLookupEnd - nav.domainLookupStart,\r\n        tcpConnect: nav.connectEnd - nav.connectStart,\r\n        requestResponse: nav.responseEnd - nav.requestStart,\r\n        domProcessing: nav.domContentLoadedEventEnd - nav.responseEnd,\r\n        loadComplete: nav.loadEventEnd - nav.loadEventStart,\r\n        transferSize: nav.transferSize,\r\n        encodedBodySize: nav.encodedBodySize,\r\n        decodedBodySize: nav.decodedBodySize,\r\n        timestamp: Date.now()\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 初始化 Performance Observer\r\n     */\r\n  initPerformanceObserver() {\r\n    // 监控资源加载\r\n    try {\r\n      const resourceObserver = new PerformanceObserver((list) => {\r\n        for (const entry of list.getEntries()) {\r\n          if (entry.entryType === 'resource') {\r\n            this.collectResourceMetrics(entry);\r\n          }\r\n        }\r\n      });\r\n      resourceObserver.observe({ entryTypes: ['resource'] });\r\n    } catch (error) {\r\n      if (window.errorUtils) {\r\n        window.errorUtils.handleError(error, {\r\n          context: 'Resource observer initialization',\r\n          severity: 'medium',\r\n          category: 'performance',\r\n          userMessage: '资源监控不支持'\r\n        });\r\n      } else {\r\n        console.warn('Resource observer not supported:', error);\r\n      }\r\n    }\r\n\r\n    // 监控用户自定义时间\r\n    try {\r\n      const measureObserver = new PerformanceObserver((list) => {\r\n        for (const entry of list.getEntries()) {\r\n          if (entry.entryType === 'measure') {\r\n            this.performanceData.userTiming.push({\r\n              name: entry.name,\r\n              duration: entry.duration,\r\n              startTime: entry.startTime,\r\n              timestamp: Date.now()\r\n            });\r\n          }\r\n        }\r\n      });\r\n      measureObserver.observe({ entryTypes: ['measure'] });\r\n    } catch (error) {\r\n      if (window.errorUtils) {\r\n        window.errorUtils.handleError(error, {\r\n          context: 'Measure observer initialization',\r\n          severity: 'medium',\r\n          category: 'performance',\r\n          userMessage: '性能测量监控不支持'\r\n        });\r\n      } else {\r\n        console.warn('Measure observer not supported:', error);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 收集资源加载指标\r\n     */\r\n  collectResourceMetrics(entry) {\r\n    if (this.performanceData.resources.length >= this.options.maxPerformanceEntries) {\r\n      this.performanceData.resources.shift(); // 移除最旧的条目\r\n    }\r\n\r\n    const resourceData = {\r\n      name: entry.name,\r\n      type: this.getResourceType(entry.name),\r\n      duration: entry.duration,\r\n      size: entry.transferSize,\r\n      encodedSize: entry.encodedBodySize,\r\n      decodedSize: entry.decodedBodySize,\r\n      startTime: entry.startTime,\r\n      responseEnd: entry.responseEnd,\r\n      timestamp: Date.now()\r\n    };\r\n\r\n    this.performanceData.resources.push(resourceData);\r\n\r\n    // 检查慢资源 - 使用配置的阈值\r\n    const slowThreshold = window.config?.get('performance.thresholds.slowResource') ||\r\n            window.CONSTANTS?.PERFORMANCE?.THRESHOLDS?.SLOW_RESOURCE || 1000;\r\n    if (entry.duration > slowThreshold) {\r\n      this.logSlowResource(resourceData);\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 获取资源类型\r\n     */\r\n  getResourceType(url) {\r\n    const extension = url.split('.').pop().toLowerCase();\r\n    const typeMap = {\r\n      'js': 'script',\r\n      'css': 'stylesheet',\r\n      'jpg': 'image',\r\n      'jpeg': 'image',\r\n      'png': 'image',\r\n      'gif': 'image',\r\n      'svg': 'image',\r\n      'webp': 'image',\r\n      'woff': 'font',\r\n      'woff2': 'font',\r\n      'ttf': 'font',\r\n      'eot': 'font'\r\n    };\r\n    return typeMap[extension] || 'other';\r\n  }\r\n\r\n  /**\r\n     * 初始化错误跟踪\r\n     * 监听JavaScript错误、Promise拒绝和资源加载错误\r\n     * @private\r\n     */\r\n  initErrorTracking() {\r\n    // 错误频率限制映射 - 使用配置的限制\r\n    this.errorFrequencyMap = new Map();\r\n    this.maxErrorsPerMinute = window.config?.get('performance.errorLimits.maxErrorsPerMinute') ||\r\n            window.CONSTANTS?.PERFORMANCE?.ERROR_LIMITS?.MAX_ERRORS_PER_MINUTE || 10;\r\n\r\n    // 监控 JavaScript 错误\r\n    window.addEventListener('error', (event) => {\r\n      try {\r\n        // 验证事件对象\r\n        if (!event || typeof event !== 'object') {\r\n          console.warn('Invalid error event received');\r\n          return;\r\n        }\r\n\r\n        const errorInfo = {\r\n          type: 'javascript',\r\n          message: this.sanitizeErrorMessage(event.message || 'Unknown error'),\r\n          filename: this.sanitizeUrl(event.filename || 'unknown'),\r\n          lineno: Number.isInteger(event.lineno) ? event.lineno : 0,\r\n          colno: Number.isInteger(event.colno) ? event.colno : 0,\r\n          stack: event.error && event.error.stack ? this.sanitizeStack(event.error.stack) : null,\r\n          timestamp: Date.now(),\r\n          url: this.sanitizeUrl(window.location.href),\r\n          userAgent: navigator.userAgent || 'unknown'\r\n        };\r\n\r\n        // 检查错误频率限制\r\n        if (this.shouldLogError(errorInfo)) {\r\n          this.logError(errorInfo);\r\n        }\r\n      } catch (handlerError) {\r\n        console.error('Error in JavaScript error handler:', handlerError);\r\n      }\r\n    });\r\n\r\n    // 监控 Promise 拒绝\r\n    window.addEventListener('unhandledrejection', (event) => {\r\n      try {\r\n        // 验证事件对象\r\n        if (!event || typeof event !== 'object') {\r\n          console.warn('Invalid unhandledrejection event received');\r\n          return;\r\n        }\r\n\r\n        const reason = event.reason;\r\n        let message = 'Unhandled Promise Rejection';\r\n        let stack = null;\r\n\r\n        // 安全地提取错误信息\r\n        if (reason) {\r\n          if (typeof reason === 'string') {\r\n            message = this.sanitizeErrorMessage(reason);\r\n          } else if (reason instanceof Error) {\r\n            message = this.sanitizeErrorMessage(reason.message || reason.toString());\r\n            stack = reason.stack ? this.sanitizeStack(reason.stack) : null;\r\n          } else if (typeof reason === 'object' && reason.toString) {\r\n            message = this.sanitizeErrorMessage(reason.toString());\r\n          }\r\n        }\r\n\r\n        const errorInfo = {\r\n          type: 'promise',\r\n          message: message,\r\n          stack: stack,\r\n          timestamp: Date.now(),\r\n          url: this.sanitizeUrl(window.location.href),\r\n          userAgent: navigator.userAgent || 'unknown'\r\n        };\r\n\r\n        // 检查错误频率限制\r\n        if (this.shouldLogError(errorInfo)) {\r\n          this.logError(errorInfo);\r\n        }\r\n      } catch (handlerError) {\r\n        console.error('Error in Promise rejection handler:', handlerError);\r\n      }\r\n    });\r\n\r\n    // 监控资源加载错误\r\n    window.addEventListener('error', (event) => {\r\n      try {\r\n        // 只处理资源加载错误，不处理脚本错误\r\n        if (event.target && event.target !== window) {\r\n          const target = event.target;\r\n          const source = target.src || target.href || 'unknown';\r\n\r\n          const errorInfo = {\r\n            type: 'resource',\r\n            message: `Failed to load resource: ${this.sanitizeUrl(source)}`,\r\n            element: target.tagName || 'unknown',\r\n            source: this.sanitizeUrl(source),\r\n            timestamp: Date.now(),\r\n            url: this.sanitizeUrl(window.location.href)\r\n          };\r\n\r\n          // 检查错误频率限制\r\n          if (this.shouldLogError(errorInfo)) {\r\n            this.logError(errorInfo);\r\n          }\r\n        }\r\n      } catch (handlerError) {\r\n        if (window.errorUtils) {\r\n          window.errorUtils.handleError(handlerError, {\r\n            context: 'Resource error handler',\r\n            severity: 'medium',\r\n            category: 'performance',\r\n            userMessage: '资源错误处理失败'\r\n          });\r\n        } else {\r\n          console.error('Error in resource error handler:', handlerError);\r\n        }\r\n      }\r\n    }, true);\r\n  }\r\n\r\n  /**\r\n     * 记录错误\r\n     */\r\n  logError(errorData) {\r\n    try {\r\n      // 验证错误数据对象\r\n      if (!errorData || typeof errorData !== 'object') {\r\n        console.warn('Invalid error data provided to logError');\r\n        return;\r\n      }\r\n\r\n      // 验证必需字段\r\n      if (!errorData.type || !errorData.message) {\r\n        console.warn('Error data missing required fields (type, message)');\r\n        return;\r\n      }\r\n\r\n      // 为错误信息添加唯一ID\r\n      errorData.id = Utils.generateErrorId();\r\n\r\n      // 添加错误严重级别\r\n      errorData.severity = this.getErrorSeverity(errorData);\r\n\r\n      // 限制错误日志数量，避免内存溢出\r\n      if (this.errors.length >= this.options.maxErrors) {\r\n        this.errors.shift(); // 移除最旧的错误\r\n      }\r\n\r\n      this.errors.push(errorData);\r\n\r\n      // 在开发环境下输出详细错误信息\r\n      if (this.options.debug) {\r\n        console.group(`🚨 Performance Monitor Error [${errorData.type}] - ${errorData.severity}`);\r\n        console.error('Error Details:', errorData);\r\n        console.groupEnd();\r\n      } else {\r\n        console.error('Error tracked:', errorData);\r\n      }\r\n\r\n      // 对于严重错误，考虑额外处理\r\n      if (errorData.severity === 'critical') {\r\n        this.handleCriticalError(errorData);\r\n      }\r\n\r\n      // 可以在这里发送错误到服务器\r\n      this.reportError(errorData);\r\n\r\n    } catch (logError) {\r\n      // 防止错误记录本身出错导致无限循环\r\n      console.error('Failed to log error:', logError);\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 初始化用户行为跟踪\r\n     * 监听用户的点击、滚动、键盘输入等交互行为\r\n     * @private\r\n     */\r\n  initUserBehaviorTracking() {\r\n    this.initClickTracking();\r\n    this.initVisibilityTracking();\r\n    this.initScrollTracking();\r\n    this.initKeyboardTracking();\r\n    this.initMouseTracking();\r\n    this.initPageUnloadTracking();\r\n    this.initPeriodicStatsUpdate();\r\n  }\r\n\r\n  /**\r\n   * 初始化点击事件跟踪\r\n   * @private\r\n   */\r\n  initClickTracking() {\r\n    document.addEventListener('click', (event) => {\r\n      this.behaviorStats.clicks++;\r\n      this.lastActivityTime = Date.now();\r\n\r\n      this.trackUserAction('click', {\r\n        element: event.target.tagName,\r\n        className: event.target.className,\r\n        id: event.target.id,\r\n        text: event.target.textContent ? event.target.textContent.substring(0, PERFORMANCE_CONSTANTS.BEHAVIOR.TEXT_TRUNCATE_LENGTH) : '',\r\n        x: event.clientX,\r\n        y: event.clientY,\r\n        timestamp: Date.now()\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 初始化页面可见性跟踪\r\n   * @private\r\n   */\r\n  initVisibilityTracking() {\r\n    document.addEventListener('visibilitychange', () => {\r\n      const isHidden = document.hidden;\r\n\r\n      this.trackUserAction('visibility', {\r\n        hidden: isHidden,\r\n        timestamp: Date.now()\r\n      });\r\n\r\n      if (isHidden) {\r\n        this.updateTimeOnPage();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 初始化滚动事件跟踪\r\n   * @private\r\n   */\r\n  initScrollTracking() {\r\n    let scrollTimeout;\r\n    let lastScrollY = 0;\r\n    \r\n    window.addEventListener('scroll', () => {\r\n      clearTimeout(scrollTimeout);\r\n      scrollTimeout = setTimeout(() => {\r\n        this.behaviorStats.scrolls++;\r\n        this.lastActivityTime = Date.now();\r\n\r\n        const scrollDirection = window.scrollY > lastScrollY ? 'down' : 'up';\r\n        const scrollDepth = Math.round((window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100);\r\n\r\n        this.trackUserAction('scroll', {\r\n          scrollY: window.scrollY,\r\n          scrollX: window.scrollX,\r\n          direction: scrollDirection,\r\n          depth: scrollDepth,\r\n          timestamp: Date.now()\r\n        });\r\n\r\n        lastScrollY = window.scrollY;\r\n      }, PERFORMANCE_CONSTANTS.BEHAVIOR.SCROLL_THROTTLE);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 初始化键盘事件跟踪\r\n   * @private\r\n   */\r\n  initKeyboardTracking() {\r\n    document.addEventListener('keydown', (event) => {\r\n      this.behaviorStats.keystrokes++;\r\n      this.lastActivityTime = Date.now();\r\n\r\n      this.trackUserAction('keydown', {\r\n        key: event.key,\r\n        code: event.code,\r\n        ctrlKey: event.ctrlKey,\r\n        shiftKey: event.shiftKey,\r\n        altKey: event.altKey,\r\n        timestamp: Date.now()\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 初始化鼠标移动事件跟踪\r\n   * @private\r\n   */\r\n  initMouseTracking() {\r\n    let mouseMoveTimeout;\r\n    \r\n    document.addEventListener('mousemove', (event) => {\r\n      clearTimeout(mouseMoveTimeout);\r\n      mouseMoveTimeout = setTimeout(() => {\r\n        this.behaviorStats.mouseMovements++;\r\n        this.lastActivityTime = Date.now();\r\n\r\n        this.trackUserAction('mousemove', {\r\n          x: event.clientX,\r\n          y: event.clientY,\r\n          timestamp: Date.now()\r\n        });\r\n      }, PERFORMANCE_CONSTANTS.BEHAVIOR.MOUSEMOVE_THROTTLE);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 初始化页面卸载事件跟踪\r\n   * @private\r\n   */\r\n  initPageUnloadTracking() {\r\n    window.addEventListener('beforeunload', () => {\r\n      this.updateTimeOnPage();\r\n      this.calculateEngagementMetrics();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 初始化定期统计数据更新\r\n   * @private\r\n   */\r\n  initPeriodicStatsUpdate() {\r\n    setInterval(() => {\r\n      this.updateBehaviorStats();\r\n    }, PERFORMANCE_CONSTANTS.BEHAVIOR.STATS_UPDATE_INTERVAL);\r\n  }\r\n\r\n  /**\r\n     * 追踪用户行为\r\n     */\r\n  trackUserAction(action, data) {\r\n    if (Math.random() > this.options.sampleRate) {\r\n      return; // 采样控制\r\n    }\r\n\r\n    this.userBehavior.push({\r\n      action,\r\n      ...data,\r\n      sessionId: this.getSessionId(),\r\n      url: window.location.href\r\n    });\r\n\r\n    // 限制数据量\r\n    if (this.userBehavior.length > 1000) {\r\n      this.userBehavior = this.userBehavior.slice(-500);\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 更新页面停留时间\r\n     */\r\n  updateTimeOnPage() {\r\n    this.behaviorStats.timeOnPage = Date.now() - this.sessionStartTime;\r\n  }\r\n\r\n  /**\r\n     * 更新行为统计\r\n     */\r\n  updateBehaviorStats() {\r\n    this.updateTimeOnPage();\r\n    this.calculateEngagementMetrics();\r\n\r\n    // 检查用户是否活跃\r\n    const inactiveTime = Date.now() - this.lastActivityTime;\r\n    if (inactiveTime > 30000) { // 30秒无活动视为不活跃\r\n      this.trackUserAction('inactive', {\r\n        inactiveTime,\r\n        timestamp: Date.now()\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 计算参与度指标\r\n     */\r\n  calculateEngagementMetrics() {\r\n    const timeOnPageMinutes = this.behaviorStats.timeOnPage / 60000;\r\n    const totalActions = this.behaviorStats.clicks + this.behaviorStats.scrolls + this.behaviorStats.keystrokes;\r\n\r\n    // 计算参与度评分 (0-100)\r\n    let engagementScore = 0;\r\n\r\n    // 时间因子 (最多30分)\r\n    engagementScore += Math.min(timeOnPageMinutes * 2, 30);\r\n\r\n    // 交互因子 (最多40分)\r\n    engagementScore += Math.min(totalActions * 0.5, 40);\r\n\r\n    // 滚动深度因子 (最多20分)\r\n    const maxScrollDepth = this.getMaxScrollDepth();\r\n    engagementScore += Math.min(maxScrollDepth * 0.2, 20);\r\n\r\n    // 页面浏览因子 (最多10分)\r\n    engagementScore += Math.min(this.behaviorStats.pageViews * 2, 10);\r\n\r\n    this.behaviorStats.engagementScore = Math.round(engagementScore);\r\n\r\n    // 计算跳出率 (如果停留时间少于10秒且交互少于3次，视为跳出)\r\n    if (timeOnPageMinutes < 0.17 && totalActions < 3) {\r\n      this.behaviorStats.bounceRate = 100;\r\n    } else {\r\n      this.behaviorStats.bounceRate = 0;\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 获取最大滚动深度\r\n     */\r\n  getMaxScrollDepth() {\r\n    const scrollActions = this.userBehavior.filter(action => action.action === 'scroll');\r\n    if (scrollActions.length === 0) {return 0;}\r\n\r\n    return Math.max(...scrollActions.map(action => action.depth || 0));\r\n  }\r\n\r\n  /**\r\n     * 获取用户行为分析报告\r\n     */\r\n  getUserBehaviorAnalysis() {\r\n    this.updateBehaviorStats();\r\n\r\n    const timeOnPageMinutes = Math.round(this.behaviorStats.timeOnPage / 60000 * 100) / 100;\r\n    const totalActions = this.behaviorStats.clicks + this.behaviorStats.scrolls + this.behaviorStats.keystrokes;\r\n\r\n    return {\r\n      summary: {\r\n        timeOnPage: timeOnPageMinutes,\r\n        totalActions,\r\n        engagementScore: this.behaviorStats.engagementScore,\r\n        bounceRate: this.behaviorStats.bounceRate,\r\n        maxScrollDepth: this.getMaxScrollDepth()\r\n      },\r\n      detailed: {\r\n        clicks: this.behaviorStats.clicks,\r\n        scrolls: this.behaviorStats.scrolls,\r\n        keystrokes: this.behaviorStats.keystrokes,\r\n        mouseMovements: this.behaviorStats.mouseMovements,\r\n        pageViews: this.behaviorStats.pageViews\r\n      },\r\n      patterns: this.analyzeUserPatterns(),\r\n      heatmap: this.generateClickHeatmap(),\r\n      timeline: this.generateActionTimeline()\r\n    };\r\n  }\r\n\r\n  /**\r\n     * 分析用户行为模式\r\n     */\r\n  analyzeUserPatterns() {\r\n    const patterns = {\r\n      mostActiveHour: null,\r\n      averageSessionLength: 0,\r\n      preferredInteractionType: null,\r\n      scrollingBehavior: null,\r\n      clickPatterns: []\r\n    };\r\n\r\n    // 分析最活跃时间\r\n    const hourlyActivity = {};\r\n    this.userBehavior.forEach(action => {\r\n      const hour = new Date(action.timestamp).getHours();\r\n      hourlyActivity[hour] = (hourlyActivity[hour] || 0) + 1;\r\n    });\r\n\r\n    if (Object.keys(hourlyActivity).length > 0) {\r\n      patterns.mostActiveHour = Object.keys(hourlyActivity).reduce((a, b) =>\r\n        hourlyActivity[a] > hourlyActivity[b] ? a : b\r\n      );\r\n    }\r\n\r\n    // 分析交互类型偏好\r\n    const actionCounts = {\r\n      click: this.behaviorStats.clicks,\r\n      scroll: this.behaviorStats.scrolls,\r\n      keyboard: this.behaviorStats.keystrokes\r\n    };\r\n\r\n    patterns.preferredInteractionType = Object.keys(actionCounts).reduce((a, b) =>\r\n      actionCounts[a] > actionCounts[b] ? a : b\r\n    );\r\n\r\n    // 分析滚动行为\r\n    const scrollActions = this.userBehavior.filter(action => action.action === 'scroll');\r\n    if (scrollActions.length > 0) {\r\n      const avgScrollSpeed = scrollActions.reduce((sum, action, index) => {\r\n        if (index === 0) {return 0;}\r\n        const timeDiff = action.timestamp - scrollActions[index - 1].timestamp;\r\n        const scrollDiff = Math.abs(action.scrollY - scrollActions[index - 1].scrollY);\r\n        return sum + (scrollDiff / timeDiff);\r\n      }, 0) / (scrollActions.length - 1);\r\n\r\n      patterns.scrollingBehavior = {\r\n        speed: avgScrollSpeed,\r\n        frequency: scrollActions.length,\r\n        maxDepth: this.getMaxScrollDepth()\r\n      };\r\n    }\r\n\r\n    // 分析点击模式\r\n    const clickActions = this.userBehavior.filter(action => action.action === 'click');\r\n    const clickTargets = {};\r\n    clickActions.forEach(action => {\r\n      const target = action.element;\r\n      clickTargets[target] = (clickTargets[target] || 0) + 1;\r\n    });\r\n\r\n    patterns.clickPatterns = Object.entries(clickTargets)\r\n      .sort(([, a], [, b]) => b - a)\r\n      .slice(0, 5)\r\n      .map(([target, count]) => ({ target, count }));\r\n\r\n    return patterns;\r\n  }\r\n\r\n  /**\r\n     * 生成点击热力图数据\r\n     */\r\n  generateClickHeatmap() {\r\n    const clickActions = this.userBehavior.filter(action => action.action === 'click');\r\n    const heatmapData = [];\r\n\r\n    clickActions.forEach(action => {\r\n      heatmapData.push({\r\n        x: action.x,\r\n        y: action.y,\r\n        intensity: 1\r\n      });\r\n    });\r\n\r\n    // 合并相近的点击位置\r\n    const mergedData = [];\r\n    const threshold = 50; // 50像素内的点击合并\r\n\r\n    heatmapData.forEach(point => {\r\n      const existing = mergedData.find(p =>\r\n        Math.abs(p.x - point.x) < threshold && Math.abs(p.y - point.y) < threshold\r\n      );\r\n\r\n      if (existing) {\r\n        existing.intensity++;\r\n      } else {\r\n        mergedData.push({ ...point });\r\n      }\r\n    });\r\n\r\n    return mergedData;\r\n  }\r\n\r\n  /**\r\n     * 生成行为时间线\r\n     */\r\n  generateActionTimeline() {\r\n    const timeline = [];\r\n    const timeSlots = {};\r\n    const slotDuration = 60000; // 1分钟为一个时间段\r\n\r\n    this.userBehavior.forEach(action => {\r\n      const slot = Math.floor((action.timestamp - this.sessionStartTime) / slotDuration);\r\n      if (!timeSlots[slot]) {\r\n        timeSlots[slot] = {\r\n          startTime: this.sessionStartTime + slot * slotDuration,\r\n          actions: []\r\n        };\r\n      }\r\n      timeSlots[slot].actions.push(action.action);\r\n    });\r\n\r\n    Object.values(timeSlots).forEach(slot => {\r\n      const actionCounts = {};\r\n      slot.actions.forEach(action => {\r\n        actionCounts[action] = (actionCounts[action] || 0) + 1;\r\n      });\r\n\r\n      timeline.push({\r\n        time: slot.startTime,\r\n        totalActions: slot.actions.length,\r\n        actionBreakdown: actionCounts\r\n      });\r\n    });\r\n\r\n    return timeline.sort((a, b) => a.time - b.time);\r\n  }\r\n\r\n  /**\r\n     * 初始化资源监控\r\n     */\r\n  initResourceMonitoring() {\r\n    // 监控内存使用\r\n    if (window.performance && window.performance.memory) {\r\n      setInterval(() => {\r\n        this.collectMemoryMetrics();\r\n      }, 10000); // 每10秒收集一次内存数据\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 收集内存指标\r\n     */\r\n  collectMemoryMetrics() {\r\n    if (window.performance && window.performance.memory) {\r\n      const memory = window.performance.memory;\r\n      this.performanceData.memory = {\r\n        usedJSHeapSize: memory.usedJSHeapSize,\r\n        totalJSHeapSize: memory.totalJSHeapSize,\r\n        jsHeapSizeLimit: memory.jsHeapSizeLimit,\r\n        timestamp: Date.now()\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 初始化 Web Vitals 监控\r\n     */\r\n  initWebVitals() {\r\n    // 监控 Largest Contentful Paint (LCP)\r\n    this.observeLCP();\r\n\r\n    // 监控 First Input Delay (FID)\r\n    this.observeFID();\r\n\r\n    // 监控 Cumulative Layout Shift (CLS)\r\n    this.observeCLS();\r\n  }\r\n\r\n  /**\r\n     * 监控 Largest Contentful Paint\r\n     */\r\n  observeLCP() {\r\n    if (window.PerformanceObserver) {\r\n      try {\r\n        const observer = new PerformanceObserver((list) => {\r\n          const entries = list.getEntries();\r\n          const lastEntry = entries[entries.length - 1];\r\n          this.performanceData.vitals.lcp = {\r\n            value: lastEntry.startTime,\r\n            timestamp: Date.now()\r\n          };\r\n        });\r\n        observer.observe({ entryTypes: ['largest-contentful-paint'] });\r\n      } catch (error) {\r\n        console.warn('LCP observer not supported:', error);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 监控 First Input Delay\r\n     */\r\n  observeFID() {\r\n    if (window.PerformanceObserver) {\r\n      try {\r\n        const observer = new PerformanceObserver((list) => {\r\n          for (const entry of list.getEntries()) {\r\n            this.performanceData.vitals.fid = {\r\n              value: entry.processingStart - entry.startTime,\r\n              timestamp: Date.now()\r\n            };\r\n          }\r\n        });\r\n        observer.observe({ entryTypes: ['first-input'] });\r\n      } catch (error) {\r\n        console.warn('FID observer not supported:', error);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 监控 Cumulative Layout Shift\r\n     */\r\n  observeCLS() {\r\n    if (window.PerformanceObserver) {\r\n      try {\r\n        let clsValue = 0;\r\n        const observer = new PerformanceObserver((list) => {\r\n          for (const entry of list.getEntries()) {\r\n            if (!entry.hadRecentInput) {\r\n              clsValue += entry.value;\r\n            }\r\n          }\r\n          this.performanceData.vitals.cls = {\r\n            value: clsValue,\r\n            timestamp: Date.now()\r\n          };\r\n        });\r\n        observer.observe({ entryTypes: ['layout-shift'] });\r\n      } catch (error) {\r\n        console.warn('CLS observer not supported:', error);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 获取 First Contentful Paint\r\n     */\r\n  getFirstContentfulPaint() {\r\n    if (window.performance && window.performance.getEntriesByType) {\r\n      const entries = window.performance.getEntriesByType('paint');\r\n      const fcpEntry = entries.find(entry => entry.name === 'first-contentful-paint');\r\n      return fcpEntry ? fcpEntry.startTime : null;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n     * 获取 Largest Contentful Paint\r\n     */\r\n  getLargestContentfulPaint() {\r\n    if (window.performance && window.performance.getEntriesByType) {\r\n      const entries = window.performance.getEntriesByType('largest-contentful-paint');\r\n      return entries.length > 0 ? entries[entries.length - 1].startTime : null;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n     * 开始定期报告\r\n     */\r\n  startPeriodicReporting() {\r\n    this.reportTimer = setInterval(() => {\r\n      this.generateReport();\r\n    }, this.options.reportInterval);\r\n  }\r\n\r\n  /**\r\n     * 生成性能报告\r\n     */\r\n  generateReport() {\r\n    const report = {\r\n      timestamp: Date.now(),\r\n      url: window.location.href,\r\n      userAgent: navigator.userAgent,\r\n      performance: this.performanceData,\r\n      errors: this.errors.slice(-10), // 最近10个错误\r\n      userBehavior: this.userBehavior.slice(-50), // 最近50个用户行为\r\n      summary: this.generateSummary()\r\n    };\r\n\r\n    console.log('Performance Report:', report);\r\n    return report;\r\n  }\r\n\r\n  /**\r\n     * 生成性能摘要\r\n     */\r\n  generateSummary() {\r\n    const summary = {\r\n      pageLoadTime: this.performanceData.pageLoad.totalLoadTime || 0,\r\n      errorCount: this.errors.length,\r\n      slowResourceCount: this.performanceData.resources.filter(r => r.duration > PERFORMANCE_CONSTANTS.RESOURCE.SLOW_RESOURCE_THRESHOLD).length,\r\n      memoryUsage: this.performanceData.memory ? this.performanceData.memory.usedJSHeapSize : 0,\r\n      vitals: this.performanceData.vitals\r\n    };\r\n\r\n    // 性能评分\r\n    summary.score = this.calculatePerformanceScore(summary);\r\n\r\n    return summary;\r\n  }\r\n\r\n  /**\r\n     * 计算性能评分\r\n     */\r\n  calculatePerformanceScore(summary) {\r\n    let score = 100;\r\n\r\n    // 使用性能阈值常量\r\n    const thresholds = PERFORMANCE_CONSTANTS.THRESHOLDS;\r\n\r\n    // 页面加载时间评分\r\n    if (summary.pageLoadTime > thresholds.LOAD_TIME_POOR) {score -= 20;}\r\n    else if (summary.pageLoadTime > thresholds.LOAD_TIME_FAIR) {score -= 10;}\r\n    else if (summary.pageLoadTime > thresholds.LOAD_TIME_GOOD) {score -= 5;}\r\n\r\n    // 错误数量评分\r\n    score -= Math.min(summary.errorCount * thresholds.ERROR_SCORE_MULTIPLIER, thresholds.MAX_ERROR_PENALTY);\r\n\r\n    // 慢资源评分\r\n    score -= Math.min(summary.slowResourceCount * thresholds.SLOW_RESOURCE_SCORE_MULTIPLIER, thresholds.MAX_SLOW_RESOURCE_PENALTY);\r\n\r\n    // Web Vitals 评分\r\n    if (summary.vitals.lcp && summary.vitals.lcp.value > thresholds.LCP_GOOD) {score -= thresholds.LCP_PENALTY;}\r\n    if (summary.vitals.fid && summary.vitals.fid.value > thresholds.FID_GOOD) {score -= thresholds.FID_PENALTY;}\r\n    if (summary.vitals.cls && summary.vitals.cls.value > thresholds.CLS_GOOD) {score -= thresholds.CLS_PENALTY;}\r\n\r\n    return Math.max(score, 0);\r\n  }\r\n\r\n  /**\r\n     * 记录慢资源\r\n     * 包含完整的参数验证和错误处理\r\n     * @param {Object} resourceData - 资源数据对象\r\n     */\r\n  logSlowResource(resourceData) {\r\n    try {\r\n      // 参数验证\r\n      if (!resourceData || typeof resourceData !== 'object') {\r\n        console.warn('Invalid resource data provided to logSlowResource');\r\n        return;\r\n      }\r\n\r\n      if (!resourceData.name || typeof resourceData.name !== 'string') {\r\n        console.warn('Invalid resource name provided to logSlowResource');\r\n        return;\r\n      }\r\n\r\n      if (typeof resourceData.duration !== 'number' || resourceData.duration < 0 || !isFinite(resourceData.duration)) {\r\n        console.warn(`Invalid duration provided: ${resourceData.duration}`);\r\n        return;\r\n      }\r\n\r\n      // 检查实例状态\r\n      if (this.isDestroyed) {\r\n        console.warn('Cannot log slow resource: PerformanceMonitor is destroyed');\r\n        return;\r\n      }\r\n\r\n      // 初始化慢资源数组（防御性编程）\r\n      if (!Array.isArray(this.slowResources)) {\r\n        this.slowResources = [];\r\n      }\r\n\r\n      // 检查重复记录（防止同一资源短时间内重复记录）\r\n      const recentDuplicate = this.slowResources.find(resource =>\r\n        resource.name === resourceData.name &&\r\n                resource.type === resourceData.type &&\r\n                (Date.now() - resource.timestamp) < 1000 // 1秒内的重复记录\r\n      );\r\n\r\n      if (recentDuplicate) {\r\n        console.debug(`Duplicate slow resource record ignored: ${resourceData.name}`);\r\n        return;\r\n      }\r\n\r\n      // 创建资源记录\r\n      const resourceRecord = {\r\n        name: resourceData.name.substring(0, 200), // 限制名称长度\r\n        duration: Math.round(resourceData.duration * 100) / 100, // 保留两位小数\r\n        type: resourceData.type ? resourceData.type.substring(0, 50) : 'unknown', // 限制类型长度\r\n        size: resourceData.size || 0,\r\n        timestamp: Date.now(),\r\n        url: window.location.href.substring(0, 100) // 记录页面URL（限制长度）\r\n      };\r\n\r\n      this.slowResources.push(resourceRecord);\r\n\r\n      // 限制数组大小，防止内存泄漏\r\n      const maxSlowResources = 100;\r\n      if (this.slowResources.length > maxSlowResources) {\r\n        // 移除最旧的记录\r\n        this.slowResources.shift();\r\n      }\r\n\r\n      // 记录严重的性能问题\r\n      if (resourceData.duration > 5000) { // 超过5秒\r\n        console.warn(`Critical slow resource detected: ${resourceData.name} (${resourceData.duration}ms)`);\r\n\r\n        // 可选：触发严重性能问题的回调\r\n        if (typeof this.onCriticalSlowResource === 'function') {\r\n          try {\r\n            this.onCriticalSlowResource(resourceRecord);\r\n          } catch (callbackError) {\r\n            console.error('Error in critical slow resource callback:', callbackError);\r\n          }\r\n        }\r\n      }\r\n\r\n      console.warn('Slow resource detected:', resourceRecord);\r\n\r\n    } catch (error) {\r\n      console.error('Error in logSlowResource:', error);\r\n      // 降级处理：至少记录基本信息\r\n      try {\r\n        console.warn(`Slow resource (fallback): ${resourceData?.name || 'unknown'} - ${resourceData?.duration || 0}ms`);\r\n      } catch (fallbackError) {\r\n        console.error('Critical error in logSlowResource fallback:', fallbackError);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 报告错误\r\n     */\r\n  reportError(errorData) {\r\n    // 这里可以发送错误到服务器\r\n    // 示例：发送到错误收集服务\r\n    fetch('/api/errors', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(errorData)\r\n    }).catch(err => {\r\n      console.error('Failed to report error:', err);\r\n    });\r\n  }\r\n\r\n  /**\r\n     * 记录性能数据\r\n     */\r\n  logPerformanceData(label, data) {\r\n    console.log(`[Performance] ${label}:`, data);\r\n  }\r\n\r\n  /**\r\n     * 获取会话ID\r\n     */\r\n  getSessionId() {\r\n    let sessionId = sessionStorage.getItem('performanceSessionId');\r\n    if (!sessionId) {\r\n      sessionId = Utils.generateSessionId();\r\n      sessionStorage.setItem('performanceSessionId', sessionId);\r\n    }\r\n    return sessionId;\r\n  }\r\n\r\n  /**\r\n     * 获取性能数据\r\n     * 包含数据验证和安全处理\r\n     * @returns {Object} 性能数据对象\r\n     */\r\n  getPerformanceData() {\r\n    try {\r\n      // 检查实例状态\r\n      if (this.isDestroyed) {\r\n        console.warn('Cannot get performance data: PerformanceMonitor is destroyed');\r\n        return null;\r\n      }\r\n\r\n      // 安全地获取各项数据，提供默认值\r\n      const safePerformanceData = this.performanceData || {};\r\n      const safeErrors = Array.isArray(this.errors) ? this.errors : [];\r\n      const safeUserBehavior = Array.isArray(this.userBehavior) ? this.userBehavior : [];\r\n      const safeSlowResources = Array.isArray(this.slowResources) ? this.slowResources : [];\r\n\r\n      // 数据清理和验证\r\n      const cleanedData = {\r\n        pageLoad: this.sanitizePageLoadMetrics(safePerformanceData.pageLoad || {}),\r\n        navigation: this.sanitizeNavigationMetrics(safePerformanceData.navigation || {}),\r\n        resources: this.sanitizeResourceMetrics(safePerformanceData.resources || []),\r\n        userTiming: this.sanitizeUserTiming(safePerformanceData.userTiming || []),\r\n        vitals: this.sanitizeVitals(safePerformanceData.vitals || {}),\r\n        memory: this.sanitizeMemoryMetrics(safePerformanceData.memory || {}),\r\n        errors: this.sanitizeErrors(safeErrors),\r\n        userBehavior: this.sanitizeUserBehaviorData(safeUserBehavior),\r\n        slowResources: this.sanitizeSlowResourcesData(safeSlowResources),\r\n        timestamp: Date.now(),\r\n        sessionId: this.getSessionId(),\r\n        userAgent: this.sanitizeUserAgent(),\r\n        url: window.location.href.substring(0, 200)\r\n      };\r\n\r\n      // 验证数据完整性\r\n      if (!this.validatePerformanceData(cleanedData)) {\r\n        console.warn('Performance data validation failed');\r\n        return null;\r\n      }\r\n\r\n      return cleanedData;\r\n\r\n    } catch (error) {\r\n      console.error('Error getting performance data:', error);\r\n\r\n      // 降级处理：返回基本数据\r\n      try {\r\n        return {\r\n          pageLoad: {},\r\n          navigation: {},\r\n          resources: [],\r\n          userTiming: [],\r\n          vitals: {},\r\n          memory: {},\r\n          errors: [],\r\n          userBehavior: [],\r\n          slowResources: [],\r\n          timestamp: Date.now(),\r\n          error: 'Data collection failed'\r\n        };\r\n      } catch (fallbackError) {\r\n        console.error('Critical error in getPerformanceData fallback:', fallbackError);\r\n        return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 清理页面加载指标数据\r\n     * @param {Object} metrics - 原始指标数据\r\n     * @returns {Object} 清理后的指标数据\r\n     */\r\n  sanitizePageLoadMetrics(metrics) {\r\n    try {\r\n      const sanitized = {};\r\n\r\n      // 定义允许的数值字段\r\n      const numericFields = ['dnsLookup', 'tcpConnect', 'sslHandshake', 'requestResponse', 'domParsing', 'resourceLoading', 'totalLoadTime', 'firstContentfulPaint', 'largestContentfulPaint'];\r\n\r\n      numericFields.forEach(field => {\r\n        if (typeof metrics[field] === 'number' && isFinite(metrics[field]) && metrics[field] >= 0) {\r\n          sanitized[field] = Math.round(metrics[field] * 100) / 100; // 保留两位小数\r\n        }\r\n      });\r\n\r\n      // 处理其他字段\r\n      if (typeof metrics.navigationType === 'number') {\r\n        sanitized.navigationType = metrics.navigationType;\r\n      }\r\n      if (typeof metrics.redirectCount === 'number') {\r\n        sanitized.redirectCount = metrics.redirectCount;\r\n      }\r\n      if (typeof metrics.timestamp === 'number') {\r\n        sanitized.timestamp = metrics.timestamp;\r\n      }\r\n\r\n      return sanitized;\r\n    } catch (error) {\r\n      console.error('Error sanitizing page load metrics:', error);\r\n      return {};\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 清理导航指标数据\r\n     * @param {Object} metrics - 原始导航指标数据\r\n     * @returns {Object} 清理后的导航指标数据\r\n     */\r\n  sanitizeNavigationMetrics(metrics) {\r\n    try {\r\n      const sanitized = {};\r\n      const numericFields = ['dnsLookup', 'tcpConnect', 'requestResponse', 'domProcessing', 'loadComplete', 'transferSize', 'encodedBodySize', 'decodedBodySize'];\r\n\r\n      numericFields.forEach(field => {\r\n        if (typeof metrics[field] === 'number' && isFinite(metrics[field]) && metrics[field] >= 0) {\r\n          sanitized[field] = Math.round(metrics[field] * 100) / 100;\r\n        }\r\n      });\r\n\r\n      if (typeof metrics.timestamp === 'number') {\r\n        sanitized.timestamp = metrics.timestamp;\r\n      }\r\n\r\n      return sanitized;\r\n    } catch (error) {\r\n      console.error('Error sanitizing navigation metrics:', error);\r\n      return {};\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 清理资源指标数据\r\n     * @param {Array} resources - 原始资源数据\r\n     * @returns {Array} 清理后的资源数据\r\n     */\r\n  sanitizeResourceMetrics(resources) {\r\n    try {\r\n      if (!Array.isArray(resources)) {\r\n        return [];\r\n      }\r\n\r\n      return resources\r\n        .filter(resource => resource && typeof resource === 'object')\r\n        .slice(-50) // 只保留最近50条记录\r\n        .map(resource => ({\r\n          name: typeof resource.name === 'string' ? resource.name.substring(0, 200) : 'unknown',\r\n          type: typeof resource.type === 'string' ? resource.type.substring(0, 50) : 'unknown',\r\n          duration: typeof resource.duration === 'number' && isFinite(resource.duration) ? resource.duration : 0,\r\n          size: typeof resource.size === 'number' && isFinite(resource.size) ? resource.size : 0,\r\n          timestamp: typeof resource.timestamp === 'number' ? resource.timestamp : Date.now()\r\n        }));\r\n    } catch (error) {\r\n      console.error('Error sanitizing resource metrics:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 清理用户时间数据\r\n     * @param {Array} userTiming - 原始用户时间数据\r\n     * @returns {Array} 清理后的用户时间数据\r\n     */\r\n  sanitizeUserTiming(userTiming) {\r\n    try {\r\n      if (!Array.isArray(userTiming)) {\r\n        return [];\r\n      }\r\n\r\n      return userTiming\r\n        .filter(timing => timing && typeof timing === 'object')\r\n        .slice(-30) // 只保留最近30条记录\r\n        .map(timing => ({\r\n          name: typeof timing.name === 'string' ? timing.name.substring(0, 100) : 'unknown',\r\n          duration: typeof timing.duration === 'number' && isFinite(timing.duration) ? timing.duration : 0,\r\n          startTime: typeof timing.startTime === 'number' && isFinite(timing.startTime) ? timing.startTime : 0,\r\n          timestamp: typeof timing.timestamp === 'number' ? timing.timestamp : Date.now()\r\n        }));\r\n    } catch (error) {\r\n      console.error('Error sanitizing user timing:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 清理Web Vitals数据\r\n     * @param {Object} vitals - 原始Web Vitals数据\r\n     * @returns {Object} 清理后的Web Vitals数据\r\n     */\r\n  sanitizeVitals(vitals) {\r\n    try {\r\n      const sanitized = {};\r\n\r\n      ['lcp', 'fid', 'cls'].forEach(vital => {\r\n        if (vitals[vital] && typeof vitals[vital] === 'object') {\r\n          if (typeof vitals[vital].value === 'number' && isFinite(vitals[vital].value)) {\r\n            sanitized[vital] = {\r\n              value: vitals[vital].value,\r\n              timestamp: typeof vitals[vital].timestamp === 'number' ? vitals[vital].timestamp : Date.now()\r\n            };\r\n          }\r\n        }\r\n      });\r\n\r\n      return sanitized;\r\n    } catch (error) {\r\n      console.error('Error sanitizing vitals:', error);\r\n      return {};\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 清理内存指标数据\r\n     * @param {Object} memory - 原始内存数据\r\n     * @returns {Object} 清理后的内存数据\r\n     */\r\n  sanitizeMemoryMetrics(memory) {\r\n    try {\r\n      const sanitized = {};\r\n      const memoryFields = ['usedJSHeapSize', 'totalJSHeapSize', 'jsHeapSizeLimit'];\r\n\r\n      memoryFields.forEach(field => {\r\n        if (typeof memory[field] === 'number' && isFinite(memory[field]) && memory[field] >= 0) {\r\n          sanitized[field] = memory[field];\r\n        }\r\n      });\r\n\r\n      if (typeof memory.timestamp === 'number') {\r\n        sanitized.timestamp = memory.timestamp;\r\n      }\r\n\r\n      return sanitized;\r\n    } catch (error) {\r\n      console.error('Error sanitizing memory metrics:', error);\r\n      return {};\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 清理用户行为数据\r\n     * @param {Array} behavior - 原始行为数据\r\n     * @returns {Array} 清理后的行为数据\r\n     */\r\n  sanitizeUserBehaviorData(behavior) {\r\n    try {\r\n      if (!Array.isArray(behavior)) {\r\n        return [];\r\n      }\r\n\r\n      return behavior\r\n        .filter(item => item && typeof item === 'object')\r\n        .slice(-50) // 只保留最近50条记录\r\n        .map(item => ({\r\n          action: typeof item.action === 'string' ? item.action.substring(0, 50) : 'unknown',\r\n          timestamp: typeof item.timestamp === 'number' ? item.timestamp : Date.now(),\r\n          element: typeof item.element === 'string' ? item.element.substring(0, 50) : '',\r\n          x: typeof item.x === 'number' ? item.x : 0,\r\n          y: typeof item.y === 'number' ? item.y : 0\r\n        }));\r\n    } catch (error) {\r\n      console.error('Error sanitizing user behavior:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 清理错误数据\r\n     * @param {Array} errors - 原始错误数据\r\n     * @returns {Array} 清理后的错误数据\r\n     */\r\n  sanitizeErrors(errors) {\r\n    try {\r\n      if (!Array.isArray(errors)) {\r\n        return [];\r\n      }\r\n\r\n      return errors\r\n        .filter(error => error && typeof error === 'object')\r\n        .slice(-20) // 只保留最近20条错误记录\r\n        .map(error => ({\r\n          id: typeof error.id === 'string' ? error.id.substring(0, 50) : 'unknown',\r\n          type: typeof error.type === 'string' ? error.type.substring(0, 50) : 'unknown',\r\n          message: typeof error.message === 'string' ? error.message.substring(0, 200) : 'Unknown error',\r\n          filename: typeof error.filename === 'string' ? error.filename.substring(0, 100) : '',\r\n          lineno: typeof error.lineno === 'number' ? error.lineno : 0,\r\n          colno: typeof error.colno === 'number' ? error.colno : 0,\r\n          timestamp: typeof error.timestamp === 'number' ? error.timestamp : Date.now(),\r\n          severity: typeof error.severity === 'string' ? error.severity.substring(0, 20) : 'unknown'\r\n        }));\r\n    } catch (error) {\r\n      console.error('Error sanitizing errors:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 清理慢资源数据\r\n     * @param {Array} resources - 原始资源数据\r\n     * @returns {Array} 清理后的资源数据\r\n     */\r\n  sanitizeSlowResourcesData(resources) {\r\n    try {\r\n      if (!Array.isArray(resources)) {\r\n        return [];\r\n      }\r\n\r\n      return resources\r\n        .filter(resource => resource && typeof resource === 'object')\r\n        .slice(-30) // 只保留最近30条慢资源记录\r\n        .map(resource => ({\r\n          name: typeof resource.name === 'string' ? resource.name.substring(0, 200) : 'unknown',\r\n          duration: typeof resource.duration === 'number' && isFinite(resource.duration) ? resource.duration : 0,\r\n          type: typeof resource.type === 'string' ? resource.type.substring(0, 50) : 'unknown',\r\n          size: typeof resource.size === 'number' && isFinite(resource.size) ? resource.size : 0,\r\n          timestamp: typeof resource.timestamp === 'number' ? resource.timestamp : Date.now()\r\n        }));\r\n    } catch (error) {\r\n      console.error('Error sanitizing slow resources:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 清理用户代理字符串\r\n     * @returns {string} 清理后的用户代理字符串\r\n     */\r\n  sanitizeUserAgent() {\r\n    try {\r\n      if (typeof navigator !== 'undefined' && navigator.userAgent) {\r\n        return navigator.userAgent.substring(0, 200);\r\n      }\r\n      return 'Unknown';\r\n    } catch (error) {\r\n      console.error('Error sanitizing user agent:', error);\r\n      return 'Unknown';\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 验证性能数据的完整性\r\n     * @param {Object} data - 性能数据\r\n     * @returns {boolean} 验证结果\r\n     */\r\n  validatePerformanceData(data) {\r\n    try {\r\n      if (!data || typeof data !== 'object') {\r\n        return false;\r\n      }\r\n\r\n      // 检查必需字段\r\n      const requiredFields = ['pageLoad', 'navigation', 'resources', 'userTiming', 'vitals', 'errors', 'userBehavior', 'timestamp'];\r\n      for (const field of requiredFields) {\r\n        if (!(field in data)) {\r\n          console.warn(`Missing required field in performance data: ${field}`);\r\n          return false;\r\n        }\r\n      }\r\n\r\n      // 检查数据类型\r\n      if (typeof data.pageLoad !== 'object' ||\r\n                typeof data.navigation !== 'object' ||\r\n                !Array.isArray(data.resources) ||\r\n                !Array.isArray(data.userTiming) ||\r\n                typeof data.vitals !== 'object' ||\r\n                !Array.isArray(data.errors) ||\r\n                !Array.isArray(data.userBehavior) ||\r\n                typeof data.timestamp !== 'number') {\r\n        console.warn('Invalid data types in performance data');\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error validating performance data:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 获取错误数据\r\n     */\r\n  getErrors() {\r\n    return this.errors;\r\n  }\r\n\r\n  /**\r\n     * 获取用户行为数据\r\n     */\r\n  getUserBehavior() {\r\n    return this.userBehavior;\r\n  }\r\n\r\n  /**\r\n     * 获取用户行为统计\r\n     */\r\n  getBehaviorStats() {\r\n    this.updateBehaviorStats();\r\n    return this.behaviorStats;\r\n  }\r\n\r\n  /**\r\n     * 清除数据\r\n     */\r\n  clearData() {\r\n    this.performanceData = {\r\n      pageLoad: {},\r\n      navigation: {},\r\n      resources: [],\r\n      userTiming: [],\r\n      vitals: {}\r\n    };\r\n    this.errors = [];\r\n    this.userBehavior = [];\r\n  }\r\n\r\n  /**\r\n     * 销毁监控器\r\n     */\r\n  destroy() {\r\n    try {\r\n      // 设置销毁标志\r\n      this.isDestroyed = true;\r\n\r\n      if (this.reportTimer) {\r\n        clearInterval(this.reportTimer);\r\n        this.reportTimer = null;\r\n      }\r\n\r\n      // 清理事件监听器\r\n      this.removeEventListeners();\r\n\r\n      // 清理数据\r\n      this.clearData();\r\n\r\n      // 清理频率限制映射\r\n      if (this.errorFrequencyMap) {\r\n        this.errorFrequencyMap.clear();\r\n      }\r\n\r\n      // 清理慢资源数组\r\n      if (Array.isArray(this.slowResources)) {\r\n        this.slowResources.length = 0;\r\n      }\r\n\r\n      this.isInitialized = false;\r\n      console.log('PerformanceMonitor destroyed successfully');\r\n    } catch (error) {\r\n      console.error('Error destroying PerformanceMonitor:', error);\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 移除事件监听器\r\n     */\r\n  removeEventListeners() {\r\n    // 注意：由于addEventListener使用的是匿名函数，\r\n    // 实际项目中应该保存函数引用以便正确移除\r\n    // 这里只是示例性的清理\r\n    try {\r\n      // 清理可能的observer\r\n      if (this.resourceObserver) {\r\n        this.resourceObserver.disconnect();\r\n        this.resourceObserver = null;\r\n      }\r\n      if (this.measureObserver) {\r\n        this.measureObserver.disconnect();\r\n        this.measureObserver = null;\r\n      }\r\n      if (this.lcpObserver) {\r\n        this.lcpObserver.disconnect();\r\n        this.lcpObserver = null;\r\n      }\r\n      if (this.fidObserver) {\r\n        this.fidObserver.disconnect();\r\n        this.fidObserver = null;\r\n      }\r\n      if (this.clsObserver) {\r\n        this.clsObserver.disconnect();\r\n        this.clsObserver = null;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error removing event listeners:', error);\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 检查是否应该记录错误（频率限制）\r\n     */\r\n  shouldLogError(errorInfo) {\r\n    try {\r\n      const errorKey = `${errorInfo.type}_${errorInfo.message}`;\r\n      const now = Date.now();\r\n      const oneMinute = 60000;\r\n\r\n      if (!this.errorFrequencyMap.has(errorKey)) {\r\n        this.errorFrequencyMap.set(errorKey, { count: 1, firstOccurrence: now });\r\n        return true;\r\n      }\r\n\r\n      const errorData = this.errorFrequencyMap.get(errorKey);\r\n\r\n      // 如果超过一分钟，重置计数\r\n      if (now - errorData.firstOccurrence > oneMinute) {\r\n        this.errorFrequencyMap.set(errorKey, { count: 1, firstOccurrence: now });\r\n        return true;\r\n      }\r\n\r\n      // 检查频率限制\r\n      if (errorData.count < this.maxErrorsPerMinute) {\r\n        errorData.count++;\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    } catch (error) {\r\n      console.error('Error in shouldLogError:', error);\r\n      return true; // 出错时默认记录\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 清理错误消息\r\n     */\r\n  sanitizeErrorMessage(message) {\r\n    if (typeof message !== 'string') {\r\n      return 'Invalid error message';\r\n    }\r\n    // 限制消息长度，防止过长的错误消息\r\n    return message.substring(0, 500);\r\n  }\r\n\r\n  /**\r\n     * 清理URL\r\n     */\r\n  sanitizeUrl(url) {\r\n    if (typeof url !== 'string') {\r\n      return 'unknown';\r\n    }\r\n    try {\r\n      // 移除敏感信息（如查询参数中的token等）\r\n      const urlObj = new URL(url);\r\n      return `${urlObj.protocol}//${urlObj.host}${urlObj.pathname}`;\r\n    } catch (error) {\r\n      return url.substring(0, PERFORMANCE_CONSTANTS.RESOURCE.MAX_URL_LENGTH); // 如果URL解析失败，截断长度\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 清理堆栈信息\r\n     */\r\n  sanitizeStack(stack) {\r\n    if (typeof stack !== 'string') {\r\n      return null;\r\n    }\r\n    // 限制堆栈长度\r\n    return stack.substring(0, 2000);\r\n  }\r\n\r\n  /**\r\n     * 获取错误严重级别\r\n     */\r\n  getErrorSeverity(errorInfo) {\r\n    if (!errorInfo || !errorInfo.type) {\r\n      return 'unknown';\r\n    }\r\n\r\n    switch (errorInfo.type) {\r\n    case 'javascript':\r\n      // 根据错误消息判断严重程度\r\n      if (errorInfo.message && errorInfo.message.toLowerCase().includes('out of memory')) {\r\n        return 'critical';\r\n      }\r\n      return 'high';\r\n    case 'promise':\r\n      return 'medium';\r\n    case 'resource':\r\n      return 'low';\r\n    case 'performance':\r\n      return 'medium';\r\n    default:\r\n      return 'unknown';\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 处理严重错误\r\n     */\r\n  handleCriticalError(errorInfo) {\r\n    try {\r\n      console.error('Critical error detected:', errorInfo);\r\n      // 可以在这里添加特殊处理逻辑，如立即上报、用户通知等\r\n    } catch (error) {\r\n      console.error('Error handling critical error:', error);\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 验证页面加载指标的合理性\r\n     */\r\n  validatePageLoadMetrics(metrics) {\r\n    try {\r\n      const warnings = [];\r\n\r\n      // 检查异常值\r\n      if (metrics.totalLoadTime > 60000) { // 超过60秒\r\n        warnings.push('Extremely long page load time detected');\r\n      }\r\n\r\n      if (metrics.dnsLookup > 5000) { // DNS查询超过5秒\r\n        warnings.push('Slow DNS lookup detected');\r\n      }\r\n\r\n      if (metrics.requestResponse > 30000) { // 请求响应超过30秒\r\n        warnings.push('Slow server response detected');\r\n      }\r\n\r\n      if (warnings.length > 0) {\r\n        console.warn('Performance warnings:', warnings);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error validating page load metrics:', error);\r\n    }\r\n  }\r\n}\r\n\r\n// 导出类\r\nif (typeof module !== 'undefined' && module.exports) {\r\n  module.exports = PerformanceMonitor;\r\n} else {\r\n  window.PerformanceMonitor = PerformanceMonitor;\r\n}\r\n\r\n// 自动初始化（如果在浏览器环境中）\r\nif (typeof window !== 'undefined') {\r\n  // 等待 DOM 加载完成后初始化\r\n  if (document.readyState === 'loading') {\r\n    document.addEventListener('DOMContentLoaded', () => {\r\n      window.performanceMonitor = new PerformanceMonitor();\r\n    });\r\n  } else {\r\n    window.performanceMonitor = new PerformanceMonitor();\r\n  }\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\performance-optimizer.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\product-card.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\selectors-config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\uniqueness-checker.js","messages":[{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":17,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":17,"endColumn":5,"fix":{"range":[515,519],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":20,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":20,"endColumn":5,"fix":{"range":[571,575],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":23,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":23,"endColumn":5,"fix":{"range":[625,629],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":87,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":87,"endColumn":5,"fix":{"range":[2208,2212],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":95,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":95,"endColumn":5,"fix":{"range":[2426,2430],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":98,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":98,"endColumn":5,"fix":{"range":[2476,2480],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":103,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":103,"endColumn":5,"fix":{"range":[2574,2578],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":124,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":124,"endColumn":5,"fix":{"range":[2945,2949],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":130,"column":38,"nodeType":"Program","messageId":"trailingSpace","endLine":130,"endColumn":39,"fix":{"range":[3116,3117],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":150,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":150,"endColumn":5,"fix":{"range":[3537,3541],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":156,"column":38,"nodeType":"Program","messageId":"trailingSpace","endLine":156,"endColumn":39,"fix":{"range":[3704,3705],"text":""}},{"ruleId":"no-unused-vars","severity":2,"message":"'lockKey' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":210,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":210,"endColumn":18},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":211,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":211,"endColumn":5,"fix":{"range":[4909,4913],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":215,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":215,"endColumn":7,"fix":{"range":[5031,5037],"text":""}},{"ruleId":"no-unused-vars","severity":2,"message":"'lockKey' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":249,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":249,"endColumn":18},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":250,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":250,"endColumn":5,"fix":{"range":[5981,5985],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":253,"column":55,"nodeType":"Program","messageId":"trailingSpace","endLine":253,"endColumn":56,"fix":{"range":[6097,6098],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":262,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":262,"endColumn":7,"fix":{"range":[6310,6316],"text":""}},{"ruleId":"no-unused-vars","severity":2,"message":"'lockKey' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":296,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":296,"endColumn":18},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":297,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":297,"endColumn":5,"fix":{"range":[7072,7076],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":300,"column":55,"nodeType":"Program","messageId":"trailingSpace","endLine":300,"endColumn":56,"fix":{"range":[7188,7189],"text":""}},{"ruleId":"no-unused-vars","severity":2,"message":"'lockKey' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":323,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":323,"endColumn":18},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":324,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":324,"endColumn":5,"fix":{"range":[7647,7651],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":328,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":328,"endColumn":7,"fix":{"range":[7739,7745],"text":""}},{"ruleId":"no-trailing-spaces","severity":2,"message":"Trailing spaces not allowed.","line":369,"column":1,"nodeType":"Program","messageId":"trailingSpace","endLine":369,"endColumn":5,"fix":{"range":[8625,8629],"text":""}},{"ruleId":"eol-last","severity":2,"message":"Newline required at end of file but not found.","line":413,"column":2,"nodeType":"Program","messageId":"missing","fix":{"range":[9618,9618],"text":"\n"}}],"suppressedMessages":[],"errorCount":26,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":22,"fixableWarningCount":0,"source":"/**\n * 用户唯一性检查模块\n * 负责检查用户名和邮箱的唯一性，处理并发冲突\n */\n// 全局mockStorage用于测试模式下的数据共享\nif (typeof global !== 'undefined') {\n  global.mockStorageMap = global.mockStorageMap || new Map();\n}\n\nclass UniquenessChecker {\n  constructor(options = {}) {\n    this.storageKey = options.storageKey || 'registeredUsers';\n    this.lockTimeout = options.lockTimeout || 5000; // 5秒锁超时\n    this.retryAttempts = options.retryAttempts || 3;\n    this.retryDelay = options.retryDelay || 100; // 100ms\n    this.testMode = options.testMode || false;\n    \n    // 内存中的锁机制（用于并发控制）\n    this.locks = new Map();\n    \n    // 初始化mockStorage\n    this.mockStorage = [];\n    \n    // 初始化存储\n    this.initializeStorage();\n  }\n\n  /**\n   * 初始化存储\n   */\n  initializeStorage() {\n    if (this.testMode) {\n      // 测试模式：使用全局mockStorage\n      if (typeof global !== 'undefined' && !global.mockStorageMap.has(this.storageKey)) {\n        global.mockStorageMap.set(this.storageKey, []);\n      }\n    } else if (typeof localStorage !== 'undefined') {\n      // 浏览器环境\n      if (!localStorage.getItem(this.storageKey)) {\n        localStorage.setItem(this.storageKey, JSON.stringify([]));\n      }\n    } else {\n      // Node.js 环境或测试环境\n      this.mockStorage = this.mockStorage || [];\n    }\n  }\n\n  /**\n   * 获取所有已注册用户\n   */\n  getRegisteredUsers() {\n    if (this.testMode && typeof global !== 'undefined') {\n      // 测试模式：使用全局mockStorage\n      return global.mockStorageMap.get(this.storageKey) || [];\n    } else if (typeof localStorage !== 'undefined') {\n      try {\n        return JSON.parse(localStorage.getItem(this.storageKey) || '[]');\n      } catch (error) {\n        console.error('解析用户数据失败:', error);\n        return [];\n      }\n    } else {\n      return this.mockStorage || [];\n    }\n  }\n\n  /**\n   * 保存用户数据\n   */\n  saveUsers(users) {\n    if (this.testMode && typeof global !== 'undefined') {\n      // 测试模式：使用全局mockStorage\n      global.mockStorageMap.set(this.storageKey, users);\n    } else if (typeof localStorage !== 'undefined') {\n      localStorage.setItem(this.storageKey, JSON.stringify(users));\n    } else {\n      this.mockStorage = users;\n    }\n  }\n\n  /**\n   * 获取分布式锁\n   */\n  async acquireLock(key) {\n    const lockKey = `lock_${key}`;\n    const now = Date.now();\n    \n    // 检查是否已有锁\n    if (this.locks.has(lockKey)) {\n      const lockTime = this.locks.get(lockKey);\n      if (now - lockTime < this.lockTimeout) {\n        throw new Error(`资源 ${key} 正在被其他操作使用，请稍后重试`);\n      }\n    }\n    \n    // 获取锁\n    this.locks.set(lockKey, now);\n    \n    // 设置自动释放锁\n    setTimeout(() => {\n      this.releaseLock(key);\n    }, this.lockTimeout);\n    \n    return lockKey;\n  }\n\n  /**\n   * 释放锁\n   */\n  releaseLock(key) {\n    const lockKey = `lock_${key}`;\n    this.locks.delete(lockKey);\n  }\n\n  /**\n   * 检查用户名是否唯一\n   */\n  async checkUsernameUniqueness(username) {\n    if (!username || typeof username !== 'string') {\n      throw new Error('用户名不能为空');\n    }\n\n    const normalizedUsername = username.toLowerCase().trim();\n    \n    if (normalizedUsername.length === 0) {\n      throw new Error('用户名不能为空');\n    }\n\n    const users = this.getRegisteredUsers();\n    const exists = users.some(user => \n      user.username && user.username.toLowerCase() === normalizedUsername\n    );\n\n    return {\n      isUnique: !exists,\n      username: normalizedUsername,\n      message: exists ? '用户名已被使用' : '用户名可用'\n    };\n  }\n\n  /**\n   * 检查邮箱是否唯一\n   */\n  async checkEmailUniqueness(email) {\n    if (!email || typeof email !== 'string') {\n      throw new Error('邮箱不能为空');\n    }\n\n    const normalizedEmail = email.toLowerCase().trim();\n    \n    if (normalizedEmail.length === 0) {\n      throw new Error('邮箱不能为空');\n    }\n\n    const users = this.getRegisteredUsers();\n    const exists = users.some(user => \n      user.email && user.email.toLowerCase() === normalizedEmail\n    );\n\n    return {\n      isUnique: !exists,\n      email: normalizedEmail,\n      message: exists ? '邮箱已被使用' : '邮箱可用'\n    };\n  }\n\n  /**\n   * 批量检查唯一性（用户名和邮箱）\n   */\n  async checkBatchUniqueness(username, email) {\n    const results = {\n      username: null,\n      email: null,\n      isValid: true,\n      errors: []\n    };\n\n    try {\n      // 并行检查用户名和邮箱\n      const [usernameResult, emailResult] = await Promise.all([\n        this.checkUsernameUniqueness(username),\n        this.checkEmailUniqueness(email)\n      ]);\n\n      results.username = usernameResult;\n      results.email = emailResult;\n\n      if (!usernameResult.isUnique) {\n        results.isValid = false;\n        results.errors.push(usernameResult.message);\n      }\n\n      if (!emailResult.isUnique) {\n        results.isValid = false;\n        results.errors.push(emailResult.message);\n      }\n\n    } catch (error) {\n      results.isValid = false;\n      results.errors.push(error.message);\n    }\n\n    return results;\n  }\n\n  /**\n   * 预留用户名和邮箱（防止并发注册）\n   */\n  async reserveUser(username, email, reservationId = null) {\n    const lockKey = await this.acquireLock('user_registration');\n    \n    try {\n      // 再次检查唯一性（双重检查锁定模式）\n      const uniquenessCheck = await this.checkBatchUniqueness(username, email);\n      \n      if (!uniquenessCheck.isValid) {\n        throw new Error(`注册失败: ${uniquenessCheck.errors.join(', ')}`);\n      }\n\n      const users = this.getRegisteredUsers();\n      const reservation = {\n        id: reservationId || this.generateReservationId(),\n        username: username.toLowerCase().trim(),\n        email: email.toLowerCase().trim(),\n        status: 'reserved',\n        reservedAt: new Date().toISOString(),\n        expiresAt: new Date(Date.now() + 300000).toISOString() // 5分钟过期\n      };\n\n      users.push(reservation);\n      this.saveUsers(users);\n\n      return {\n        success: true,\n        reservationId: reservation.id,\n        message: '用户名和邮箱已预留',\n        expiresAt: reservation.expiresAt\n      };\n\n    } finally {\n      this.releaseLock('user_registration');\n    }\n  }\n\n  /**\n   * 确认预留（将预留转为正式注册）\n   */\n  async confirmReservation(reservationId, userData) {\n    const lockKey = await this.acquireLock('user_registration');\n    \n    try {\n      const users = this.getRegisteredUsers();\n      const reservationIndex = users.findIndex(user => \n        user.id === reservationId && user.status === 'reserved'\n      );\n\n      if (reservationIndex === -1) {\n        throw new Error('预留记录不存在或已过期');\n      }\n\n      const reservation = users[reservationIndex];\n      \n      // 检查是否过期\n      if (reservation.expiresAt && new Date() > new Date(reservation.expiresAt)) {\n        // 删除过期预留\n        users.splice(reservationIndex, 1);\n        this.saveUsers(users);\n        throw new Error('预留已过期，请重新注册');\n      }\n\n      // 更新为正式用户\n      users[reservationIndex] = {\n        ...reservation,\n        ...userData,\n        status: 'active',\n        registeredAt: new Date().toISOString()\n      };\n\n      this.saveUsers(users);\n\n      return {\n        success: true,\n        userId: reservation.id,\n        message: '注册成功'\n      };\n\n    } finally {\n      this.releaseLock('user_registration');\n    }\n  }\n\n  /**\n   * 取消预留\n   */\n  async cancelReservation(reservationId) {\n    const lockKey = await this.acquireLock('user_registration');\n    \n    try {\n      const users = this.getRegisteredUsers();\n      const reservationIndex = users.findIndex(user => \n        user.id === reservationId && user.status === 'reserved'\n      );\n\n      if (reservationIndex !== -1) {\n        users.splice(reservationIndex, 1);\n        this.saveUsers(users);\n      }\n\n      return {\n        success: true,\n        message: '预留已取消'\n      };\n\n    } finally {\n      this.releaseLock('user_registration');\n    }\n  }\n\n  /**\n   * 清理过期预留\n   */\n  async cleanupExpiredReservations() {\n    const lockKey = await this.acquireLock('cleanup');\n    \n    try {\n      const users = this.getRegisteredUsers();\n      const now = new Date();\n      \n      const activeUsers = users.filter(user => {\n        if (user.status === 'reserved') {\n          return new Date(user.expiresAt) > now;\n        }\n        return true; // 保留非预留用户\n      });\n\n      if (activeUsers.length !== users.length) {\n        this.saveUsers(activeUsers);\n        return {\n          success: true,\n          cleaned: users.length - activeUsers.length,\n          message: `清理了 ${users.length - activeUsers.length} 个过期预留`\n        };\n      }\n\n      return {\n        success: true,\n        cleaned: 0,\n        message: '没有过期预留需要清理'\n      };\n\n    } finally {\n      this.releaseLock('cleanup');\n    }\n  }\n\n  /**\n   * 生成预留ID\n   */\n  generateReservationId() {\n    return 'res_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n  }\n\n  /**\n   * 获取用户统计信息\n   */\n  getStatistics() {\n    const users = this.getRegisteredUsers();\n    const now = new Date();\n    \n    const stats = {\n      total: users.length,\n      active: 0,\n      reserved: 0,\n      expired: 0\n    };\n\n    users.forEach(user => {\n      if (user.status === 'active') {\n        stats.active++;\n      } else if (user.status === 'reserved') {\n        if (new Date(user.expiresAt) > now) {\n          stats.reserved++;\n        } else {\n          stats.expired++;\n        }\n      }\n    });\n\n    return stats;\n  }\n\n  /**\n   * 重置所有数据（仅用于测试）\n   */\n  reset() {\n    if (this.testMode && typeof global !== 'undefined') {\n      // 测试模式：重置全局mockStorage\n      global.mockStorageMap.set(this.storageKey, []);\n    } else if (typeof localStorage !== 'undefined') {\n      localStorage.removeItem(this.storageKey);\n    }\n    this.mockStorage = [];\n    this.locks.clear();\n    this.initializeStorage();\n  }\n}\n\n// 导出模块\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = UniquenessChecker;\n} else if (typeof window !== 'undefined') {\n  window.UniquenessChecker = UniquenessChecker;\n}","usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\codes\\onlinestore\\caddy-style-shopping-site\\js\\utils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"indent","replacedBy":[]},{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"no-trailing-spaces","replacedBy":[]},{"ruleId":"eol-last","replacedBy":[]},{"ruleId":"no-multiple-empty-lines","replacedBy":[]},{"ruleId":"arrow-spacing","replacedBy":[]},{"ruleId":"template-curly-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]}]